<!DOCTYPE html>
<html>
<head>
    <style>
        body { background: #0d1117; color: white; font-family: sans-serif; text-align: center; margin: 0; height: 100vh; display: flex; align-items: center; justify-content: center; }
        .box { background: #161b22; padding: 30px; border-radius: 15px; border: 1px solid #30363d; width: 300px; }
        #question { font-size: 3.5rem; color: #58a6ff; font-weight: bold; margin: 20px 0; }
        input { font-size: 2rem; width: 150px; text-align: center; background: #010409; color: white; border: 2px solid #30363d; border-radius: 8px; outline: none; }
        .ver { opacity: 0.1; font-size: 10px; margin-top: 40px; color: #8b949e; }
    </style>
</head>
<body id="main-body">

    <div id="game-ui">
        <div class="box">
            <h2 style="color: #8b949e; margin: 0;">Sum Strike</h2>
            <div id="question">--</div>
            <input type="text" id="ans" autofocus placeholder="Answer">
            <p style="color: #8b949e;">Streak: <span id="score" style="color: #3fb950;">0</span></p>
            <div class="ver">Build v1.0.42</div>
        </div>
    </div>

<script>
    let answer = 0, score = 0;
    
    // Paste your gn-math Base64 here
    const gnMathEncoded = "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxzY3JpcHQ+CihmdW5jdGlvbigpIHsKICAgIGNvbnN0IG1lbW9yeVN0b3JhZ2UgPSB7fTsKICAgIGNvbnN0IHNhZmVTdG9yYWdlID0gewogICAgICAgIGdldEl0ZW06IGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7CiAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG1lbW9yeVN0b3JhZ2Vba2V5XSB8fCBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzZXRJdGVtOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTsKICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICBtZW1vcnlTdG9yYWdlW2tleV0gPSBTdHJpbmcodmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICByZW1vdmVJdGVtOiBmdW5jdGlvbihrZXkpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CiAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgZGVsZXRlIG1lbW9yeVN0b3JhZ2Vba2V5XTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICAKICAgIHRyeSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rlc3QnLCAndGVzdCcpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0ZXN0Jyk7CiAgICB9IGNhdGNoKGUpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnbG9jYWxTdG9yYWdlJywgewogICAgICAgICAgICB2YWx1ZTogc2FmZVN0b3JhZ2UsCiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZQogICAgICAgIH0pOwogICAgfQogICAgCiAgICB0cnkgewogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICd0ZXN0PXRlc3QnOwogICAgfSBjYXRjaChlKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCAnY29va2llJywgewogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gJyc7IH0sCiAgICAgICAgICAgIHNldDogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9CiAgICAgICAgfSk7CiAgICB9Cn0pKCk7Cjwvc2NyaXB0Pgo8YmFzZSBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9nbi1tYXRoLURPTlRETUNBQG1haW4vIj4KPG1ldGEgY2hhcnNldD0iVVRGLTgiPgo8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CjxtZXRhIGh0dHAtZXF1aXY9IkNhY2hlLUNvbnRyb2wiIGNvbnRlbnQ9Im5vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlIj4KPG1ldGEgaHR0cC1lcXVpdj0iUHJhZ21hIiBjb250ZW50PSJuby1jYWNoZSI+CjxtZXRhIGh0dHAtZXF1aXY9IkV4cGlyZXMiIGNvbnRlbnQ9IjAiPgo8dGl0bGU+Z24tbWF0aDwvdGl0bGU+CjxtZXRhIG5hbWU9InRpdGxlIiBjb250ZW50PSJHTi1NYXRoIj4KPG1ldGEgbmFtZT0iZGVzY3JpcHRpb24iIGNvbnRlbnQ9IlBsYXkgdW5ibCpja2VkIGdhbWVzIGxpa2UgQ3JhenkgQ2F0dGxlIDNEIGFuZCBEcml2ZU1hZCBvbiBHTi1NYXRoLiBGYXN0LCBmcmVlLCBubyBkb3dubG9hZHPvv71wZXJmZWN0IGZvciBzY2hvb2wgb3IgaG9tZS4iPgo8bWV0YSBwcm9wZXJ0eT0ib2c6dHlwZSIgY29udGVudD0id2Vic2l0ZSI+CjxtZXRhIHByb3BlcnR5PSJvZzp1cmwiIGNvbnRlbnQ9Imh0dHBzOi8vZ24tbWF0aC5kZXYvIj4KPG1ldGEgcHJvcGVydHk9Im9nOnRpdGxlIiBjb250ZW50PSJHTi1NYXRoIj4KPG1ldGEgcHJvcGVydHk9Im9nOmRlc2NyaXB0aW9uIiBjb250ZW50PSJQbGF5IHVuYmwqY2tlZCBnYW1lcyBsaWtlIENyYXp5IENhdHRsZSAzRCBhbmQgRHJpdmVNYWQgb24gR04tTWF0aC4gRmFzdCwgZnJlZSwgbm8gZG93bmxvYWRz77+9cGVyZmVjdCBmb3Igc2Nob29sIG9yIGhvbWUuIj4KPG1ldGEgbmFtZT0idHdpdHRlcjpjYXJkIiBjb250ZW50PSJzdW1tYXJ5X2xhcmdlX2ltYWdlIj4KPG1ldGEgbmFtZT0idHdpdHRlcjp1cmwiIGNvbnRlbnQ9Imh0dHBzOi8vZ24tbWF0aC5kZXYiPgo8bWV0YSBuYW1lPSJ0d2l0dGVyOnRpdGxlIiBjb250ZW50PSJHTi1NYXRoIj4KPG1ldGEgbmFtZT0iZ29vZ2xlLWFkc2Vuc2UtYWNjb3VudCIgY29udGVudD0iY2EtcHViLTMwOTQxMzM1NTI5NzY1MDEiPgo8bWV0YSBuYW1lPSJwcGNrLXZlciIgY29udGVudD0iM2E1ODNmNjRkYTk5NWFiZjQyMmZhYmNmNWRhOTY0NGUiIC8+CjxtZXRhIG5hbWU9ImNsY2tkIiBjb250ZW50PSJjZDJhMzVmYWRjZDhlMjA5NWUyNGY3OTE3Y2E5MGMyYiIgLz4KPG1ldGEgbmFtZT0iY2xja2QiIGNvbnRlbnQ9ImNkMmEzNWZhZGNkOGUyMDk1ZTI0Zjc5MTdjYTkwYzJiIiAvPgo8bWV0YSBuYW1lPSJ0d2l0dGVyOmRlc2NyaXB0aW9uIiBjb250ZW50PSJQbGF5IHVuYmwqY2tlZCBnYW1lcyBsaWtlIENyYXp5IENhdHRsZSAzRCBhbmQgRHJpdmVNYWQgb24gR04tTWF0aC4gRmFzdCwgZnJlZSwgbm8gZG93bmxvYWRz77+9cGVyZmVjdCBmb3Igc2Nob29sIG9yIGhvbWUuIj4KPG1ldGEgbmFtZT0ibW9uZXRhZyIgY29udGVudD0iYmI0NGQ5Zjk4YzE5ODhhYTMzYzAyYTM0Y2NjMGVkMWIiPgo8bWV0YSBuYW1lPSJuZXRwdWJfN2ZlNWE3NTIwY2Y0NDhjZjNlMDM1Y2U1MzU4YTU3MmEiIGNvbnRlbnQ9IjdmZTVhNzUyMGNmNDQ4Y2YzZTAzNWNlNTM1OGE1NzJhXzc4YzEyMDE2YjEzN2M1ZjY5MjYxZjUwNjVhZWUzMjU2IiAvPgo8bWV0YSBuYW1lPSJnb29nbGUtYWRzZW5zZS1hY2NvdW50IiBjb250ZW50PSJjYS1wdWItNDIzMTQwMjczMjk0NzgwNCI+CjxsaW5rIHJlbD0iaWNvbiIgdHlwZT0iaW1hZ2UvcG5nIiBocmVmPSJmYXZpY29uLnBuZyI+CjxsaW5rIHJlbD0iaWNvbiIgdHlwZT0iaW1hZ2UvcG5nIiBzaXplcz0iMzJ4MzIiIGhyZWY9ImZhdmljb24ucG5nIj4KPGxpbmsgcmVsPSJhcHBsZS10b3VjaC1pY29uIiBocmVmPSJmYXZpY29uLnBuZyI+CjxsaW5rIHJlbD0ibWFuaWZlc3QiIGhyZWY9Im1hbmlmZXN0Lmpzb24iPgo8bWV0YSBuYW1lPSJ0aGVtZS1jb2xvciIgY29udGVudD0iI2ZjMjY1MSI+CjxzY3JpcHQgYXN5bmM9IiIgc3JjPSJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzP2lkPUctV1g1VlM1NFpEVyI+PC9zY3JpcHQ+CjxzY3JpcHQ+CndpbmRvdy5kYXRhTGF5ZXIgPSB3aW5kb3cuZGF0YUxheWVyIHx8IFtdOwpmdW5jdGlvbiBndGFnKCkgeyBkYXRhTGF5ZXIucHVzaChhcmd1bWVudHMpOyB9Cmd0YWcoJ2pzJywgbmV3IERhdGUoKSk7Cmd0YWcoJ2NvbmZpZycsICdHLVdYNVZTNTRaRFcnKTsKPC9zY3JpcHQ+CjxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9zd2lwZXJAMTEvc3dpcGVyLWJ1bmRsZS5taW4uY3NzIiAvPgo8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVBvcHBpbnM6d2dodEAzMDA7NDAwOzUwMDs2MDA7NzAwOzgwMDs5MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgo8c3R5bGU+Cjpyb290IHsKICAgIC0tcHJpbWFyeTogI2ZjMjY1MTsKICAgIC0tcHJpbWFyeS1ob3ZlcjogI2U5MWU0NzsKICAgIC0tcHJpbWFyeS1saWdodDogcmdiYSgyNTIsIDM4LCA4MSwgMC4xKTsKICAgIC0tYWNjZW50OiAjOGI1Y2Y2OwogICAgLS1iZy1kYXJrZXN0OiAjMDIwNjE3OwogICAgLS1iZy1kYXJrOiAjMGYxNzJhOwogICAgLS1iZy1jYXJkOiAjMWUyOTNiOwogICAgLS1iZy1jYXJkLWhvdmVyOiAjMzM0MTU1OwogICAgLS10ZXh0LW1haW46ICNmOGZhZmM7CiAgICAtLXRleHQtbXV0ZWQ6ICM5NGEzYjg7CiAgICAtLXRleHQtZGltOiAjNjQ3NDhiOwogICAgLS1ib3JkZXI6ICMxZTI5M2I7CiAgICAtLXNoYWRvdy1zbTogMCAxcHggMnB4IDAgcmdiKDAgMCAwIC8gMC4wNSk7CiAgICAtLXNoYWRvdy1tZDogMCA0cHggNnB4IC0xcHggcmdiKDAgMCAwIC8gMC4xKTsKICAgIC0tc2hhZG93LWxnOiAwIDEwcHggMTVweCAtM3B4IHJnYigwIDAgMCAvIDAuMSk7CiAgICAtLXNoYWRvdy1uZW9uOiAwIDAgMjBweCByZ2JhKDI1MiwgMzgsIDgxLCAwLjMpOwogICAgLS1mb250LW1haW46ICdQb3BwaW5zJywgc2Fucy1zZXJpZjsKICAgIC0tcmFkaXVzLXNtOiA2cHg7CiAgICAtLXJhZGl1cy1tZDogMTJweDsKICAgIC0tcmFkaXVzLWxnOiAxNnB4OwogICAgLS10cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogICAgLS1ncmFkaWVudC1wcmltYXJ5OiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmMyNjUxIDAlLCAjZTkxZTQ3IDEwMCUpOwp9Ci5jbGFzc2ljLXRoZW1lIHsKICAgIC0tYmctZGFya2VzdDogIzBhMGEwYTsKICAgIC0tYmctZGFyazogIzEyMTIxMjsKICAgIC0tYmctY2FyZDogIzFhMWExYTsKICAgIC0tYmctY2FyZC1ob3ZlcjogIzI1MjUyNTsKICAgIC0tdGV4dC1tYWluOiAjZTBlMGUwOwogICAgLS10ZXh0LW11dGVkOiAjYTBhMGEwOwogICAgLS10ZXh0LWRpbTogIzcwNzA3MDsKICAgIC0tYm9yZGVyOiAjMmEyYTJhOwp9CkBmb250LWZhY2UgewogICAgZm9udC1mYW1pbHk6ICdtYyc7CiAgICBzcmM6IHVybCgnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL3NlYWxpZWUxMS9nbm1hdGhzdHVmZkBtYWluL21pbmVjcmFmdC5vdGYnKSBmb3JtYXQoJ29wZW50eXBlJyk7CiAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgZm9udC1zdHlsZTogbm9ybWFsOwp9CiogewogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIHNjcm9sbGJhci13aWR0aDogdGhpbjsKICAgIHNjcm9sbGJhci1jb2xvcjogdmFyKC0tYmctY2FyZC1ob3ZlcikgdmFyKC0tYmctZGFya2VzdCk7Cn0KYm9keSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1kYXJrKTsKICAgIGNvbG9yOiB2YXIoLS10ZXh0LW1haW4pOwogICAgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtbWFpbik7CiAgICBtYXJnaW46IDA7CiAgICBwYWRkaW5nOiAwOwogICAgb3ZlcmZsb3cteDogaGlkZGVuOwogICAgbWluLWhlaWdodDogMTAwdmg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKfQo6Oi13ZWJraXQtc2Nyb2xsYmFyIHsKICAgIHdpZHRoOiAxMHB4OwogICAgaGVpZ2h0OiAxMHB4OwogICAgYmFja2dyb3VuZDogdmFyKC0tYmctZGFya2VzdCk7Cn0KOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1jYXJkLWhvdmVyKTsKICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJnLWRhcmtlc3QpOwp9Cjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgewogICAgYmFja2dyb3VuZDogdmFyKC0tdGV4dC1kaW0pOwp9CmhlYWRlciB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTsKICAgIHBvc2l0aW9uOiBzdGlja3k7CiAgICB0b3A6IDA7CiAgICB6LWluZGV4OiAxMDAwOwogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LWxnKTsKICAgIHBhZGRpbmctYm90dG9tOiAwOwp9Ci5oZWFkZXItdXBwZXIgewogICAgbWF4LXdpZHRoOiAxNDAwcHg7CiAgICBtYXJnaW46IDAgYXV0bzsKICAgIHBhZGRpbmc6IDFyZW0gMS41cmVtOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBnYXA6IDJyZW07Cn0KLmxvZ28gewogICAgZm9udC1mYW1pbHk6ICdtYycsIG1vbm9zcGFjZTsKICAgIGZvbnQtc2l6ZTogMi41cmVtOwogICAgY29sb3I6ICNmZmY7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGdhcDogMC41cmVtOwogICAgdGV4dC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7Cn0KLnNlYXJjaC13cmFwcGVyIHsKICAgIGZsZXg6IDE7CiAgICBtYXgtd2lkdGg6IDUwMHB4OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CiNzZWFyY2hCYXIgewogICAgd2lkdGg6IDEwMCU7CiAgICBwYWRkaW5nOiAwLjc1cmVtIDFyZW07CiAgICBwYWRkaW5nLWxlZnQ6IDIuNzVyZW07CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgIGNvbG9yOiAjZmZmOwogICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgICBmb250LXNpemU6IDAuOTVyZW07CiAgICB0cmFuc2l0aW9uOiB2YXIoLS10cmFuc2l0aW9uKTsKICAgIG91dGxpbmU6IG5vbmU7Cn0KI3NlYXJjaEJhcjo6cGxhY2Vob2xkZXIgewogICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsKfQojc2VhcmNoQmFyOmZvY3VzIHsKICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICBjb2xvcjogdmFyKC0tYmctZGFya2VzdCk7CiAgICBib3gtc2hhZG93OiAwIDAgMCA0cHggcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwp9Ci5zZWFyY2gtaWNvbiB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiAxcmVtOwogICAgdG9wOiA1MCU7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7CiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpOwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KI3NlYXJjaEJhcjpmb2N1cyB+IC5zZWFyY2gtaWNvbiB7CiAgICBjb2xvcjogdmFyKC0tYmctZGFya2VzdCk7Cn0KLmhlYWRlci1hY3Rpb25zIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBnYXA6IDAuNzVyZW07CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwp9Ci5idG4taWNvbiB7CiAgICB3aWR0aDogNDJweDsKICAgIGhlaWdodDogNDJweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgIGNvbG9yOiAjZmZmOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgdHJhbnNpdGlvbjogdmFyKC0tdHJhbnNpdGlvbik7Cn0KLmJ0bi1pY29uOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeSk7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7Cn0KLm5hdi1iYXIgewogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpOwogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKfQoubmF2LWNvbnRlbnQgewogICAgbWF4LXdpZHRoOiAxNDAwcHg7CiAgICBtYXJnaW46IDAgYXV0bzsKICAgIHBhZGRpbmc6IDAgMS41cmVtOwogICAgZGlzcGxheTogZmxleDsKICAgIGdhcDogMnJlbTsKICAgIG92ZXJmbG93LXg6IGF1dG87CiAgICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7Cn0KLm5hdi1jb250ZW50Ojotd2Via2l0LXNjcm9sbGJhciB7CiAgICBkaXNwbGF5OiBub25lOwp9Ci5uYXYtbGluayB7CiAgICBwYWRkaW5nOiAxcmVtIDA7CiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpOwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIGZvbnQtc2l6ZTogMC45cmVtOwogICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgIGxldHRlci1zcGFjaW5nOiAwLjA1ZW07CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgdHJhbnNpdGlvbjogdmFyKC0tdHJhbnNpdGlvbik7Cn0KLm5hdi1saW5rOmhvdmVyIHsKICAgIGNvbG9yOiAjZmZmOwp9Ci5uYXYtbGluay5hY3RpdmUgewogICAgY29sb3I6ICNmZmY7Cn0KLm5hdi1saW5rLmFjdGl2ZTo6YWZ0ZXIgewogICAgY29udGVudDogJyc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBib3R0b206IDA7CiAgICBsZWZ0OiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDNweDsKICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICBib3JkZXItcmFkaXVzOiAzcHggM3B4IDAgMDsKfQptYWluIHsKICAgIGZsZXg6IDE7CiAgICB3aWR0aDogMTAwJTsKICAgIG1heC13aWR0aDogMTQwMHB4OwogICAgbWFyZ2luOiAwIGF1dG87CiAgICBwYWRkaW5nOiAycmVtIDEuNXJlbTsKfQouc2VjdGlvbi1oZWFkZXIgewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBtYXJnaW4tYm90dG9tOiAxLjVyZW07CiAgICBtYXJnaW4tdG9wOiAzcmVtOwp9Ci5zZWN0aW9uLXRpdGxlIHsKICAgIGZvbnQtc2l6ZTogMS41cmVtOwogICAgZm9udC13ZWlnaHQ6IDcwMDsKICAgIGNvbG9yOiB2YXIoLS10ZXh0LW1haW4pOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBnYXA6IDAuNzVyZW07Cn0KLnNlY3Rpb24tdGl0bGU6OmJlZm9yZSB7CiAgICBjb250ZW50OiAnJzsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgd2lkdGg6IDZweDsKICAgIGhlaWdodDogMjRweDsKICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpOwogICAgYm9yZGVyLXJhZGl1czogM3B4Owp9CiNzb3J0T3B0aW9ucyB7CiAgICBwYWRkaW5nOiAwLjc1cmVtIDFyZW07CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1jYXJkKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwogICAgY29sb3I6IHZhcigtLXRleHQtbWFpbik7CiAgICBmb250LWZhbWlseTogaW5oZXJpdDsKICAgIGZvbnQtc2l6ZTogMC45cmVtOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgb3V0bGluZTogbm9uZTsKICAgIHRyYW5zaXRpb246IHZhcigtLXRyYW5zaXRpb24pOwp9CiNzb3J0T3B0aW9uczpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1jYXJkLWhvdmVyKTsKICAgIGJvcmRlci1jb2xvcjogdmFyKC0tcHJpbWFyeSk7Cn0KI3NvcnRPcHRpb25zOmZvY3VzIHsKICAgIGJvcmRlci1jb2xvcjogdmFyKC0tcHJpbWFyeSk7CiAgICBib3gtc2hhZG93OiAwIDAgMCAzcHggdmFyKC0tcHJpbWFyeS1saWdodCk7Cn0KLmZlYXR1cmVkLXNsaWRlciB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogNDAwcHg7CiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbGcpOwogICAgb3ZlcmZsb3c6IHZpc2libGU7CiAgICBtYXJnaW4tYm90dG9tOiAzcmVtOwogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LWxnKTsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouc3dpcGVyLmZlYXR1cmVkLXNsaWRlciB7CiAgICBvdmVyZmxvdzogdmlzaWJsZTsKfQouc3dpcGVyLmZlYXR1cmVkLXNsaWRlciAuc3dpcGVyLXdyYXBwZXIgewogICAgb3ZlcmZsb3c6IHZpc2libGU7Cn0KLnN3aXBlci1zbGlkZSB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1jYXJkKTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgd2lkdGg6IDg1JTsKICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1sZyk7Cn0KLnN3aXBlci5mZWF0dXJlZC1zbGlkZXIgLnN3aXBlci1zbGlkZSB7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlOwp9Ci5zd2lwZXIuZmVhdHVyZWQtc2xpZGVyIC5zd2lwZXItc2xpZGUtcHJldiwKLnN3aXBlci5mZWF0dXJlZC1zbGlkZXIgLnN3aXBlci1zbGlkZS1uZXh0IHsKICAgIG9wYWNpdHk6IDAuNDsKICAgIGZpbHRlcjogYmx1cig2cHgpOwogICAgdHJhbnNmb3JtOiBzY2FsZSgwLjg4KTsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwp9Ci5zd2lwZXIuZmVhdHVyZWQtc2xpZGVyIC5zd2lwZXItc2xpZGUtYWN0aXZlIHsKICAgIG9wYWNpdHk6IDE7CiAgICBmaWx0ZXI6IGJsdXIoMCk7CiAgICB0cmFuc2Zvcm06IHNjYWxlKDEpOwogICAgei1pbmRleDogMTA7Cn0KLnNsaWRlLWJnIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGluc2V0OiAwOwogICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsKICAgIGZpbHRlcjogYmx1cigyMHB4KSBicmlnaHRuZXNzKDAuMyk7CiAgICB6LWluZGV4OiAxOwp9Ci5zbGlkZS1jb250ZW50IHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIHotaW5kZXg6IDI7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHZhcigtLWJnLWRhcmtlc3QpIDAlLCByZ2JhKDE1LCAyMywgNDIsIDAuOCkgNTAlLCByZ2JhKDE1LCAyMywgNDIsIDAuNCkgMTAwJSk7Cn0KLnNsaWRlLWltYWdlLXdyYXBwZXIgewogICAgd2lkdGg6IDYwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGNsaXAtcGF0aDogcG9seWdvbigwIDAsIDEwMCUgMCwgOTAlIDEwMCUsIDAlIDEwMCUpOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Cn0KLnNsaWRlLWltYWdlIHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgb2JqZWN0LWZpdDogY29udGFpbjsKICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjVzIGVhc2U7CiAgICBwYWRkaW5nOiAycmVtOwp9Ci5zd2lwZXItc2xpZGU6aG92ZXIgLnNsaWRlLWltYWdlIHsKICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7Cn0KLnNsaWRlLWluZm8gewogICAgd2lkdGg6IDQwJTsKICAgIHBhZGRpbmc6IDNyZW07CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgZ2FwOiAxLjVyZW07Cn0KLmdhbWUtdGl0bGUtaGVybyB7CiAgICBmb250LXNpemU6IDIuNXJlbTsKICAgIGZvbnQtd2VpZ2h0OiA4MDA7CiAgICBsaW5lLWhlaWdodDogMS4xOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZmZiAwJSwgI2NiZDVlMSAxMDAlKTsKICAgIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwogICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50Owp9Ci5nYW1lLW1ldGEgewogICAgZGlzcGxheTogZmxleDsKICAgIGdhcDogMXJlbTsKICAgIGZsZXgtd3JhcDogd3JhcDsKfQoudGFnLWJhZGdlIHsKICAgIHBhZGRpbmc6IDAuMjVyZW0gMC43NXJlbTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIGZvbnQtc2l6ZTogMC43NXJlbTsKICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeSk7CiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwogICAgbGV0dGVyLXNwYWNpbmc6IDAuMDVlbTsKfQouaGVyby1idG4gewogICAgZGlzcGxheTogaW5saW5lLWZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBnYXA6IDAuNXJlbTsKICAgIHBhZGRpbmc6IDFyZW0gMnJlbTsKICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpOwogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXdlaWdodDogNzAwOwogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgIHRyYW5zaXRpb246IHZhcigtLXRyYW5zaXRpb24pOwogICAgYm9yZGVyOiBub25lOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgIGxldHRlci1zcGFjaW5nOiAwLjA1ZW07CiAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0OwogICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDI1MiwgMzgsIDgxLCAwLjQpOwp9Ci5oZXJvLWJ0bjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWhvdmVyKTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsKICAgIGJveC1zaGFkb3c6IDAgOHB4IDI1cHggcmdiYSgyNTIsIDM4LCA4MSwgMC41KTsKfQouZ2FtZS1jYXJkIHsKICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLWNhcmQpOwogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB0cmFuc2l0aW9uOiB2YXIoLS10cmFuc2l0aW9uKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIG9wYWNpdHk6IDA7CiAgICBhbmltYXRpb246IGZhZGVJbkNhcmQgMC40cyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGZvcndhcmRzOwp9CkBrZXlmcmFtZXMgZmFkZUluQ2FyZCB7CiAgICBmcm9tIHsKICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxNXB4KSBzY2FsZSgwLjk4KTsKICAgIH0KICAgIHRvIHsKICAgICAgICBvcGFjaXR5OiAxOwogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKSBzY2FsZSgxKTsKICAgIH0KfQouZ2FtZS1jYXJkOmhvdmVyIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtOHB4KTsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1uZW9uKTsKICAgIGJvcmRlci1jb2xvcjogdmFyKC0tcHJpbWFyeSk7CiAgICB6LWluZGV4OiAxMDsKfQouY2FyZC10aHVtYiB7CiAgICB3aWR0aDogMTAwJTsKICAgIGFzcGVjdC1yYXRpbzogMTsKICAgIG9iamVjdC1maXQ6IGNvdmVyOwogICAgYmFja2dyb3VuZDogdmFyKC0tYmctY2FyZC1ob3Zlcik7Cn0KLnN0YXItaWNvbiB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDhweDsKICAgIHJpZ2h0OiA4cHg7CiAgICBmb250LXNpemU6IDEuNXJlbTsKICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB6LWluZGV4OiAxMDsKICAgIHRleHQtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjUpOwogICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTsKfQouc3Rhci1pY29uOmhvdmVyIHsKICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNik7CiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMik7Cn0KLnN0YXItaWNvbi5zdGFycmVkIHsKICAgIGNvbG9yOiAjZmJiZjI0Owp9Ci5jYXJkLWJvZHkgewogICAgcGFkZGluZzogMXJlbTsKICAgIGZsZXg6IDE7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKfQouY2FyZC10aXRsZSB7CiAgICBmb250LXdlaWdodDogNjAwOwogICAgZm9udC1zaXplOiAxcmVtOwogICAgbWFyZ2luLWJvdHRvbTogMC41cmVtOwogICAgY29sb3I6IHZhcigtLXRleHQtbWFpbik7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwp9Ci5jYXJkLXRhZ3MgewogICAgZm9udC1zaXplOiAwLjc1cmVtOwogICAgY29sb3I6IHZhcigtLXRleHQtZGltKTsKICAgIG1hcmdpbi1ib3R0b206IGF1dG87Cn0KLnN0YXQtcm93IHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZ2FwOiAwLjVyZW07CiAgICBtYXJnaW4tdG9wOiAxcmVtOwogICAgZm9udC1zaXplOiAwLjc1cmVtOwogICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOwp9Ci5zdGF0LWRvdCB7CiAgICB3aWR0aDogNnB4OwogICAgaGVpZ2h0OiA2cHg7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5KTsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKfQouZ3JpZC1sYXlvdXQgewogICAgZGlzcGxheTogZ3JpZDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDIwMHB4LCAxZnIpKTsKICAgIGdhcDogMS41cmVtOwp9Ci5jbGFzc2ljLWdyaWQgewogICAgZGlzcGxheTogZ3JpZDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE2MHB4LCAxZnIpKTsKICAgIGdhcDogMXJlbTsKfQouY2xhc3NpYy1jYXJkIHsKICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zbSk7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1jYXJkKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgICB0cmFuc2l0aW9uOiB2YXIoLS10cmFuc2l0aW9uKTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwp9Ci5jbGFzc2ljLWNhcmQ6aG92ZXIgewogICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1sZyk7CiAgICBib3JkZXItY29sb3I6IHZhcigtLXByaW1hcnkpOwp9Ci5jbGFzc2ljLXRodW1iIHsKICAgIHdpZHRoOiAxMDAlOwogICAgYXNwZWN0LXJhdGlvOiAxOwogICAgb2JqZWN0LWZpdDogY292ZXI7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKfQouY2xhc3NpYy1pbmZvIHsKICAgIHBhZGRpbmc6IDAuNzVyZW07CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLmNsYXNzaWMtdGl0bGUgewogICAgZm9udC1zaXplOiAwLjlyZW07CiAgICBmb250LXdlaWdodDogNjAwOwp9CmZvb3RlciB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1jYXJkKTsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgcGFkZGluZzogNHJlbSAxLjVyZW07CiAgICBtYXJnaW4tdG9wOiBhdXRvOwp9Ci5mb290ZXItY29udGVudCB7CiAgICBtYXgtd2lkdGg6IDE0MDBweDsKICAgIG1hcmdpbjogMCBhdXRvOwogICAgZGlzcGxheTogZ3JpZDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjAwcHgsIDFmcikpOwogICAgZ2FwOiAzcmVtOwp9Ci5mb290ZXItY29sIGgzIHsKICAgIGNvbG9yOiB2YXIoLS10ZXh0LW1haW4pOwogICAgZm9udC1zaXplOiAxLjFyZW07CiAgICBtYXJnaW4tYm90dG9tOiAxLjVyZW07Cn0KLmZvb3Rlci1saW5rcyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGdhcDogMC43NXJlbTsKfQouZm9vdGVyLWxpbmsgewogICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgZm9udC1zaXplOiAwLjlyZW07CiAgICB0cmFuc2l0aW9uOiB2YXIoLS10cmFuc2l0aW9uKTsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQouZm9vdGVyLWxpbms6aG92ZXIgewogICAgY29sb3I6IHZhcigtLXByaW1hcnkpOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDVweCk7Cn0KI3pvbmVWaWV3ZXIgewogICAgcG9zaXRpb246IGZpeGVkOwogICAgaW5zZXQ6IDA7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZyk7CiAgICB6LWluZGV4OiA1MDAwOwogICAgZGlzcGxheTogbm9uZTsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBhbmltYXRpb246IHNsaWRlSW5VcCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7Cn0KQGtleWZyYW1lcyBzbGlkZUluVXAgewogICAgZnJvbSB7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEwMCUpOwogICAgfQogICAgdG8gewogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsKICAgIH0KfQpAa2V5ZnJhbWVzIHNsaWRlT3V0IHsKICAgIGZyb20geyAKICAgICAgICBvcGFjaXR5OiAxOwogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsKICAgICAgICBtYXgtaGVpZ2h0OiAzMDBweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiAxLjVyZW07CiAgICB9CiAgICB0byB7IAogICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDAlKTsKICAgICAgICBtYXgtaGVpZ2h0OiAwOwogICAgICAgIG1hcmdpbi1ib3R0b206IDA7CiAgICAgICAgcGFkZGluZzogMDsKICAgIH0KfQouem9uZS1oZWFkZXIgewogICAgYmFja2dyb3VuZDogdmFyKC0tZ3JhZGllbnQtcHJpbWFyeSk7CiAgICBjb2xvcjogd2hpdGU7CiAgICBwYWRkaW5nOiAxcmVtIDEuNXJlbTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LWxnKTsKICAgIGZsZXgtc2hyaW5rOiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB6LWluZGV4OiA1MDAxOwp9Ci56b25lLXRpdGxlIHsKICAgIGZsZXg6IDE7CiAgICBtaW4td2lkdGg6IDA7Cn0KI3pvbmVOYW1lIHsKICAgIGZvbnQtc2l6ZTogMS4yNXJlbTsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICBtYXJnaW46IDAgMCAwLjI1cmVtOwogICAgbGluZS1oZWlnaHQ6IDEuMzsKfQojem9uZUlkIHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KI3pvbmVBdXRob3IgewogICAgZm9udC1zaXplOiAxNHB4OwogICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7CiAgICBmb250LXdlaWdodDogNTAwOwp9CiN6b25lQXV0aG9yOmhvdmVyIHsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwp9Ci56b25lLWNvbnRyb2xzIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBnYXA6IDAuNzVyZW07Cn0KLnpvbmUtY29udHJvbHMgYnV0dG9uIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKTsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIHBhZGRpbmc6IDAuNjI1cmVtIDFyZW07CiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgZm9udC1zaXplOiAxNHB4OwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7CiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7Cn0KLnpvbmUtY29udHJvbHMgYnV0dG9uOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgIGJvcmRlci1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpOwogICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93KTsKfQouaW5mby1idXR0b24gewogICAgYmFja2dyb3VuZDogbm9uZTsKICAgIGJvcmRlcjogbm9uZTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHBhZGRpbmc6IDA7CiAgICBtYXJnaW4tbGVmdDogMTBweDsKICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgd2lkdGg6IDI0cHg7CiAgICBoZWlnaHQ6IDI0cHg7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnMsIHRyYW5zZm9ybSAwLjJzOwogICAgY29sb3I6IGluaGVyaXQ7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9Ci5pbmZvLWJ1dHRvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7Cn0KLmluZm8tYnV0dG9uOmFjdGl2ZSB7CiAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOTUpOwp9Ci5pbmZvLWJ1dHRvbiBzdmcgewogICAgZGlzcGxheTogYmxvY2s7Cn0KI3pvbmVGcmFtZSB7CiAgICBmbGV4OiAxOwogICAgYm9yZGVyOiBub25lOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kOiAjMDAwOwp9Ci5tb2RhbC1vdmVybGF5IHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIGluc2V0OiAwOwogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjgpOwogICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDhweCk7CiAgICB6LWluZGV4OiA2MDAwOwogICAgZGlzcGxheTogbm9uZTsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIG9wYWNpdHk6IDA7CiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3MgZWFzZTsKfQoubW9kYWwtb3ZlcmxheS5vcGVuIHsKICAgIG9wYWNpdHk6IDE7Cn0KLm1vZGFsIHsKICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLWNhcmQpOwogICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1sZyk7CiAgICB3aWR0aDogMTAwJTsKICAgIG1heC13aWR0aDogNTAwcHg7CiAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctbGcpOwogICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk1KTsKICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2U7Cn0KLm1vZGFsLW92ZXJsYXkub3BlbiAubW9kYWwgewogICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsKfQoubW9kYWwtaGVhZGVyIHsKICAgIHBhZGRpbmc6IDEuNXJlbTsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLm1vZGFsLXRpdGxlIHsKICAgIGZvbnQtc2l6ZTogMS4yNXJlbTsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICBjb2xvcjogdmFyKC0tdGV4dC1tYWluKTsKfQoubW9kYWwtY2xvc2UgewogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICBib3JkZXI6IG5vbmU7CiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7CiAgICBmb250LXNpemU6IDEuNXJlbTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGxpbmUtaGVpZ2h0OiAxOwp9Ci5tb2RhbC1ib2R5IHsKICAgIHBhZGRpbmc6IDEuNXJlbTsKICAgIG1heC1oZWlnaHQ6IDcwdmg7CiAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOwogICAgbGluZS1oZWlnaHQ6IDEuNjsKfQouc2V0dGluZy1yb3cgewogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBwYWRkaW5nOiAxcmVtIDA7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsKfQouc2V0dGluZy1sYWJlbCB7CiAgICBmb250LXdlaWdodDogNTAwOwogICAgY29sb3I6IHZhcigtLXRleHQtbWFpbik7Cn0KLnRvZ2dsZS1zd2l0Y2ggewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgd2lkdGg6IDUwcHg7CiAgICBoZWlnaHQ6IDI2cHg7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1kYXJrZXN0KTsKICAgIGJvcmRlci1yYWRpdXM6IDEzcHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB0cmFuc2l0aW9uOiB2YXIoLS10cmFuc2l0aW9uKTsKfQoudG9nZ2xlLXN3aXRjaDo6YWZ0ZXIgewogICAgY29udGVudDogJyc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDNweDsKICAgIGxlZnQ6IDNweDsKICAgIHdpZHRoOiAyMHB4OwogICAgaGVpZ2h0OiAyMHB4OwogICAgYmFja2dyb3VuZDogI2ZmZjsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgIHRyYW5zaXRpb246IHZhcigtLXRyYW5zaXRpb24pOwp9Ci50b2dnbGUtc3dpdGNoLmFjdGl2ZSB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5KTsKfQoudG9nZ2xlLXN3aXRjaC5hY3RpdmU6OmFmdGVyIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgyNHB4KTsKfQouc2V0dGluZ3MtYnV0dG9uIHsKICAgIHdpZHRoOiAxMDAlOwogICAgcGFkZGluZzogMC44NzVyZW0gMS41cmVtOwogICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7CiAgICBjb2xvcjogI2ZmZjsKICAgIGJvcmRlcjogbm9uZTsKICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tZCk7CiAgICBmb250LXNpemU6IDE1cHg7CiAgICBmb250LXdlaWdodDogNjAwOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgdHJhbnNpdGlvbjogdmFyKC0tdHJhbnNpdGlvbik7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLnNldHRpbmdzLWJ1dHRvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWhvdmVyKTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsKICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1sZyk7Cn0KLnNldHRpbmdzLWJ1dHRvbjphY3RpdmUgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOwp9CkBtZWRpYSAobWF4LXdpZHRoOiAxMDI0cHgpIHsKICAgIC5zbGlkZS1pbWFnZS13cmFwcGVyIHsgCiAgICAgICAgd2lkdGg6IDEwMCU7IAogICAgICAgIGNsaXAtcGF0aDogbm9uZTsgCiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyAKICAgICAgICBpbnNldDogMDsgCiAgICAgICAgb3BhY2l0eTogMC40OyAKICAgIH0KICAgIC5zbGlkZS1pbmZvIHsgCiAgICAgICAgd2lkdGg6IDEwMCU7IAogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsgCiAgICAgICAgei1pbmRleDogNTsgCiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IAogICAgICAgIHRleHQtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC44KTsgCiAgICB9CiAgICAuZ2FtZS10aXRsZS1oZXJvIHsgCiAgICAgICAgYmFja2dyb3VuZDogbm9uZTsgCiAgICAgICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6ICNmZmY7IAogICAgICAgIGNvbG9yOiAjZmZmOyAKICAgIH0KfQpAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsKICAgIC5oZWFkZXItdXBwZXIgeyAKICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyAKICAgICAgICBhbGlnbi1pdGVtczogc3RyZXRjaDsgCiAgICAgICAgZ2FwOiAxcmVtOyAKICAgICAgICBwYWRkaW5nOiAwLjc1cmVtIDFyZW07CiAgICB9CiAgICAuc2VhcmNoLXdyYXBwZXIgeyAKICAgICAgICBtYXgtd2lkdGg6IG5vbmU7IAogICAgfQogICAgLm5hdi1jb250ZW50IHsgCiAgICAgICAgcGFkZGluZzogMCAxcmVtOyAKICAgIH0KICAgIC5zZWN0aW9uLWhlYWRlciB7IAogICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IAogICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OyAKICAgICAgICBnYXA6IDFyZW07IAogICAgfQogICAgLmZlYXR1cmVkLXNsaWRlciB7IAogICAgICAgIGhlaWdodDogMzAwcHg7IAogICAgfQogICAgLmdhbWUtdGl0bGUtaGVybyB7IAogICAgICAgIGZvbnQtc2l6ZTogMS41cmVtOyAKICAgIH0KICAgIC56b25lLWhlYWRlciB7CiAgICAgICAgcGFkZGluZzogMC43NXJlbSAxcmVtOwogICAgICAgIGZsZXgtd3JhcDogd3JhcDsKICAgICAgICBnYXA6IDAuNXJlbTsKICAgIH0KICAgIC56b25lLXRpdGxlIHsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07CiAgICB9CiAgICAuem9uZS1jb250cm9scyB7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIGdhcDogMC41cmVtOwogICAgfQogICAgLnpvbmUtY29udHJvbHMgYnV0dG9uIHsKICAgICAgICBmbGV4OiAxOwogICAgICAgIHBhZGRpbmc6IDAuNXJlbSAwLjVyZW07CiAgICAgICAgZm9udC1zaXplOiAxMXB4OwogICAgICAgIG1pbi13aWR0aDogMDsKICAgIH0KICAgICN6b25lTmFtZSB7CiAgICAgICAgZm9udC1zaXplOiAxcmVtOwogICAgICAgIG1hcmdpbi1ib3R0b206IDAuMXJlbTsKICAgIH0KICAgICN6b25lQXV0aG9yIHsKICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICB9CiAgICAuZ3JpZC1sYXlvdXQgewogICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE1MHB4LCAxZnIpKTsKICAgICAgICBnYXA6IDFyZW07CiAgICB9Cn0KQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7CiAgICAuZmVhdHVyZWQtc2xpZGVyIHsKICAgICAgICBoZWlnaHQ6IDI1MHB4OwogICAgfQogICAgLmdhbWUtdGl0bGUtaGVybyB7CiAgICAgICAgZm9udC1zaXplOiAxLjI1cmVtOwogICAgfQogICAgLnNsaWRlLWluZm8gewogICAgICAgIHBhZGRpbmc6IDEuNXJlbTsKICAgIH0KICAgIC5oZXJvLWJ0biB7CiAgICAgICAgcGFkZGluZzogMC43NXJlbSAxLjVyZW07CiAgICAgICAgZm9udC1zaXplOiAwLjg1cmVtOwogICAgfQogICAgLnpvbmUtY29udHJvbHMgYnV0dG9uIHsKICAgICAgICBmb250LXNpemU6IDEwcHg7CiAgICAgICAgcGFkZGluZzogMC40cmVtIDAuM3JlbTsKICAgIH0KICAgIC5ncmlkLWxheW91dCB7CiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMTMwcHgsIDFmcikpOwogICAgfQp9Ci5oaWRkZW4geyAKICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgCn0KLmhvcml6b250YWwtbGlzdCB7CiAgICBwYWRkaW5nOiAxcmVtIDEuNXJlbSAzcmVtIDEuNXJlbTsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB3aWR0aDogMTAwJTsKICAgIG1heC13aWR0aDogMTQwMHB4OwogICAgbWFyZ2luOiAwIGF1dG87CiAgICBoZWlnaHQ6IDM0MHB4Owp9Ci5ob3Jpem9udGFsLWxpc3Q6OmJlZm9yZSwKLmhvcml6b250YWwtbGlzdDo6YWZ0ZXIgewogICAgY29udGVudDogJyc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICBib3R0b206IDNyZW07CiAgICB3aWR0aDogMTUwcHg7CiAgICB6LWluZGV4OiAxNTsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwp9Ci5ob3Jpem9udGFsLWxpc3Q6OmJlZm9yZSB7CiAgICBsZWZ0OiAwOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCB2YXIoLS1iZy1kYXJrKSwgdHJhbnNwYXJlbnQpOwp9Ci5ob3Jpem9udGFsLWxpc3Q6OmFmdGVyIHsKICAgIHJpZ2h0OiAwOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGxlZnQsIHZhcigtLWJnLWRhcmspLCB0cmFuc3BhcmVudCk7Cn0KLmhvcml6b250YWwtbGlzdCAuc3dpcGVyLXdyYXBwZXIgewogICAgcGFkZGluZzogMDsKICAgIGhlaWdodDogMzAwcHg7Cn0KLmhvcml6b250YWwtbGlzdCAuc3dpcGVyLXNsaWRlIHsKICAgIHdpZHRoOiAyMDBweCAhaW1wb3J0YW50OwogICAgbWluLXdpZHRoOiAyMDBweDsKICAgIG1heC13aWR0aDogMjAwcHg7CiAgICBmbGV4LXNocmluazogMDsKICAgIGhlaWdodDogMzAwcHg7Cn0KLmhvcml6b250YWwtbGlzdCAuZ2FtZS1jYXJkIHsKICAgIHdpZHRoOiAyMDBweCAhaW1wb3J0YW50OwogICAgbWluLXdpZHRoOiAyMDBweDsKICAgIG1heC13aWR0aDogMjAwcHg7CiAgICBoZWlnaHQ6IDEwMCU7Cn0KLmhvcml6b250YWwtbGlzdCAuc3dpcGVyLWJ1dHRvbi1wcmV2LAouaG9yaXpvbnRhbC1saXN0IC5zd2lwZXItYnV0dG9uLW5leHQgewogICAgd2lkdGg6IDUwcHggIWltcG9ydGFudDsKICAgIGhlaWdodDogY2FsYygxMDAlIC0gM3JlbSkgIWltcG9ydGFudDsKICAgIHRvcDogMXJlbSAhaW1wb3J0YW50OwogICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50OwogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgei1pbmRleDogMjA7Cn0KLmhvcml6b250YWwtbGlzdCAuc3dpcGVyLWJ1dHRvbi1uZXh0IHsKICAgIHJpZ2h0OiAwICFpbXBvcnRhbnQ7CiAgICBsZWZ0OiBhdXRvICFpbXBvcnRhbnQ7Cn0KLmhvcml6b250YWwtbGlzdCAuc3dpcGVyLWJ1dHRvbi1wcmV2IHsKICAgIGxlZnQ6IDAgIWltcG9ydGFudDsKICAgIHJpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7Cn0KLnN3aXBlci1idXR0b24tcHJldiwgLnN3aXBlci1idXR0b24tbmV4dCB7CiAgICB3aWR0aDogNTBweCAhaW1wb3J0YW50OwogICAgaGVpZ2h0OiA1MHB4ICFpbXBvcnRhbnQ7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpOwogICAgZmlsdGVyOiBkcm9wLXNoYWRvdygwIDAgOHB4IHJnYmEoMjUyLCAzOCwgODEsIDAuNykpIAogICAgICAgICAgICBkcm9wLXNoYWRvdygwIDAgMTVweCByZ2JhKDI1MiwgMzgsIDgxLCAwLjUpKQogICAgICAgICAgICBkcm9wLXNoYWRvdygwIDAgMjBweCByZ2JhKDI1MiwgMzgsIDgxLCAwLjMpKTsKfQouc3dpcGVyLWJ1dHRvbi1wcmV2OjphZnRlciwgLnN3aXBlci1idXR0b24tbmV4dDo6YWZ0ZXIgewogICAgY29udGVudDogJyc7CiAgICBkaXNwbGF5OiBub25lOwp9Ci5zd2lwZXItYnV0dG9uLW5leHQ6OmJlZm9yZSB7CiAgICBjb250ZW50OiAnJzsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgd2lkdGg6IDM1cHg7CiAgICBoZWlnaHQ6IDM1cHg7CiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgNyA3JyUzRSUzQ3JlY3QgeD0nNCcgeT0nMCcgd2lkdGg9JzEnIGhlaWdodD0nMScgZmlsbD0nJTIzZmZmZmZmJy8lM0UlM0NyZWN0IHg9JzMnIHk9JzEnIHdpZHRoPScyJyBoZWlnaHQ9JzEnIGZpbGw9JyUyM2ZmZmZmZicvJTNFJTNDcmVjdCB4PScyJyB5PScyJyB3aWR0aD0nMycgaGVpZ2h0PScxJyBmaWxsPSclMjNmZmZmZmYnLyUzRSUzQ3JlY3QgeD0nMScgeT0nMycgd2lkdGg9JzQnIGhlaWdodD0nMScgZmlsbD0nJTIzZmZmZmZmJy8lM0UlM0NyZWN0IHg9JzInIHk9JzQnIHdpZHRoPSczJyBoZWlnaHQ9JzEnIGZpbGw9JyUyM2ZmZmZmZicvJTNFJTNDcmVjdCB4PSczJyB5PSc1JyB3aWR0aD0nMicgaGVpZ2h0PScxJyBmaWxsPSclMjNmZmZmZmYnLyUzRSUzQ3JlY3QgeD0nNCcgeT0nNicgd2lkdGg9JzEnIGhlaWdodD0nMScgZmlsbD0nJTIzZmZmZmZmJy8lM0UlM0Mvc3ZnJTNFIik7CiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47CiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogICAgaW1hZ2UtcmVuZGVyaW5nOiBwaXhlbGF0ZWQ7CiAgICBpbWFnZS1yZW5kZXJpbmc6IC1tb3otY3Jpc3AtZWRnZXM7CiAgICBpbWFnZS1yZW5kZXJpbmc6IGNyaXNwLWVkZ2VzOwogICAgdHJhbnNmb3JtOiBzY2FsZVgoLTEpOwp9Ci5zd2lwZXItYnV0dG9uLXByZXY6OmJlZm9yZSB7CiAgICBjb250ZW50OiAnJzsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgd2lkdGg6IDM1cHg7CiAgICBoZWlnaHQ6IDM1cHg7CiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgNyA3JyUzRSUzQ3JlY3QgeD0nMicgeT0nMCcgd2lkdGg9JzEnIGhlaWdodD0nMScgZmlsbD0nJTIzZmZmZmZmJy8lM0UlM0NyZWN0IHg9JzInIHk9JzEnIHdpZHRoPScyJyBoZWlnaHQ9JzEnIGZpbGw9JyUyM2ZmZmZmZicvJTNFJTNDcmVjdCB4PScyJyB5PScyJyB3aWR0aD0nMycgaGVpZ2h0PScxJyBmaWxsPSclMjNmZmZmZmYnLyUzRSUzQ3JlY3QgeD0nMicgeT0nMycgd2lkdGg9JzQnIGhlaWdodD0nMScgZmlsbD0nJTIzZmZmZmZmJy8lM0UlM0NyZWN0IHg9JzInIHk9JzQnIHdpZHRoPSczJyBoZWlnaHQ9JzEnIGZpbGw9JyUyM2ZmZmZmZicvJTNFJTNDcmVjdCB4PScyJyB5PSc1JyB3aWR0aD0nMicgaGVpZ2h0PScxJyBmaWxsPSclMjNmZmZmZmYnLyUzRSUzQ3JlY3QgeD0nMicgeT0nNicgd2lkdGg9JzEnIGhlaWdodD0nMScgZmlsbD0nJTIzZmZmZmZmJy8lM0UlM0Mvc3ZnJTNFIik7CiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47CiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogICAgaW1hZ2UtcmVuZGVyaW5nOiBwaXhlbGF0ZWQ7CiAgICBpbWFnZS1yZW5kZXJpbmc6IC1tb3otY3Jpc3AtZWRnZXM7CiAgICBpbWFnZS1yZW5kZXJpbmc6IGNyaXNwLWVkZ2VzOwogICAgdHJhbnNmb3JtOiBzY2FsZVgoLTEpOwp9Ci5zd2lwZXItYnV0dG9uLXByZXY6aG92ZXIsIC5zd2lwZXItYnV0dG9uLW5leHQ6aG92ZXIgewogICAgZmlsdGVyOiBkcm9wLXNoYWRvdygwIDAgMTVweCByZ2JhKDI1MiwgMzgsIDgxLCAxKSkgCiAgICAgICAgICAgIGRyb3Atc2hhZG93KDAgMCAyNXB4IHJnYmEoMjUyLCAzOCwgODEsIDAuOCkpCiAgICAgICAgICAgIGRyb3Atc2hhZG93KDAgMCAzNXB4IHJnYmEoMjUyLCAzOCwgODEsIDAuNSkpOwogICAgdHJhbnNmb3JtOiBzY2FsZSgxLjAzKTsKfQoKQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgICAuaGVhZGVyLXVwcGVyIHsKICAgICAgICBwYWRkaW5nOiAwLjc1cmVtIDFyZW07CiAgICAgICAgZ2FwOiAxcmVtOwogICAgfQogICAgLmxvZ28gewogICAgICAgIGZvbnQtc2l6ZTogMS43NXJlbTsKICAgIH0KICAgIC5zZWFyY2gtd3JhcHBlciB7CiAgICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICAgIGZsZXg6IDE7CiAgICB9CiAgICAjc2VhcmNoQmFyIHsKICAgICAgICBwYWRkaW5nOiAwLjZyZW0gMC44cmVtOwogICAgICAgIHBhZGRpbmctbGVmdDogMi41cmVtOwogICAgICAgIGZvbnQtc2l6ZTogMC45cmVtOwogICAgfQogICAgLmhlYWRlci1hY3Rpb25zIHsKICAgICAgICBnYXA6IDAuNXJlbTsKICAgIH0KICAgIC5idG4taWNvbiB7CiAgICAgICAgd2lkdGg6IDM2cHg7CiAgICAgICAgaGVpZ2h0OiAzNnB4OwogICAgfQogICAgLmJ0bi1pY29uIHN2ZyB7CiAgICAgICAgd2lkdGg6IDE4cHg7CiAgICAgICAgaGVpZ2h0OiAxOHB4OwogICAgfQogICAgLm5hdi1jb250ZW50IHsKICAgICAgICBnYXA6IDFyZW07CiAgICAgICAgcGFkZGluZzogMCAxcmVtOwogICAgfQogICAgLm5hdi1saW5rIHsKICAgICAgICBmb250LXNpemU6IDAuODVyZW07CiAgICAgICAgcGFkZGluZzogMC43NXJlbSAwOwogICAgfQogICAgLmZlYXR1cmVkLXNsaWRlciB7CiAgICAgICAgaGVpZ2h0OiAzMDBweDsKICAgIH0KICAgIC5zbGlkZS1pbmZvIHsKICAgICAgICBwYWRkaW5nOiAxLjVyZW07CiAgICAgICAgZ2FwOiAxcmVtOwogICAgfQogICAgLmdhbWUtdGl0bGUtaGVybyB7CiAgICAgICAgZm9udC1zaXplOiAxLjVyZW07CiAgICB9CiAgICAuZ2FtZS1kZXNjLWhlcm8gewogICAgICAgIGZvbnQtc2l6ZTogMC44NXJlbTsKICAgIH0KICAgIC5idG4tcGxheS1oZXJvIHsKICAgICAgICBwYWRkaW5nOiAwLjZyZW0gMS41cmVtOwogICAgICAgIGZvbnQtc2l6ZTogMC45cmVtOwogICAgfQogICAgLmdyaWQtbGF5b3V0IHsKICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgxNDBweCwgMWZyKSk7CiAgICAgICAgZ2FwOiAxcmVtOwogICAgfQogICAgLnNlY3Rpb24tdGl0bGUgewogICAgICAgIGZvbnQtc2l6ZTogMS41cmVtOwogICAgfQogICAgLmhvcml6b250YWwtbGlzdCAuc3dpcGVyLXNsaWRlLAogICAgLmhvcml6b250YWwtbGlzdCAuZ2FtZS1jYXJkIHsKICAgICAgICB3aWR0aDogMTYwcHg7CiAgICB9CiAgICAuc3dpcGVyLWJ1dHRvbi1wcmV2LCAuc3dpcGVyLWJ1dHRvbi1uZXh0IHsKICAgICAgICB3aWR0aDogNDBweCAhaW1wb3J0YW50OwogICAgICAgIGhlaWdodDogNDBweCAhaW1wb3J0YW50OwogICAgfQogICAgLnN3aXBlci1idXR0b24tcHJldjo6YWZ0ZXIsIC5zd2lwZXItYnV0dG9uLW5leHQ6OmFmdGVyIHsKICAgICAgICBmb250LXNpemU6IDIycHg7CiAgICB9Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkgewogICAgLmxvZ28gewogICAgICAgIGZvbnQtc2l6ZTogMS41cmVtOwogICAgfQogICAgI3NlYXJjaEJhciB7CiAgICAgICAgZm9udC1zaXplOiAwLjg1cmVtOwogICAgfQogICAgLmZlYXR1cmVkLXNsaWRlciB7CiAgICAgICAgaGVpZ2h0OiAyNTBweDsKICAgIH0KICAgIC5zbGlkZS1pbWFnZS13cmFwcGVyIHsKICAgICAgICB3aWR0aDogNTAlOwogICAgfQogICAgLnNsaWRlLWluZm8gewogICAgICAgIHdpZHRoOiA1MCU7CiAgICAgICAgcGFkZGluZzogMXJlbTsKICAgIH0KICAgIC5nYW1lLXRpdGxlLWhlcm8gewogICAgICAgIGZvbnQtc2l6ZTogMS4ycmVtOwogICAgfQogICAgLmdhbWUtZGVzYy1oZXJvIHsKICAgICAgICBmb250LXNpemU6IDAuOHJlbTsKICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDM7CiAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDsKICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgfQogICAgLmJ0bi1wbGF5LWhlcm8gewogICAgICAgIHBhZGRpbmc6IDAuNXJlbSAxLjJyZW07CiAgICAgICAgZm9udC1zaXplOiAwLjg1cmVtOwogICAgfQogICAgLmdyaWQtbGF5b3V0IHsKICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgxMjBweCwgMWZyKSk7CiAgICAgICAgZ2FwOiAwLjc1cmVtOwogICAgfQogICAgLmhvcml6b250YWwtbGlzdCAuc3dpcGVyLXNsaWRlLAogICAgLmhvcml6b250YWwtbGlzdCAuZ2FtZS1jYXJkIHsKICAgICAgICB3aWR0aDogMTQwcHg7CiAgICB9CiAgICAuY2FyZC10aXRsZSB7CiAgICAgICAgZm9udC1zaXplOiAwLjlyZW07CiAgICB9CiAgICAuY2FyZC10YWdzIHsKICAgICAgICBmb250LXNpemU6IDAuN3JlbTsKICAgIH0KICAgIC5zd2lwZXItYnV0dG9uLXByZXYsIC5zd2lwZXItYnV0dG9uLW5leHQgewogICAgICAgIHdpZHRoOiAzNXB4ICFpbXBvcnRhbnQ7CiAgICAgICAgaGVpZ2h0OiAzNXB4ICFpbXBvcnRhbnQ7CiAgICB9CiAgICAuc3dpcGVyLWJ1dHRvbi1wcmV2OjphZnRlciwgLnN3aXBlci1idXR0b24tbmV4dDo6YWZ0ZXIgewogICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgIH0KfQoKYm9keS5wZXJmb3JtYW5jZS1tb2RlICogewogICAgYW5pbWF0aW9uOiBub25lICFpbXBvcnRhbnQ7CiAgICB0cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7Cn0KYm9keS5wZXJmb3JtYW5jZS1tb2RlIC5nYW1lLWNhcmQgewogICAgb3BhY2l0eTogMSAhaW1wb3J0YW50OwogICAgdHJhbnNmb3JtOiBub25lICFpbXBvcnRhbnQ7Cn0KYm9keS5wZXJmb3JtYW5jZS1tb2RlIC5zd2lwZXItYnV0dG9uLXByZXY6aG92ZXIsCmJvZHkucGVyZm9ybWFuY2UtbW9kZSAuc3dpcGVyLWJ1dHRvbi1uZXh0OmhvdmVyIHsKICAgIHRyYW5zZm9ybTogbm9uZSAhaW1wb3J0YW50Owp9CmJvZHkucGVyZm9ybWFuY2UtbW9kZSAuYnRuLWljb246aG92ZXIgewogICAgdHJhbnNmb3JtOiBub25lICFpbXBvcnRhbnQ7Cn0KYm9keS5wZXJmb3JtYW5jZS1tb2RlIC5nYW1lLWNhcmQ6aG92ZXIgewogICAgdHJhbnNmb3JtOiBub25lICFpbXBvcnRhbnQ7Cn0KCmJvZHkuY2xhc3NpYy10aGVtZSBtYWluIHsKICAgIG1heC13aWR0aDogbm9uZSAhaW1wb3J0YW50Owp9Cgo8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5Pgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+ICh3YXBUYWcuSW5pdCA9IHdpbmRvdy53YXBUYWcuSW5pdCB8fCBbXSkucHVzaChmdW5jdGlvbiAoKSB7IHdBUElUYWcuaW5pdFN0aWNreUJhbm5lcigicHdfNDk3NTMiKTsgfSk7IDwvc2NyaXB0Pgo8aGVhZGVyPgo8ZGl2IGNsYXNzPSJoZWFkZXItdXBwZXIiPgo8ZGl2IGNsYXNzPSJsb2dvIiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKSI+CmduLW1hdGgKPC9kaXY+CjxkaXYgY2xhc3M9InNlYXJjaC13cmFwcGVyIj4KPHN2ZyBjbGFzcz0ic2VhcmNoLWljb24iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTEiIGN5PSIxMSIgcj0iOCIvPjxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIi8+PC9zdmc+CjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoQmFyIiBwbGFjZWhvbGRlcj0iU2VhcmNoIGZvciBnYW1lcy4uLiIgb25pbnB1dD0iaGFuZGxlU2VhcmNoKHRoaXMudmFsdWUpIj4KPC9kaXY+CjxkaXYgY2xhc3M9ImhlYWRlci1hY3Rpb25zIj4KPGJ1dHRvbiBjbGFzcz0iYnRuLWljb24iIG9uY2xpY2s9Imxpc3Rab25lcygpIiB0aXRsZT0iUmVmcmVzaCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0zIDEyYTkgOSAwIDAgMSA5LTkgOS43NSA5Ljc1IDAgMCAxIDYuNzQgMi43NEwyMSA4Ii8+PHBhdGggZD0iTTIxIDN2NWgtNSIvPjxwYXRoIGQ9Ik0yMSAxMmE5IDkgMCAwIDEtOSA5IDkuNzUgOS43NSAwIDAgMS02Ljc0LTIuNzRMMyAxNiIvPjxwYXRoIGQ9Ik04IDE2SDN2NSIvPjwvc3ZnPjwvYnV0dG9uPgo8YnV0dG9uIGNsYXNzPSJidG4taWNvbiIgb25jbGljaz0ib3BlblNldHRpbmdzKCkiIHRpdGxlPSJTZXR0aW5ncyI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xMi4yMiAyaC0uNDRhMiAyIDAgMCAwLTIgMnYuMThhMiAyIDAgMCAxLTEgMS43M2wtLjQzLjI1YTIgMiAwIDAgMS0yIDBsLS4xNS0uMDhhMiAyIDAgMCAwLTIuNzMuNzNsLS4yMi4zOGEyIDIgMCAwIDAgLjczIDIuNzNsLjE1LjFhMiAyIDAgMCAxIDEgMS43MnYuNTFhMiAyIDAgMCAxLTEgMS43NGwtLjE1LjA5YTIgMiAwIDAgMC0uNzMgMi43M2wuMjIuMzhhMiAyIDAgMCAwIDIuNzMuNzNsLjE1LS4wOGEyIDIgMCAwIDEgMiAwbC40My4yNWEyIDIgMCAwIDEgMSAxLjczVjIwYTIgMiAwIDAgMCAyIDJoLjQ0YTIgMiAwIDAgMCAyLTJ2LS4xOGEyIDIgMCAwIDEgMS0xLjczbC40My0uMjVhMiAyIDAgMCAxIDIgMGwuMTUuMDhhMiAyIDAgMCAwIDIuNzMtLjczbC4yMi0uMzhhMiAyIDAgMCAwLS43My0yLjczbC0uMTUtLjFhMiAyIDAgMCAxLTEtMS43MnYtLjUxYTIgMiAwIDAgMSAxLTEuNzRsLjE1LS4wOWEyIDIgMCAwIDAgLjczLTIuNzNsLS4yMi0uMzhhMiAyIDAgMCAwLTIuNzMtLjczbC0uMTUuMDhhMiAyIDAgMCAxLTIgMGwtLjQzLS4yNWEyIDIgMCAwIDEtMS0xLjczVjRhMiAyIDAgMCAwLTItMnoiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIi8+PC9zdmc+PC9idXR0b24+CjwvZGl2Pgo8L2Rpdj4KPGRpdiBjbGFzcz0ibmF2LWJhciI+CjxkaXYgY2xhc3M9Im5hdi1jb250ZW50IiBpZD0ibmF2Q29udGVudCI+CjxkaXYgY2xhc3M9Im5hdi1saW5rIGFjdGl2ZSIgb25jbGljaz0ic3dpdGNoVmlldygnYWxsJykiPkFsbCBHYW1lczwvZGl2Pgo8L2Rpdj4KPC9kaXY+CjwvaGVhZGVyPgo8bWFpbiBpZD0ibWFpbkNvbnRhaW5lciI+CjxkaXYgaWQ9Im1vZGVyblZpZXciPgo8ZGl2IGNsYXNzPSJzd2lwZXIgZmVhdHVyZWQtc2xpZGVyIj4KPGRpdiBjbGFzcz0ic3dpcGVyLXdyYXBwZXIiIGlkPSJoZXJvV3JhcHBlciI+PC9kaXY+CjxkaXYgY2xhc3M9InN3aXBlci1wYWdpbmF0aW9uIj48L2Rpdj4KPGRpdiBjbGFzcz0ic3dpcGVyLWJ1dHRvbi1uZXh0Ij48L2Rpdj4KPGRpdiBjbGFzcz0ic3dpcGVyLWJ1dHRvbi1wcmV2Ij48L2Rpdj4KPC9kaXY+CjxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBtYXJnaW46IDJyZW0gMDsiPgo8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3J0T3B0aW9ucycpLnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnfSkiIHN0eWxlPSJiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTsgYm9yZGVyOiBub25lOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDFyZW0gMnJlbTsgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTsgZm9udC1zaXplOiAxLjFyZW07IGZvbnQtd2VpZ2h0OiA3MDA7IGN1cnNvcjogcG9pbnRlcjsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1uZW9uKTsgdHJhbnNpdGlvbjogdmFyKC0tdHJhbnNpdGlvbik7Ij4KVmlldyBBbGwgR2FtZXMKPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xMiA1djE0TTE5IDEybC03IDctNy03Ii8+PC9zdmc+CjwvYnV0dG9uPgo8L2Rpdj4KPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgo8ZGl2IGNsYXNzPSJzZWN0aW9uLXRpdGxlIj5UcmVuZGluZyBUaGlzIFdlZWs8L2Rpdj4KPC9kaXY+CjxkaXYgY2xhc3M9InN3aXBlciBob3Jpem9udGFsLWxpc3QiIGlkPSJ0cmVuZGluZ1N3aXBlciI+CjxkaXYgY2xhc3M9InN3aXBlci13cmFwcGVyIiBpZD0idHJlbmRpbmdXcmFwcGVyIj48L2Rpdj4KPGRpdiBjbGFzcz0ic3dpcGVyLWJ1dHRvbi1uZXh0Ij48L2Rpdj4KPGRpdiBjbGFzcz0ic3dpcGVyLWJ1dHRvbi1wcmV2Ij48L2Rpdj4KPC9kaXY+CjxkaXYgaWQ9InRhZ1NlY3Rpb25zIj48L2Rpdj4KPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgo8ZGl2IGNsYXNzPSJzZWN0aW9uLXRpdGxlIiBvbmNsaWNrPSJ0b2dnbGVTZWN0aW9uKCdmZWF0dXJlZEdyaWQnLCB0aGlzKSIgc3R5bGU9ImN1cnNvcjogcG9pbnRlcjsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07Ij4KRmVhdHVyZWQgR2FtZXMKPHN2ZyBjbGFzcz0iY29sbGFwc2UtYXJyb3ciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9InRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzOyI+PHBhdGggZD0ibTYgOSA2IDYgNi02Ii8+PC9zdmc+CjwvZGl2Pgo8L2Rpdj4KPGRpdiBjbGFzcz0iZ3JpZC1sYXlvdXQiIGlkPSJmZWF0dXJlZEdyaWQiPjwvZGl2Pgo8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CjxkaXYgY2xhc3M9InNlY3Rpb24tdGl0bGUiIG9uY2xpY2s9InRvZ2dsZVNlY3Rpb24oJ2FsbEdhbWVzR3JpZCcsIHRoaXMpIiBzdHlsZT0iY3Vyc29yOiBwb2ludGVyOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDAuNXJlbTsiPgpBbGwgR2FtZXMKPHN2ZyBjbGFzcz0iY29sbGFwc2UtYXJyb3ciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9InRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzOyI+PHBhdGggZD0ibTYgOSA2IDYgNi02Ii8+PC9zdmc+CjwvZGl2Pgo8c2VsZWN0IGlkPSJzb3J0T3B0aW9ucyIgb25jaGFuZ2U9InNvcnRab25lcygpIj4KPG9wdGlvbiB2YWx1ZT0iaWQiPklEIChEYXRlKTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJuYW1lIj5OYW1lPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9InBvcHVsYXIiPlBvcHVsYXI8L29wdGlvbj4KPC9zZWxlY3Q+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJncmlkLWxheW91dCIgaWQ9ImFsbEdhbWVzR3JpZCI+PC9kaXY+CjwvZGl2Pgo8ZGl2IGlkPSJjbGFzc2ljVmlldyIgY2xhc3M9ImhpZGRlbiI+CjxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KPGRpdiBjbGFzcz0ic2VjdGlvbi10aXRsZSI+QWxsIEdhbWVzPC9kaXY+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJjbGFzc2ljLWdyaWQiIGlkPSJjbGFzc2ljR3JpZCI+PC9kaXY+CjwvZGl2Pgo8ZGl2IGlkPSJzZWFyY2hWaWV3IiBjbGFzcz0iaGlkZGVuIj4KPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgo8ZGl2IGNsYXNzPSJzZWN0aW9uLXRpdGxlIj5TZWFyY2ggUmVzdWx0czwvZGl2Pgo8L2Rpdj4KPGRpdiBjbGFzcz0iZ3JpZC1sYXlvdXQiIGlkPSJzZWFyY2hSZXN1bHRzIj48L2Rpdj4KPC9kaXY+CjwvbWFpbj4KPGZvb3Rlcj4KPGRpdiBjbGFzcz0iZm9vdGVyLWNvbnRlbnQiPgo8ZGl2IGNsYXNzPSJmb290ZXItY29sIj4KPGgzPmduLW1hdGg8L2gzPgo8YnI+PGg2Pm1hZGUgYnkgYnJlYWRiYiB3aXRoIGhlbHAgZnJvbSA8YSBocmVmPSJodHRwczovL3NlYWxpZWUuZGV2Ij5zZWFsaWVlMTwvYT48L2g2Pgo8L2Rpdj4KPGRpdiBjbGFzcz0iZm9vdGVyLWNvbCI+CjxoMz5MZWdhbDwvaDM+CjxkaXYgY2xhc3M9ImZvb3Rlci1saW5rcyI+CjxhIGNsYXNzPSJmb290ZXItbGluayIgb25jbGljaz0ib3BlbkRNQ0EoKSI+RE1DQTwvYT4KPGEgY2xhc3M9ImZvb3Rlci1saW5rIiBvbmNsaWNrPSJvcGVuUHJpdmFjeSgpIj5Qcml2YWN5IFBvbGljeTwvYT4KPC9kaXY+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJmb290ZXItY29sIj4KPGgzPkNvbW11bml0eTwvaDM+CjxkaXYgY2xhc3M9ImZvb3Rlci1saW5rcyI+CjxhIGhyZWY9Imh0dHBzOi8vZGlzY29yZC5nZy9OQUZ3NHlrWjduIiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImZvb3Rlci1saW5rIj5EaXNjb3JkIFNlcnZlcjwvYT4KPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL2duLW1hdGgiIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iZm9vdGVyLWxpbmsiPkdpdEh1YiBSZXBvc2l0b3J5PC9hPgo8YSBjbGFzcz0iZm9vdGVyLWxpbmsiIG9uY2xpY2s9InNob3dDb250YWN0KCkiPkNvbnRhY3QgU3VwcG9ydDwvYT4KPC9kaXY+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJmb290ZXItY29sIj4KPGgzPlRvb2xzPC9oMz4KPGRpdiBjbGFzcz0iZm9vdGVyLWxpbmtzIj4KPGEgY2xhc3M9ImZvb3Rlci1saW5rIiBvbmNsaWNrPSJzYXZlRGF0YSgpIj5FeHBvcnQgU2F2ZSBEYXRhPC9hPgo8YSBjbGFzcz0iZm9vdGVyLWxpbmsiIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnRGaWxlJykuY2xpY2soKSI+SW1wb3J0IFNhdmUgRGF0YTwvYT4KPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnRGaWxlIiBzdHlsZT0iZGlzcGxheTpub25lIiBvbmNoYW5nZT0ibG9hZERhdGEoZXZlbnQpIj4KPC9kaXY+CjwvZGl2Pgo8L2Rpdj4KPC9mb290ZXI+CjxkaXYgaWQ9InpvbmVWaWV3ZXIiPgo8ZGl2IGNsYXNzPSJ6b25lLWhlYWRlciI+CjxkaXYgY2xhc3M9InpvbmUtdGl0bGUiPgo8aDIgaWQ9InpvbmVOYW1lIj56b25lPC9oMj4KPGJ1dHRvbiBjbGFzcz0iaW5mby1idXR0b24iIG9uY2xpY2s9InNob3dab25lSW5mbygpIiB0aXRsZT0iWm9uZSBJbmZvcm1hdGlvbiI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiPjwvY2lyY2xlPgo8bGluZSB4MT0iMTIiIHkxPSIxNiIgeDI9IjEyIiB5Mj0iMTIiPjwvbGluZT4KPGxpbmUgeDE9IjEyIiB5MT0iOCIgeDI9IjEyLjAxIiB5Mj0iOCI+PC9saW5lPgo8L3N2Zz4KPC9idXR0b24+CjxzcGFuIGlkPSJ6b25lSWQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PC9zcGFuPgo8YSBpZD0iem9uZUF1dGhvciIgaHJlZj0iIyIgdGFyZ2V0PSJfYmxhbmsiPmJ5IEF1dGhvcjwvYT4KPC9kaXY+CjxkaXYgY2xhc3M9InpvbmUtY29udHJvbHMiPgo8YnV0dG9uIG9uY2xpY2s9ImZ1bGxzY3JlZW5ab25lKCkiPkZ1bGxzY3JlZW48L2J1dHRvbj4KPGJ1dHRvbiBvbmNsaWNrPSJhYm91dEJsYW5rKCkiPk9wZW4gaW4gTmV3IFRhYjwvYnV0dG9uPgo8YnV0dG9uIG9uY2xpY2s9ImRvd25sb2FkWm9uZSgpIj5Eb3dubG9hZDwvYnV0dG9uPgo8YnV0dG9uIG9uY2xpY2s9ImNsb3NlWm9uZSgpIj5DbG9zZTwvYnV0dG9uPgo8L2Rpdj4KPC9kaXY+CjxpZnJhbWUgaWQ9InpvbmVGcmFtZSI+PC9pZnJhbWU+CjwvZGl2Pgo8ZGl2IGlkPSJtb2RhbE92ZXJsYXkiIGNsYXNzPSJtb2RhbC1vdmVybGF5Ij4KPGRpdiBjbGFzcz0ibW9kYWwiPgo8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIiPgo8aDMgY2xhc3M9Im1vZGFsLXRpdGxlIiBpZD0ibW9kYWxUaXRsZSI+U2V0dGluZ3M8L2gzPgo8YnV0dG9uIGNsYXNzPSJtb2RhbC1jbG9zZSIgb25jbGljaz0iY2xvc2VNb2RhbCgpIj4mdGltZXM7PC9idXR0b24+CjwvZGl2Pgo8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5IiBpZD0ibW9kYWxDb250ZW50Ij48L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9zd2lwZXJAMTEvc3dpcGVyLWJ1bmRsZS5taW4uanMiPjwvc2NyaXB0Pgo8c2NyaXB0Pgpjb25zdCBzY2hvb2xMaXN0ID0gWyJkZWxlZGFvIiwgImdvZ3VhcmRpYW4iLCAibGlnaHRzcGVlZCIsICJsaW5ld2l6ZSIsICJzZWN1cmx5IiwgIi5lZHUvIl07CmZ1bmN0aW9uIGlzQmxvY2tlZERvbWFpbih1cmwpIHsKICAgIHRyeSB7CiAgICAgICAgY29uc3QgZG9tYWluID0gbmV3IFVSTCh1cmwsIGxvY2F0aW9uLm9yaWdpbikuaG9zdG5hbWUgKyAiLyI7CiAgICAgICAgcmV0dXJuIHNjaG9vbExpc3Quc29tZShzY2hvb2wgPT4gZG9tYWluLmluY2x1ZGVzKHNjaG9vbCkpOwogICAgfSBjYXRjaChlKSB7IHJldHVybiBmYWxzZTsgfQp9CmNvbnN0IG9yaWdpbmFsRmV0Y2ggPSB3aW5kb3cuZmV0Y2g7CndpbmRvdy5mZXRjaCA9IGZ1bmN0aW9uKHVybCwgb3B0aW9ucykgewogICAgaWYgKGlzQmxvY2tlZERvbWFpbih1cmwpKSByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJCbG9ja2VkIikpOwogICAgcmV0dXJuIG9yaWdpbmFsRmV0Y2guYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKY29uc3Qgb3JpZ2luYWxPcGVuID0gWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW47ClhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24obWV0aG9kLCB1cmwpIHsKICAgIGlmIChpc0Jsb2NrZWREb21haW4odXJsKSkgcmV0dXJuOwogICAgcmV0dXJuIG9yaWdpbmFsT3Blbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9OwpIVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUudG9EYXRhVVJMID0gZnVuY3Rpb24oLi4uYXJncykgeyByZXR1cm4gIiI7IH07CmNvbnN0IENPTkZJRyA9IHsKICAgIHpvbmVzOiAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2duLW1hdGgvYXNzZXRzQGxhdGVzdC96b25lcy5qc29uIiwKICAgIHRhZ3Nab25lczogImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9zZWFsaWVlMTEvZ25tYXRoc3R1ZmZAbWFpbi96b25lcy5qc29uIiwKICAgIGNvdmVyczogImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9nbi1tYXRoL2NvdmVyc0BtYWluIiwKICAgIGh0bWw6ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9odG1sQG1haW4iLAogICAgc3RhdHM6ICJodHRwczovL2RhdGEuanNkZWxpdnIuY29tL3YxL3N0YXRzL3BhY2thZ2VzL2doL2duLW1hdGgvaHRtbEBtYWluL2ZpbGVzP3BlcmlvZD0iCn07CmxldCBzdGF0ZSA9IHsKICAgIGdhbWVzOiBbXSwKICAgIGhpdHM6IHt9LAogICAgdGhlbWU6ICdtb2Rlcm4nLAogICAgY2F0ZWdvcmllczogW10sCiAgICB0YWdHYW1lczogW10KfTsKYXN5bmMgZnVuY3Rpb24gaW5pdCgpIHsKICAgIGNvbnNvbGUubG9nKCdJbml0IHN0YXJ0aW5nLi4uJyk7CiAgICAKICAgIGxldCB6b25lc1VSTCA9IENPTkZJRy56b25lczsKICAgIGxldCBzaGFyZXNwb25zZTsKICAgIHRyeSB7IAogICAgICAgIHNoYXJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvZ24tbWF0aC9hc3NldHMvY29tbWl0cz90PSIrRGF0ZS5ub3coKSk7IAogICAgfSBjYXRjaCAoZXJyb3IpIHt9CiAgICAKICAgIGlmIChzaGFyZXNwb25zZSAmJiBzaGFyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHNoYWpzb24gPSBhd2FpdCBzaGFyZXNwb25zZS5qc29uKCk7CiAgICAgICAgICAgIGNvbnN0IHNoYSA9IHNoYWpzb25bMF1bJ3NoYSddOwogICAgICAgICAgICBpZiAoc2hhKSB7CiAgICAgICAgICAgICAgICB6b25lc1VSTCA9IGBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9hc3NldHNAJHtzaGF9L3pvbmVzLmpzb25gOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZGFyeXNoYXJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9nbi1tYXRoL3htbC9yZWZzL2hlYWRzL21haW4vc2hhLnR4dD90PSIrRGF0ZS5ub3coKSk7CiAgICAgICAgICAgICAgICBpZiAoc2Vjb25kYXJ5c2hhcmVzcG9uc2UgJiYgc2Vjb25kYXJ5c2hhcmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzaGEgPSAoYXdhaXQgc2Vjb25kYXJ5c2hhcmVzcG9uc2UudGV4dCgpKS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNoYSkgewogICAgICAgICAgICAgICAgICAgICAgICB6b25lc1VSTCA9IGBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ24tbWF0aC9hc3NldHNAJHtzaGF9L3pvbmVzLmpzb25gOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaChlcnJvcikge30KICAgICAgICB9CiAgICB9CiAgICAKICAgIHRyeSB7CiAgICAgICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIHpvbmVzIGZyb206Jywgem9uZXNVUkwpOwogICAgICAgIGNvbnN0IHpvbmVzUmVzID0gYXdhaXQgZmV0Y2goem9uZXNVUkwgKyAiP3Q9IiArIERhdGUubm93KCkpOwogICAgICAgIGNvbnNvbGUubG9nKCdab25lcyByZXNwb25zZTonLCB6b25lc1Jlcy5zdGF0dXMpOwogICAgICAgIHN0YXRlLmdhbWVzID0gYXdhaXQgem9uZXNSZXMuanNvbigpOwogICAgICAgIGNvbnNvbGUubG9nKCdHYW1lcyBsb2FkZWQ6Jywgc3RhdGUuZ2FtZXMubGVuZ3RoKTsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCB0YWdab25lc1JlcyA9IGF3YWl0IGZldGNoKENPTkZJRy50YWdzWm9uZXMgKyAiP3Q9IiArIERhdGUubm93KCkpOwogICAgICAgICAgICBzdGF0ZS50YWdHYW1lcyA9IGF3YWl0IHRhZ1pvbmVzUmVzLmpzb24oKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1RhZyBnYW1lcyBsb2FkZWQ6Jywgc3RhdGUudGFnR2FtZXMubGVuZ3RoKTsKICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvdWxkIG5vdCBsb2FkIHRhZyBnYW1lcywgdXNpbmcgcmVndWxhciBnYW1lcycpOwogICAgICAgICAgICBzdGF0ZS50YWdHYW1lcyA9IHN0YXRlLmdhbWVzOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBzdGF0ZS5nYW1lc1swXS5mZWF0dXJlZCA9IHRydWU7CiAgICAgICAgZXh0cmFjdENhdGVnb3JpZXMoKTsKICAgICAgICByZW5kZXJBcHAoKTsKICAgICAgICBjb25zb2xlLmxvZygnQXBwIHJlbmRlcmVkJyk7CiAgICAgICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTsKICAgICAgICBjb25zdCBpZCA9IHNlYXJjaC5nZXQoJ2lkJyk7CiAgICAgICAgaWYgKGlkKSB7CiAgICAgICAgICAgIGNvbnN0IHpvbmUgPSBzdGF0ZS5nYW1lcy5maW5kKHpvbmUgPT4gem9uZS5pZCArICcnID09IGlkICsgJycpOwogICAgICAgICAgICBpZiAoem9uZSkgewogICAgICAgICAgICAgICAgb3BlbkdhbWUoem9uZS5pZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZmV0Y2hBbGxTdGF0cygnZGF5Jyk7CiAgICAgICAgZmV0Y2hBbGxTdGF0cygnd2VlaycpOwogICAgICAgIGZldGNoQWxsU3RhdHMoJ21vbnRoJyk7CiAgICAgICAgZmV0Y2hBbGxTdGF0cygncXVhcnRlcicpOwogICAgICAgIGZldGNoQWxsU3RhdHMoJ3llYXInKTsKICAgICAgICBnZXRBbGxTdGF0cygpOwogICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkluaXQgZmFpbGVkIiwgZSk7CiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgZGV0YWlsczoiLCBlLm1lc3NhZ2UsIGUuc3RhY2spOwogICAgICAgIGFsZXJ0KCJGYWlsZWQgdG8gbG9hZCBnYW1lcy4gRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOwogICAgfQp9CmFzeW5jIGZ1bmN0aW9uIGZldGNoQWxsU3RhdHMocGVyaW9kKSB7CiAgICBpZiAoIXN0YXRlLmhpdHNbcGVyaW9kXSkgc3RhdGUuaGl0c1twZXJpb2RdID0ge307CiAgICBsZXQgcGFnZSA9IDE7CiAgICBsZXQgaGFzTW9yZSA9IHRydWU7CiAgICB3aGlsZSAoaGFzTW9yZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0NPTkZJRy5zdGF0c30ke3BlcmlvZH0mcGFnZT0ke3BhZ2V9YCk7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOwogICAgICAgICAgICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIGhhc01vcmUgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGYubmFtZS5tYXRjaCgvXC8oXGQrKVwuaHRtbC8pOwogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IG1hdGNoWzFdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmhpdHNbcGVyaW9kXVtpZF0pIHN0YXRlLmhpdHNbcGVyaW9kXVtpZF0gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5oaXRzW3BlcmlvZF1baWRdICs9IGYuaGl0cy50b3RhbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHBhZ2UrKzsKICAgICAgICAgICAgICAgIGlmIChwYWdlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGxheUNvdW50cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBoYXNNb3JlID0gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgdXBkYXRlUGxheUNvdW50cygpOwogICAgaWYgKHBlcmlvZCA9PT0gJ3dlZWsnKSB7CiAgICAgICAgdXBkYXRlVHJlbmRpbmdXZWVrKCk7CiAgICAgICAgdXBkYXRlVGFnU2VjdGlvbnMoKTsKICAgIH0KfQpmdW5jdGlvbiB1cGRhdGVUcmVuZGluZ1dlZWsoKSB7CiAgICBjb25zdCB0cmVuZGluZ1dlZWsgPSBbLi4uc3RhdGUuZ2FtZXNdCiAgICAgICAgLnNvcnQoKGEsYikgPT4gZ2V0U2NvcmUoYiwgJ3dlZWsnKSAtIGdldFNjb3JlKGEsICd3ZWVrJykpCiAgICAgICAgLnNsaWNlKDAsIDE1KTsKICAgIGNvbnN0IGZhdm9yaXRlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Zhdm9yaXRlcycpIHx8ICdbXScpOwogICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJlbmRpbmdXcmFwcGVyJyk7CiAgICBpZiAoZWwpIHsKICAgICAgICBlbC5pbm5lckhUTUwgPSB0cmVuZGluZ1dlZWsubWFwKGcgPT4gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzd2lwZXItc2xpZGUiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ2FtZS1jYXJkIiBvbmNsaWNrPSJldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgb3BlbkdhbWUoJHtnLmlkfSkiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXItaWNvbiAke2Zhdm9yaXRlcy5pbmNsdWRlcyhnLmlkKSA/ICdzdGFycmVkJyA6ICcnfSIgb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IHRvZ2dsZUZhdm9yaXRlKCR7Zy5pZH0pIj7imIU8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHtyZXNvbHZlVXJsKGcuY292ZXIpfSIgY2xhc3M9ImNhcmQtdGh1bWIiIGxvYWRpbmc9ImxhenkiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtdGl0bGUiPiR7Zy5uYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLXRhZ3MiPiR7KGcuc3BlY2lhbCB8fCBbXSkuc2xpY2UoMCwyKS5tYXAodG9UaXRsZUNhc2UpLmpvaW4oJywgJyl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzdGF0LWRvdCI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtmb3JtYXRQbGF5cyhnZXRTY29yZShnLCAnd2VlaycpKX0gUGxheXMKICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgYCkuam9pbignJyk7CiAgICB9Cn0KZnVuY3Rpb24gdXBkYXRlVGFnU2VjdGlvbnMoKSB7CiAgICBjb25zdCB0YWdDb3VudCA9IHN0YXRlLnRhZ0NvdW50IHx8IDA7CiAgICBjb25zdCBmYXZvcml0ZXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmYXZvcml0ZXMnKSB8fCAnW10nKTsKICAgIAogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YWdDb3VudDsgaSsrKSB7CiAgICAgICAgY29uc3Qgd3JhcHBlckVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRhZ1dyYXBwZXIke2l9YCk7CiAgICAgICAgaWYgKHdyYXBwZXJFbCAmJiB3cmFwcGVyRWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjb25zdCBzbGlkZXMgPSB3cmFwcGVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1zbGlkZScpOwogICAgICAgICAgICBzbGlkZXMuZm9yRWFjaChzbGlkZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gc2xpZGUucXVlcnlTZWxlY3RvcignLmdhbWUtY2FyZCcpOwogICAgICAgICAgICAgICAgaWYgKGNhcmQpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGNhcmQuZ2V0QXR0cmlidXRlKCdvbmNsaWNrJykubWF0Y2goL29wZW5HYW1lXCgoXGQrKVwpLyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVJZCA9IHBhcnNlSW50KG1hdGNoWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FtZSA9IHN0YXRlLmdhbWVzLmZpbmQoZyA9PiBnLmlkID09PSBnYW1lSWQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdFJvdyA9IHNsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5zdGF0LXJvdycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRSb3cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0Um93LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InN0YXQtZG90Ij48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Zm9ybWF0UGxheXMoZ2V0U2NvcmUoZ2FtZSwgJ3dlZWsnKSl9IFBsYXlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQp9CmZ1bmN0aW9uIHVwZGF0ZVBsYXlDb3VudHMoKSB7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhdC1yb3cnKS5mb3JFYWNoKGFzeW5jIGVsID0+IHsKICAgICAgICBjb25zdCBjYXJkID0gZWwuY2xvc2VzdCgnW29uY2xpY2tePSJvcGVuR2FtZSJdJyk7CiAgICAgICAgaWYgKGNhcmQpIHsKICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBjYXJkLmdldEF0dHJpYnV0ZSgnb25jbGljaycpLm1hdGNoKC9vcGVuR2FtZVwoKFxkKylcKS8pOwogICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gbWF0Y2hbMV07CiAgICAgICAgICAgICAgICBjb25zdCBwbGF5cyA9IGF3YWl0IGdldFN0YXRzKGlkKTsKICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3RhdC1kb3QiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAke2Zvcm1hdFBsYXlzKHBsYXlzKX0gUGxheXMKICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfQpmdW5jdGlvbiBleHRyYWN0Q2F0ZWdvcmllcygpIHsKICAgIGNvbnN0IGNhdFNldCA9IG5ldyBTZXQoKTsKICAgIHN0YXRlLmdhbWVzLmZvckVhY2goZyA9PiB7CiAgICAgICAgaWYgKGcuc3BlY2lhbCAmJiBBcnJheS5pc0FycmF5KGcuc3BlY2lhbCkpIHsKICAgICAgICAgICAgZy5zcGVjaWFsLmZvckVhY2gocyA9PiBjYXRTZXQuYWRkKHMpKTsKICAgICAgICB9CiAgICB9KTsKICAgIHN0YXRlLmNhdGVnb3JpZXMgPSBBcnJheS5mcm9tKGNhdFNldCkuc29ydCgpOwp9CmZ1bmN0aW9uIGdldFNjb3JlKGdhbWUsIHBlcmlvZCkgewogICAgcmV0dXJuIHN0YXRlLmhpdHNbcGVyaW9kXT8uW2dhbWUuaWRdIHx8IDA7Cn0KZnVuY3Rpb24gZm9ybWF0UGxheXMobnVtKSB7CiAgICBpZiAobnVtID49IDEwMDAwMDApIHsKICAgICAgICByZXR1cm4gKG51bSAvIDEwMDAwMDApLnRvRml4ZWQoMSkgKyAnbSc7CiAgICB9IGVsc2UgaWYgKG51bSA+PSAxMDAwKSB7CiAgICAgICAgcmV0dXJuIChudW0gLyAxMDAwKS50b0ZpeGVkKDEpICsgJ2snOwogICAgfQogICAgcmV0dXJuIG51bS50b1N0cmluZygpOwp9CmZ1bmN0aW9uIHJlc29sdmVVcmwodSkgewogICAgcmV0dXJuIHUucmVwbGFjZSgie0NPVkVSX1VSTH0iLCBDT05GSUcuY292ZXJzKS5yZXBsYWNlKCJ7SFRNTF9VUkx9IiwgQ09ORklHLmh0bWwpOwp9CmZ1bmN0aW9uIHRvVGl0bGVDYXNlKHN0cikgewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cd1xTKi9nLCB0ZXh0ID0+IHRleHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0ZXh0LnN1YnN0cmluZygxKS50b0xvd2VyQ2FzZSgpKTsKfQpmdW5jdGlvbiByZW5kZXJUYWdTZWN0aW9ucygpIHsKICAgIGNvbnNvbGUubG9nKCdyZW5kZXJUYWdTZWN0aW9ucyBjYWxsZWQnKTsKICAgIGNvbnNvbGUubG9nKCdzdGF0ZS50YWdHYW1lczonLCBzdGF0ZS50YWdHYW1lcy5sZW5ndGgpOwogICAgCiAgICBjb25zdCBhbGxUYWdzID0gbmV3IFNldCgpOwogICAgc3RhdGUudGFnR2FtZXMuZm9yRWFjaChnYW1lID0+IHsKICAgICAgICBpZiAoZ2FtZS50YWdzICYmIEFycmF5LmlzQXJyYXkoZ2FtZS50YWdzKSkgewogICAgICAgICAgICBnYW1lLnRhZ3MuZm9yRWFjaCh0YWcgPT4gYWxsVGFncy5hZGQodGFnKSk7CiAgICAgICAgfQogICAgfSk7CiAgICAKICAgIGNvbnNvbGUubG9nKCdhbGxUYWdzIGZvdW5kOicsIEFycmF5LmZyb20oYWxsVGFncykpOwogICAgCiAgICBjb25zdCB0YWdzQXJyYXkgPSBBcnJheS5mcm9tKGFsbFRhZ3MpOwogICAgCiAgICBpZiAodGFnc0FycmF5Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIGNvbnNvbGUubG9nKCdOTyBUQUdTIEZPVU5EIC0gRVhJVElORycpOwogICAgICAgIHJldHVybiAwOwogICAgfQogICAgCiAgICBjb25zdCBzaHVmZmxlZCA9IHRhZ3NBcnJheS5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpOwogICAgY29uc3Qgc2VsZWN0ZWRUYWdzID0gc2h1ZmZsZWQuc2xpY2UoMCwgMyk7CiAgICAKICAgIGNvbnNvbGUubG9nKCdzZWxlY3RlZFRhZ3M6Jywgc2VsZWN0ZWRUYWdzKTsKICAgIAogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhZ1NlY3Rpb25zJyk7CiAgICBjb25zb2xlLmxvZygnY29udGFpbmVyIGVsZW1lbnQ6JywgY29udGFpbmVyKTsKICAgIAogICAgY29udGFpbmVyLmlubmVySFRNTCA9IHNlbGVjdGVkVGFncy5tYXAoKHRhZywgaW5kZXgpID0+IGAKICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGl0bGUiPiR7dGFnfTwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InN3aXBlciBob3Jpem9udGFsLWxpc3QiIGlkPSJ0YWdTd2lwZXIke2luZGV4fSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN3aXBlci13cmFwcGVyIiBpZD0idGFnV3JhcHBlciR7aW5kZXh9Ij48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3dpcGVyLWJ1dHRvbi1uZXh0Ij48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3dpcGVyLWJ1dHRvbi1wcmV2Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIGApLmpvaW4oJycpOwogICAgCiAgICBjb25zb2xlLmxvZygnSFRNTCBpbnNlcnRlZCBpbnRvIGNvbnRhaW5lcicpOwogICAgCiAgICBzZWxlY3RlZFRhZ3MuZm9yRWFjaCgodGFnLCBpbmRleCkgPT4gewogICAgICAgIGNvbnN0IHRhZ0dhbWVzID0gc3RhdGUudGFnR2FtZXMuZmlsdGVyKGcgPT4gCiAgICAgICAgICAgIGcudGFncyAmJiBnLnRhZ3MuaW5jbHVkZXModGFnKQogICAgICAgICkuc2xpY2UoMCwgMTUpOwogICAgICAgIGNvbnNvbGUubG9nKGBUYWcgIiR7dGFnfSIgaGFzICR7dGFnR2FtZXMubGVuZ3RofSBnYW1lc2ApOwogICAgICAgIGlmICh0YWdHYW1lcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXJFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB0YWdXcmFwcGVyJHtpbmRleH1gKTsKICAgICAgICAgICAgY29uc3QgZmF2b3JpdGVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmF2b3JpdGVzJykgfHwgJ1tdJyk7CiAgICAgICAgICAgIHdyYXBwZXJFbC5pbm5lckhUTUwgPSB0YWdHYW1lcy5tYXAoZyA9PiBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzd2lwZXItc2xpZGUiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtY2FyZCIgb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IG9wZW5HYW1lKCR7Zy5pZH0pIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3Rhci1pY29uICR7ZmF2b3JpdGVzLmluY2x1ZGVzKGcuaWQpID8gJ3N0YXJyZWQnIDogJyd9IiBvbmNsaWNrPSJldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgdG9nZ2xlRmF2b3JpdGUoJHtnLmlkfSkiPuKYhTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHtyZXNvbHZlVXJsKGcuY292ZXIpfSIgY2xhc3M9ImNhcmQtdGh1bWIiIGxvYWRpbmc9ImxhenkiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWJvZHkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC10aXRsZSI+JHtnLm5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLXRhZ3MiPiR7KGcudGFncyB8fCBbXSkuc2xpY2UoMCwyKS5qb2luKCcsICcpfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzdGF0LWRvdCI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Zm9ybWF0UGxheXMoZ2V0U2NvcmUoZywgJ3dlZWsnKSl9IFBsYXlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYCkuam9pbignJyk7CiAgICAgICAgfQogICAgfSk7CiAgICAKICAgIGNvbnNvbGUubG9nKCdSZXR1cm5pbmcgdGFnIGNvdW50OicsIHNlbGVjdGVkVGFncy5sZW5ndGgpOwogICAgcmV0dXJuIHNlbGVjdGVkVGFncy5sZW5ndGg7Cn0KZnVuY3Rpb24gcmVuZGVyQXBwKCkgewogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpID09PSAnY2xhc3NpYycpIHsKICAgICAgICB0b2dnbGVUaGVtZSh0cnVlKTsKICAgIH0KICAgIHJlbmRlck5hdkNhdGVnb3JpZXMoKTsKICAgIGNvbnN0IHBvcHVsYXIgPSBzdGF0ZS5nYW1lcy5maWx0ZXIoZyA9PiAKICAgICAgICAoZy5mZWF0dXJlZCB8fCBnLnNwZWNpYWw/LmluY2x1ZGVzKCdwb3B1bGFyJykpICYmIAogICAgICAgICFnLnNwZWNpYWw/LmluY2x1ZGVzKCd0b29scycpCiAgICApOwogICAgY29uc3QgcG9ydHMgPSBzdGF0ZS5nYW1lcy5maWx0ZXIoZyA9PiAKICAgICAgICBnLnNwZWNpYWw/LmluY2x1ZGVzKCdwb3J0JykgJiYgCiAgICAgICAgIWcuc3BlY2lhbD8uaW5jbHVkZXMoJ3Rvb2xzJykKICAgICk7CiAgICBjb25zdCByYW5kb21HYW1lcyA9IFtdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAgICBjb25zdCByYW5kb21HYW1lID0gc3RhdGUuZ2FtZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3RhdGUuZ2FtZXMubGVuZ3RoKV07CiAgICAgICAgaWYgKCFyYW5kb21HYW1lLnNwZWNpYWw/LmluY2x1ZGVzKCd0b29scycpKSB7CiAgICAgICAgICAgIHJhbmRvbUdhbWVzLnB1c2gocmFuZG9tR2FtZSk7CiAgICAgICAgfQogICAgfQogICAgY29uc3QgcG9wdWxhclBpY2sgPSBwb3B1bGFyW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvcHVsYXIubGVuZ3RoKV07CiAgICBjb25zdCBwb3J0UGljayA9IHBvcnRzLmxlbmd0aCA+IDAgPyBwb3J0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3J0cy5sZW5ndGgpXSA6IHBvcHVsYXJbMV07CiAgICBjb25zdCBmZWF0dXJlZCA9IFtwb3B1bGFyUGljaywgLi4ucmFuZG9tR2FtZXMsIHBvcnRQaWNrLCBwb3B1bGFyWzBdXS5maWx0ZXIoQm9vbGVhbikuc2xpY2UoMCwgNSk7CiAgICByZW5kZXJIZXJvKGZlYXR1cmVkKTsKICAgIHJlbmRlclN3aXBlcigndHJlbmRpbmdXcmFwcGVyJywgc3RhdGUuZ2FtZXMuc2xpY2UoMCwgMTUpKTsKICAgIGNvbnN0IHRhZ0NvdW50ID0gcmVuZGVyVGFnU2VjdGlvbnMoKTsKICAgIHN0YXRlLnRhZ0NvdW50ID0gdGFnQ291bnQgfHwgMDsKICAgIGNvbnN0IGZlYXR1cmVkR2FtZXMgPSBzdGF0ZS5nYW1lcy5maWx0ZXIoZyA9PiBnLmZlYXR1cmVkKTsKICAgIHJlbmRlckdyaWQoJ2ZlYXR1cmVkR3JpZCcsIGZlYXR1cmVkR2FtZXMpOwogICAgY29uc3Qgc29ydGVkQWxsR2FtZXMgPSBbLi4uc3RhdGUuZ2FtZXNdLnNvcnQoKGEsIGIpID0+IGEuaWQgLSBiLmlkKTsKICAgIHJlbmRlckdyaWQoJ2FsbEdhbWVzR3JpZCcsIHNvcnRlZEFsbEdhbWVzKTsKICAgIHJlbmRlckNsYXNzaWNHcmlkKCk7CiAgICBpbml0U3dpcGVycygpOwp9CmZ1bmN0aW9uIHJlbmRlck5hdkNhdGVnb3JpZXMoKSB7CiAgICBjb25zdCBuYXZDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdkNvbnRlbnQnKTsKICAgIGNvbnN0IGFsbExpbmsgPSBuYXZDb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtbGluaycpOwogICAgbmF2Q29udGVudC5pbm5lckhUTUwgPSAnJzsKICAgIG5hdkNvbnRlbnQuYXBwZW5kQ2hpbGQoYWxsTGluayk7CiAgICBjb25zdCBmYXZMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBmYXZMaW5rLmNsYXNzTmFtZSA9ICduYXYtbGluayc7CiAgICBmYXZMaW5rLnRleHRDb250ZW50ID0gJ+KtkCBGYXZvcml0ZXMnOwogICAgZmF2TGluay5vbmNsaWNrID0gKCkgPT4gZmlsdGVyRmF2b3JpdGVzKCk7CiAgICBuYXZDb250ZW50LmFwcGVuZENoaWxkKGZhdkxpbmspOwogICAgc3RhdGUuY2F0ZWdvcmllcy5mb3JFYWNoKGNhdCA9PiB7CiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGxpbmsuY2xhc3NOYW1lID0gJ25hdi1saW5rJzsKICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gdG9UaXRsZUNhc2UoY2F0KTsKICAgICAgICBsaW5rLm9uY2xpY2sgPSAoKSA9PiBmaWx0ZXJCeUNhdGVnb3J5KGNhdCk7CiAgICAgICAgbmF2Q29udGVudC5hcHBlbmRDaGlsZChsaW5rKTsKICAgIH0pOwp9CmZ1bmN0aW9uIGZpbHRlckZhdm9yaXRlcygpIHsKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtbGluaycpLmZvckVhY2gobCA9PiBsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoVmlldycpOwogICAgY29uc3QgbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2Rlcm5WaWV3Jyk7CiAgICBjb25zdCBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsYXNzaWNWaWV3Jyk7CiAgICBtLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgYy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgIHMuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQmFyJykudmFsdWUgPSAiIjsKICAgIGNvbnN0IGZhdm9yaXRlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Zhdm9yaXRlcycpIHx8ICdbXScpOwogICAgY29uc3QgaGl0cyA9IHN0YXRlLmdhbWVzLmZpbHRlcihnID0+IGZhdm9yaXRlcy5pbmNsdWRlcyhnLmlkKSk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoUmVzdWx0cycpLmlubmVySFRNTCA9IGhpdHMubWFwKGcgPT4gYAogICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtY2FyZCIgb25jbGljaz0ib3BlbkdhbWUoJHtnLmlkfSkiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGFyLWljb24gc3RhcnJlZCIgb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IHRvZ2dsZUZhdm9yaXRlKCR7Zy5pZH0pIj7imIU8L2Rpdj4KICAgICAgICAgICAgPGltZyBzcmM9IiR7cmVzb2x2ZVVybChnLmNvdmVyKX0iIGNsYXNzPSJjYXJkLXRodW1iIiBsb2FkaW5nPSJsYXp5Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtdGl0bGUiPiR7Zy5uYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC10YWdzIj5GYXZvcml0ZTwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIGApLmpvaW4oJycpOwp9CmZ1bmN0aW9uIHRvZ2dsZUZhdm9yaXRlKGlkKSB7CiAgICBjb25zdCBmYXZvcml0ZXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmYXZvcml0ZXMnKSB8fCAnW10nKTsKICAgIGNvbnN0IGluZGV4ID0gZmF2b3JpdGVzLmluZGV4T2YoaWQpOwogICAgY29uc3Qgc3RhciA9IGV2ZW50LnRhcmdldDsKICAgIAogICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICBmYXZvcml0ZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICBzdGFyLmNsYXNzTGlzdC5yZW1vdmUoJ3N0YXJyZWQnKTsKICAgICAgICAKICAgICAgICBjb25zdCBnYW1lQ2FyZCA9IHN0YXIuY2xvc2VzdCgnLmdhbWUtY2FyZCcpOwogICAgICAgIGlmIChnYW1lQ2FyZCAmJiB3aW5kb3cubG9jYXRpb24uaGFzaCA9PT0gJyNmYXZvcml0ZXMnKSB7CiAgICAgICAgICAgIGdhbWVDYXJkLnN0eWxlLmFuaW1hdGlvbiA9ICdzbGlkZU91dCAwLjRzIGVhc2Utb3V0IGZvcndhcmRzJzsKICAgICAgICAgICAgZ2FtZUNhcmQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJzsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBnYW1lQ2FyZC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGZhdlNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmF2b3JpdGVzU2VjdGlvbicpOwogICAgICAgICAgICAgICAgaWYgKGZhdlNlY3Rpb24gJiYgZmF2b3JpdGVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGZhdlNlY3Rpb24uaW5uZXJIVE1MID0gJzxwIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjp2YXIoLS10ZXh0LW11dGVkKTtwYWRkaW5nOjNyZW0iPk5vIGZhdm9yaXRlcyB5ZXQuIENsaWNrIHRoZSBzdGFyIG9uIGFueSBnYW1lIHRvIGFkZCBpdCBoZXJlITwvcD4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCA0MDApOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgZmF2b3JpdGVzLnB1c2goaWQpOwogICAgICAgIHN0YXIuY2xhc3NMaXN0LmFkZCgnc3RhcnJlZCcpOwogICAgfQogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Zhdm9yaXRlcycsIEpTT04uc3RyaW5naWZ5KGZhdm9yaXRlcykpOwp9CmZ1bmN0aW9uIHJlbmRlckhlcm8oZ2FtZXMpIHsKICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcm9XcmFwcGVyJyk7CiAgICBlbC5pbm5lckhUTUwgPSBnYW1lcy5tYXAoZyA9PiBgCiAgICAgICAgPGRpdiBjbGFzcz0ic3dpcGVyLXNsaWRlIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2xpZGUtYmciIHN0eWxlPSJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7cmVzb2x2ZVVybChnLmNvdmVyKX0nKSI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNsaWRlLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2xpZGUtaW1hZ2Utd3JhcHBlciI+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7cmVzb2x2ZVVybChnLmNvdmVyKX0iIGNsYXNzPSJzbGlkZS1pbWFnZSIgbG9hZGluZz0ibGF6eSI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNsaWRlLWluZm8iPgogICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0iZ2FtZS10aXRsZS1oZXJvIj4ke2cubmFtZX08L2gyPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtbWV0YSI+CiAgICAgICAgICAgICAgICAgICAgICAgICR7KGcuc3BlY2lhbCB8fCBbJ1BvcHVsYXInXSkubWFwKHQgPT4gYDxzcGFuIGNsYXNzPSJ0YWctYmFkZ2UiPiR7dG9UaXRsZUNhc2UodCl9PC9zcGFuPmApLmpvaW4oJycpfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICR7Zy5hdXRob3IgPyBgPHAgc3R5bGU9ImNvbG9yOnZhcigtLXRleHQtbXV0ZWQpOyBsaW5lLWhlaWdodDoxLjY7IGZvbnQtc2l6ZTowLjlyZW07Ij5ieSAke2cuYXV0aG9yfTwvcD5gIDogJyd9CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaGVyby1idG4iIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyBvcGVuR2FtZSgke2cuaWR9KSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNOCA1djE0bDExLTd6Ii8+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIFBsYXkgTm93CiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICBgKS5qb2luKCcnKTsKfQpmdW5jdGlvbiByZW5kZXJTd2lwZXIoaWQsIGdhbWVzKSB7CiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKICAgIGVsLmlubmVySFRNTCA9IGdhbWVzLm1hcChnID0+IGAKICAgICAgICA8ZGl2IGNsYXNzPSJzd2lwZXItc2xpZGUiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJnYW1lLWNhcmQiIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyBvcGVuR2FtZSgke2cuaWR9KSI+CiAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHtyZXNvbHZlVXJsKGcuY292ZXIpfSIgY2xhc3M9ImNhcmQtdGh1bWIiIGxvYWRpbmc9ImxhenkiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLXRpdGxlIj4ke2cubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLXRhZ3MiPiR7KGcuc3BlY2lhbCB8fCBbXSkuc2xpY2UoMCwyKS5tYXAodG9UaXRsZUNhc2UpLmpvaW4oJywgJyl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3RhdC1kb3QiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgLi4uCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICBgKS5qb2luKCcnKTsKICAgIHVwZGF0ZVBsYXlDb3VudHMoKTsKfQpmdW5jdGlvbiByZW5kZXJHcmlkKGlkLCBnYW1lcykgewogICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CiAgICBjb25zdCBmYXZvcml0ZXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmYXZvcml0ZXMnKSB8fCAnW10nKTsKICAgIAogICAgZWwuaW5uZXJIVE1MID0gZ2FtZXMubWFwKChnLCBpbmRleCkgPT4gewogICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5taW4oaW5kZXgsIDIwKSAqIDAuMDM7CiAgICAgICAgcmV0dXJuIGAKICAgICAgICA8ZGl2IGNsYXNzPSJnYW1lLWNhcmQiIG9uY2xpY2s9Im9wZW5HYW1lKCR7Zy5pZH0pIiBzdHlsZT0iYW5pbWF0aW9uLWRlbGF5OiAke2RlbGF5fXMiIGRhdGEtaW5kZXg9IiR7aW5kZXh9Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3Rhci1pY29uICR7ZmF2b3JpdGVzLmluY2x1ZGVzKGcuaWQpID8gJ3N0YXJyZWQnIDogJyd9IiBvbmNsaWNrPSJldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgdG9nZ2xlRmF2b3JpdGUoJHtnLmlkfSkiPuKYhTwvZGl2PgogICAgICAgICAgICA8aW1nIHNyYz0iJHtyZXNvbHZlVXJsKGcuY292ZXIpfSIgY2xhc3M9ImNhcmQtdGh1bWIiIGxvYWRpbmc9ImxhenkiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWJvZHkiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC10aXRsZSI+JHtnLm5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLXRhZ3MiPiR7KGcuc3BlY2lhbCB8fCBbXSkuc2xpY2UoMCwyKS5tYXAodG9UaXRsZUNhc2UpLmpvaW4oJywgJyl9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InN0YXQtZG90Ij48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgLi4uCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICBgfSkuam9pbignJyk7CiAgICAKICAgIGlmIChnYW1lcy5sZW5ndGggPiAyMCkgewogICAgICAgIGNvbnN0IGNhcmRzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLmdhbWUtY2FyZCcpOwogICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7CiAgICAgICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gZW50cnkudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoY2FyZC5kYXRhc2V0LmluZGV4KTsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAyMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXJkLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gJzBzJzsKICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5zdHlsZS5vcGFjaXR5ID0gJzEnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoY2FyZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sIHsgcm9vdE1hcmdpbjogJzEwMHB4JyB9KTsKICAgICAgICAKICAgICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4gewogICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGNhcmQuZGF0YXNldC5pbmRleCk7CiAgICAgICAgICAgIGlmIChpbmRleCA+IDIwKSB7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGNhcmQpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CiAgICAKICAgIHVwZGF0ZVBsYXlDb3VudHMoKTsKfQpmdW5jdGlvbiBzb3J0Wm9uZXMoKSB7CiAgICBjb25zdCBzb3J0QnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29ydE9wdGlvbnMnKS52YWx1ZTsKICAgIGxldCBzb3J0ZWRHYW1lcyA9IFsuLi5zdGF0ZS5nYW1lc107CiAgICBpZiAoc29ydEJ5ID09PSAnbmFtZScpIHsKICAgICAgICBzb3J0ZWRHYW1lcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTsKICAgIH0gZWxzZSBpZiAoc29ydEJ5ID09PSAnaWQnKSB7CiAgICAgICAgc29ydGVkR2FtZXMuc29ydCgoYSwgYikgPT4gYi5pZCAtIGEuaWQpOwogICAgfSBlbHNlIGlmIChzb3J0QnkgPT09ICdwb3B1bGFyJykgewogICAgICAgIHNvcnRlZEdhbWVzLnNvcnQoKGEsIGIpID0+IGdldFNjb3JlKGIsICd5ZWFyJykgLSBnZXRTY29yZShhLCAneWVhcicpKTsKICAgIH0KICAgIHJlbmRlckdyaWQoJ2FsbEdhbWVzR3JpZCcsIHNvcnRlZEdhbWVzKTsKfQpmdW5jdGlvbiByZW5kZXJDbGFzc2ljR3JpZCgpIHsKICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsYXNzaWNHcmlkJyk7CiAgICBlbC5pbm5lckhUTUwgPSBzdGF0ZS5nYW1lcy5tYXAoZyA9PiBgCiAgICAgICAgPGRpdiBjbGFzcz0iY2xhc3NpYy1jYXJkIiBvbmNsaWNrPSJvcGVuR2FtZSgke2cuaWR9KSI+CiAgICAgICAgICAgIDxpbWcgc3JjPSIke3Jlc29sdmVVcmwoZy5jb3Zlcil9IiBjbGFzcz0iY2xhc3NpYy10aHVtYiIgbG9hZGluZz0ibGF6eSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNsYXNzaWMtaW5mbyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjbGFzc2ljLXRpdGxlIj4ke2cubmFtZX08L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICBgKS5qb2luKCcnKTsKfQpsZXQgaGVyb1N3aXBlcjsKbGV0IHRyZW5kaW5nU3dpcGVyOwoKZnVuY3Rpb24gaW5pdFN3aXBlcnMoKSB7CiAgICBpZiAoaGVyb1N3aXBlcikgewogICAgICAgIGhlcm9Td2lwZXIuZGVzdHJveSh0cnVlLCB0cnVlKTsKICAgIH0KICAgIGhlcm9Td2lwZXIgPSBuZXcgU3dpcGVyKCcuZmVhdHVyZWQtc2xpZGVyJywgewogICAgICAgIGxvb3A6IHRydWUsCiAgICAgICAgb2JzZXJ2ZXI6IHRydWUsCiAgICAgICAgb2JzZXJ2ZVBhcmVudHM6IHRydWUsCiAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsCiAgICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLAogICAgICAgIGF1dG9wbGF5OiB7CiAgICAgICAgICAgIGRlbGF5OiA1MDAwLAogICAgICAgICAgICBkaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UKICAgICAgICB9LAogICAgICAgIHBhZ2luYXRpb246IHsKICAgICAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLAogICAgICAgICAgICBjbGlja2FibGU6IHRydWUKICAgICAgICB9LAogICAgICAgIG5hdmlnYXRpb246IHsKICAgICAgICAgICAgbmV4dEVsOiAnLmZlYXR1cmVkLXNsaWRlciAuc3dpcGVyLWJ1dHRvbi1uZXh0JywKICAgICAgICAgICAgcHJldkVsOiAnLmZlYXR1cmVkLXNsaWRlciAuc3dpcGVyLWJ1dHRvbi1wcmV2JwogICAgICAgIH0sCiAgICAgICAgZWZmZWN0OiAnc2xpZGUnLAogICAgICAgIHNwZWVkOiA2MDAKICAgIH0pOwoKICAgIGlmICh0cmVuZGluZ1N3aXBlcikgewogICAgICAgIHRyZW5kaW5nU3dpcGVyLmRlc3Ryb3kodHJ1ZSwgdHJ1ZSk7CiAgICB9CiAgICB0cmVuZGluZ1N3aXBlciA9IG5ldyBTd2lwZXIoJyN0cmVuZGluZ1N3aXBlcicsIHsKICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLAogICAgICAgIHNwYWNlQmV0d2VlbjogMjAsCiAgICAgICAgb2JzZXJ2ZXI6IHRydWUsCiAgICAgICAgb2JzZXJ2ZVBhcmVudHM6IHRydWUsCiAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDEsCiAgICAgICAgc3BlZWQ6IDQwMCwKICAgICAgICByZXNpc3RhbmNlOiB0cnVlLAogICAgICAgIHJlc2lzdGFuY2VSYXRpbzogMCwKICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLAogICAgICAgIG5hdmlnYXRpb246IHsKICAgICAgICAgICAgbmV4dEVsOiAnI3RyZW5kaW5nU3dpcGVyIC5zd2lwZXItYnV0dG9uLW5leHQnLAogICAgICAgICAgICBwcmV2RWw6ICcjdHJlbmRpbmdTd2lwZXIgLnN3aXBlci1idXR0b24tcHJldicKICAgICAgICB9LAogICAgICAgIGJyZWFrcG9pbnRzOiB7CiAgICAgICAgICAgIDY0MDogeyBzbGlkZXNQZXJWaWV3OiAzLCBzbGlkZXNQZXJHcm91cDogMSB9LAogICAgICAgICAgICA3Njg6IHsgc2xpZGVzUGVyVmlldzogNCwgc2xpZGVzUGVyR3JvdXA6IDEgfSwKICAgICAgICAgICAgMTAyNDogeyBzbGlkZXNQZXJWaWV3OiA1LCBzbGlkZXNQZXJHcm91cDogMSB9LAogICAgICAgICAgICAxMjgwOiB7IHNsaWRlc1BlclZpZXc6IDYsIHNsaWRlc1Blckdyb3VwOiAxIH0KICAgICAgICB9CiAgICB9KTsKICAgIAogICAgY29uc3QgdGFnQ291bnQgPSBzdGF0ZS50YWdDb3VudCB8fCAwOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YWdDb3VudDsgaSsrKSB7CiAgICAgICAgY29uc3Qgc3dpcGVyRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgdGFnU3dpcGVyJHtpfWApOwogICAgICAgIGlmIChzd2lwZXJFbCkgewogICAgICAgICAgICBuZXcgU3dpcGVyKGAjdGFnU3dpcGVyJHtpfWAsIHsKICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsCiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwLAogICAgICAgICAgICAgICAgb2JzZXJ2ZXI6IHRydWUsCiAgICAgICAgICAgICAgICBvYnNlcnZlUGFyZW50czogdHJ1ZSwKICAgICAgICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiAxLAogICAgICAgICAgICAgICAgc3BlZWQ6IDQwMCwKICAgICAgICAgICAgICAgIHJlc2lzdGFuY2U6IHRydWUsCiAgICAgICAgICAgICAgICByZXNpc3RhbmNlUmF0aW86IDAsCiAgICAgICAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLAogICAgICAgICAgICAgICAgbmF2aWdhdGlvbjogewogICAgICAgICAgICAgICAgICAgIG5leHRFbDogYCN0YWdTd2lwZXIke2l9IC5zd2lwZXItYnV0dG9uLW5leHRgLAogICAgICAgICAgICAgICAgICAgIHByZXZFbDogYCN0YWdTd2lwZXIke2l9IC5zd2lwZXItYnV0dG9uLXByZXZgCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYnJlYWtwb2ludHM6IHsKICAgICAgICAgICAgICAgICAgICA2NDA6IHsgc2xpZGVzUGVyVmlldzogMywgc2xpZGVzUGVyR3JvdXA6IDEgfSwKICAgICAgICAgICAgICAgICAgICA3Njg6IHsgc2xpZGVzUGVyVmlldzogNCwgc2xpZGVzUGVyR3JvdXA6IDEgfSwKICAgICAgICAgICAgICAgICAgICAxMDI0OiB7IHNsaWRlc1BlclZpZXc6IDUsIHNsaWRlc1Blckdyb3VwOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgMTI4MDogeyBzbGlkZXNQZXJWaWV3OiA2LCBzbGlkZXNQZXJHcm91cDogMSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KfQpmdW5jdGlvbiBoYW5kbGVTZWFyY2gocSkgewogICAgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hWaWV3Jyk7CiAgICBjb25zdCBtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVyblZpZXcnKTsKICAgIGNvbnN0IGMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xhc3NpY1ZpZXcnKTsKICAgIGNvbnN0IHIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoUmVzdWx0cycpOwogICAgaWYgKCFxKSB7CiAgICAgICAgcy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICBpZiAoc3RhdGUudGhlbWUgPT09ICdjbGFzc2ljJykgYy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICBlbHNlIG0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgbS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgIGMuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICBzLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgY29uc3QgZmF2b3JpdGVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmF2b3JpdGVzJykgfHwgJ1tdJyk7CiAgICBjb25zdCBoaXRzID0gc3RhdGUuZ2FtZXMuZmlsdGVyKGcgPT4gZy5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocS50b0xvd2VyQ2FzZSgpKSk7CiAgICByLmlubmVySFRNTCA9IGhpdHMubWFwKGcgPT4gYAogICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtY2FyZCIgb25jbGljaz0ib3BlbkdhbWUoJHtnLmlkfSkiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGFyLWljb24gJHtmYXZvcml0ZXMuaW5jbHVkZXMoZy5pZCkgPyAnc3RhcnJlZCcgOiAnJ30iIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyB0b2dnbGVGYXZvcml0ZSgke2cuaWR9KSI+4piFPC9kaXY+CiAgICAgICAgICAgIDxpbWcgc3JjPSIke3Jlc29sdmVVcmwoZy5jb3Zlcil9IiBjbGFzcz0iY2FyZC10aHVtYiIgbG9hZGluZz0ibGF6eSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLXRpdGxlIj4ke2cubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtdGFncyI+UmVsZXZhbmNlIE1hdGNoPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgYCkuam9pbignJyk7Cn0KZnVuY3Rpb24gc3dpdGNoVmlldyh2KSB7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LWxpbmsnKS5mb3JFYWNoKGwgPT4gbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQmFyJykudmFsdWUgPSAiIjsKICAgIGhhbmRsZVNlYXJjaCgiIik7Cn0KZnVuY3Rpb24gZmlsdGVyQnlDYXRlZ29yeShjYXQpIHsKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtbGluaycpLmZvckVhY2gobCA9PiBsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoVmlldycpOwogICAgY29uc3QgbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2Rlcm5WaWV3Jyk7CiAgICBjb25zdCBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsYXNzaWNWaWV3Jyk7CiAgICBtLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgYy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgIHMuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQmFyJykudmFsdWUgPSAiIjsKICAgIGNvbnN0IGZhdm9yaXRlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Zhdm9yaXRlcycpIHx8ICdbXScpOwogICAgY29uc3QgaGl0cyA9IHN0YXRlLmdhbWVzLmZpbHRlcihnID0+IGcuc3BlY2lhbCAmJiBnLnNwZWNpYWwuaW5jbHVkZXMoY2F0KSk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoUmVzdWx0cycpLmlubmVySFRNTCA9IGhpdHMubWFwKGcgPT4gYAogICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtY2FyZCIgb25jbGljaz0ib3BlbkdhbWUoJHtnLmlkfSkiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGFyLWljb24gJHtmYXZvcml0ZXMuaW5jbHVkZXMoZy5pZCkgPyAnc3RhcnJlZCcgOiAnJ30iIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyB0b2dnbGVGYXZvcml0ZSgke2cuaWR9KSI+4piFPC9kaXY+CiAgICAgICAgICAgIDxpbWcgc3JjPSIke3Jlc29sdmVVcmwoZy5jb3Zlcil9IiBjbGFzcz0iY2FyZC10aHVtYiIgbG9hZGluZz0ibGF6eSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLXRpdGxlIj4ke2cubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtdGFncyI+JHt0b1RpdGxlQ2FzZShjYXQpfTwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIGApLmpvaW4oJycpOwp9CmFzeW5jIGZ1bmN0aW9uIG9wZW5HYW1lKGlkKSB7CiAgICBjb25zdCBnID0gc3RhdGUuZ2FtZXMuZmluZCh4ID0+IHguaWQgPT09IGlkKTsKICAgIGlmICghZykgcmV0dXJuOwogICAgY29uc3Qgc3RhdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyU3RhdHMnKSB8fCAneyJvcGVucyI6IHt9LCAidGltZVN0YXJ0IjogbnVsbH0nKTsKICAgIHN0YXRzLm9wZW5zW2lkXSA9IChzdGF0cy5vcGVuc1tpZF0gfHwgMCkgKyAxOwogICAgc3RhdHMudGltZVN0YXJ0ID0gRGF0ZS5ub3coKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyU3RhdHMnLCBKU09OLnN0cmluZ2lmeShzdGF0cykpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvbmVOYW1lJykudGV4dENvbnRlbnQgPSBnLm5hbWU7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9uZUlkJykudGV4dENvbnRlbnQgPSBpZDsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lQXV0aG9yJykudGV4dENvbnRlbnQgPSAiYnkgIiArIChnLmF1dGhvciB8fCAiVW5rbm93biIpOwogICAgaWYgKGcuYXV0aG9yTGluaykgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lQXV0aG9yJykuaHJlZiA9IGcuYXV0aG9yTGluazsKICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvbmVBdXRob3InKS5ocmVmID0gIiMiOwogICAgfQogICAgY29uc3QgdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lVmlld2VyJyk7CiAgICBjb25zdCBmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvbmVGcmFtZScpOwogICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJyk7CiAgICB2LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICBoZWFkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9vdGVyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIGNvbnN0IHpvbmVIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuem9uZS1oZWFkZXInKTsKICAgIGlmICh6b25lSGVhZGVyKSB7CiAgICAgICAgem9uZUhlYWRlci5zdHlsZS5iYWNrZ3JvdW5kID0gJ2xpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmYzI2NTEgMCUsICNlOTFlNDcgMTAwJSknOwogICAgfQogICAgCiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbik7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnaWQnLCBpZCk7CiAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnJywgdXJsLnRvU3RyaW5nKCkpOwogICAgaWYgKGcudXJsLnN0YXJ0c1dpdGgoJ2h0dHAnKSAmJiAhZy51cmwuaW5jbHVkZXMoJ3snKSkgewogICAgICAgIHdpbmRvdy5vcGVuKGcudXJsLCAnX2JsYW5rJyk7CiAgICAgICAgY2xvc2Vab25lKCk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgdHJ5IHsKICAgICAgICBjb25zdCB1ID0gcmVzb2x2ZVVybChnLnVybCk7CiAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKHUgKyAiP3Q9IiArIERhdGUubm93KCkpOwogICAgICAgIGNvbnN0IGggPSBhd2FpdCByLnRleHQoKTsKICAgICAgICBmLmNvbnRlbnREb2N1bWVudC5vcGVuKCk7CiAgICAgICAgZi5jb250ZW50RG9jdW1lbnQud3JpdGUoaCk7CiAgICAgICAgZi5jb250ZW50RG9jdW1lbnQuY2xvc2UoKTsKICAgIH0gY2F0Y2goZSkgewogICAgICAgIGFsZXJ0KCJMb2FkIGZhaWxlZCIpOwogICAgICAgIGNsb3NlWm9uZSgpOwogICAgfQp9CmZ1bmN0aW9uIGNsb3NlWm9uZSgpIHsKICAgIGNvbnN0IHN0YXRzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlclN0YXRzJykgfHwgJ3sib3BlbnMiOiB7fSwgInRpbWVTdGFydCI6IG51bGwsICJ0b3RhbFRpbWUiOiAwfScpOwogICAgaWYgKHN0YXRzLnRpbWVTdGFydCkgewogICAgICAgIGNvbnN0IHNlc3Npb25UaW1lID0gRGF0ZS5ub3coKSAtIHN0YXRzLnRpbWVTdGFydDsKICAgICAgICBzdGF0cy50b3RhbFRpbWUgPSAoc3RhdHMudG90YWxUaW1lIHx8IDApICsgc2Vzc2lvblRpbWU7CiAgICAgICAgc3RhdHMudGltZVN0YXJ0ID0gbnVsbDsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclN0YXRzJywgSlNPTi5zdHJpbmdpZnkoc3RhdHMpKTsKICAgIH0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lVmlld2VyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6b25lRnJhbWUnKS5zcmMgPSAnJzsKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9vdGVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbik7CiAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZSgnaWQnKTsKICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsICcnLCB1cmwudG9TdHJpbmcoKSk7Cn0KZnVuY3Rpb24gZnVsbHNjcmVlblpvbmUoKSB7CiAgICBjb25zdCBmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvbmVGcmFtZScpOwogICAgaWYgKGYucmVxdWVzdEZ1bGxzY3JlZW4pIGYucmVxdWVzdEZ1bGxzY3JlZW4oKTsKfQpmdW5jdGlvbiBhYm91dEJsYW5rKCkgewogICAgY29uc3QgaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9uZUlkJykudGV4dENvbnRlbnQ7CiAgICBjb25zdCBnID0gc3RhdGUuZ2FtZXMuZmluZCh4ID0+IHguaWQgPT0gaWQpOwogICAgaWYgKCFnKSByZXR1cm47CiAgICBjb25zdCB3ID0gd2luZG93Lm9wZW4oJ2Fib3V0OmJsYW5rJywgJ19ibGFuaycpOwogICAgY29uc3QgdSA9IHJlc29sdmVVcmwoZy51cmwpOwogICAgZmV0Y2godSkudGhlbihyPT5yLnRleHQoKSkudGhlbihoID0+IHsKICAgICAgICBjb25zdCBiYXNlVXJsID0gdS5zdWJzdHJpbmcoMCwgdS5sYXN0SW5kZXhPZignLycpICsgMSk7CiAgICAgICAgY29uc3QgaHRtbFdpdGhCYXNlID0gaC5yZXBsYWNlKCc8aGVhZD4nLCBgPGhlYWQ+PGJhc2UgaHJlZj0iJHtiYXNlVXJsfSI+YCk7CiAgICAgICAgdy5kb2N1bWVudC5vcGVuKCk7CiAgICAgICAgdy5kb2N1bWVudC53cml0ZShodG1sV2l0aEJhc2UpOwogICAgICAgIHcuZG9jdW1lbnQuY2xvc2UoKTsKICAgIH0pOwp9CmZ1bmN0aW9uIGRvd25sb2FkWm9uZSgpIHsKICAgIGNvbnN0IGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvbmVJZCcpLnRleHRDb250ZW50OwogICAgY29uc3QgZyA9IHN0YXRlLmdhbWVzLmZpbmQoeCA9PiB4LmlkID09IGlkKTsKICAgIGNvbnN0IHUgPSByZXNvbHZlVXJsKGcudXJsKTsKICAgIGZldGNoKHUpLnRoZW4ocj0+ci50ZXh0KCkpLnRoZW4odCA9PiB7CiAgICAgICAgY29uc3QgYiA9IG5ldyBCbG9iKFt0XSwge3R5cGU6ICJ0ZXh0L2h0bWwifSk7CiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGIpOwogICAgICAgIGEuZG93bmxvYWQgPSBnLm5hbWUgKyAiLmh0bWwiOwogICAgICAgIGEuY2xpY2soKTsKICAgIH0pOwp9CmZ1bmN0aW9uIG9wZW5Nb2RhbCh0LCBjKSB7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxUaXRsZScpLnRleHRDb250ZW50ID0gdDsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbENvbnRlbnQnKS5pbm5lckhUTUwgPSBjOwogICAgY29uc3QgbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbE92ZXJsYXknKTsKICAgIG8uc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgIHNldFRpbWVvdXQoKCkgPT4gby5jbGFzc0xpc3QuYWRkKCdvcGVuJyksIDEwKTsKfQpmdW5jdGlvbiBjbG9zZU1vZGFsKCkgewogICAgY29uc3QgbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbE92ZXJsYXknKTsKICAgIG8uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpOwogICAgc2V0VGltZW91dCgoKSA9PiBvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScsIDMwMCk7Cn0KZnVuY3Rpb24gb3BlblNldHRpbmdzKCkgewogICAgY29uc3QgaXNDbGFzc2ljID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJykgPT09ICdjbGFzc2ljJzsKICAgIGNvbnN0IHN0YXRzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlclN0YXRzJykgfHwgJ3sib3BlbnMiOiB7fSwgInRvdGFsVGltZSI6IDB9Jyk7CiAgICBjb25zdCB0b3RhbE9wZW5zID0gT2JqZWN0LnZhbHVlcyhzdGF0cy5vcGVucykucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7CiAgICBjb25zdCBtb3N0UGxheWVkSWQgPSBPYmplY3Qua2V5cyhzdGF0cy5vcGVucykucmVkdWNlKChhLCBiKSA9PiBzdGF0cy5vcGVuc1thXSA+IHN0YXRzLm9wZW5zW2JdID8gYSA6IGIsIE9iamVjdC5rZXlzKHN0YXRzLm9wZW5zKVswXSk7CiAgICBjb25zdCBtb3N0UGxheWVkID0gc3RhdGUuZ2FtZXMuZmluZChnID0+IGcuaWQgPT0gbW9zdFBsYXllZElkKTsKICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzdGF0cy50b3RhbFRpbWUgLyAzNjAwMDAwKTsKICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChzdGF0cy50b3RhbFRpbWUgJSAzNjAwMDAwKSAvIDYwMDAwKTsKICAgIGNvbnN0IGNsb2FrU2l0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjbG9ha1NpdGUnKSB8fCAnR29vZ2xlIENsYXNzcm9vbSc7CiAgICBjb25zdCBjbG9ha01ldGhvZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjbG9ha01ldGhvZCcpIHx8ICdhYm91dDpibGFuayc7CiAgICBjb25zdCBhdXRvQ2xvYWsgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0b0Nsb2FrJykgfHwgJ25vbmUnOwogICAgb3Blbk1vZGFsKCJTZXR0aW5ncyIsIGAKICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLXJvdyI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZXR0aW5nLWxhYmVsIj5DbGFzc2ljIFRoZW1lPC9zcGFuPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2dnbGUtc3dpdGNoICR7aXNDbGFzc2ljID8gJ2FjdGl2ZScgOiAnJ30iIG9uY2xpY2s9InRvZ2dsZVRoZW1lKCF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyksIHRoaXMpIj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiAxLjVyZW07IHBhZGRpbmctdG9wOiAxLjVyZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyI+CiAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMXJlbTsgY29sb3I6IHZhcigtLXRleHQtbWFpbik7Ij5UaGVtZSBDdXN0b21pemVyPC9oMz4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2V0dGluZy1yb3ciPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNldHRpbmctbGFiZWwiPlByZXNldCBUaGVtZXM8L3NwYW4+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJ0aGVtZVByZXNldCIgY2xhc3M9InNldHRpbmdzLWJ1dHRvbiIgc3R5bGU9IndpZHRoOiBhdXRvOyIgb25jaGFuZ2U9ImFwcGx5VGhlbWVQcmVzZXQodGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRlZmF1bHQiPkRlZmF1bHQgKFBpbmspPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYmx1ZSI+T2NlYW4gQmx1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InB1cnBsZSI+UHVycGxlIERyZWFtPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZ3JlZW4iPkZvcmVzdCBHcmVlbjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im9yYW5nZSI+U3Vuc2V0IE9yYW5nZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRhcmsiPkRhcmsgTW9kZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLXJvdyI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2V0dGluZy1sYWJlbCI+UHJpbWFyeSBDb2xvcjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjb2xvciIgaWQ9InByaW1hcnlDb2xvciIgdmFsdWU9IiR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3ByaW1hcnlDb2xvcicpIHx8ICcjZmMyNjUxJ30iIG9uY2hhbmdlPSJ1cGRhdGVDdXN0b21Db2xvcigncHJpbWFyeUNvbG9yJywgdGhpcy52YWx1ZSkiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2V0dGluZy1yb3ciPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNldHRpbmctbGFiZWwiPkJhY2tncm91bmQgQ29sb3I8L3NwYW4+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJiZ0NvbG9yIiB2YWx1ZT0iJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmdDb2xvcicpIHx8ICcjMGYxNzJhJ30iIG9uY2hhbmdlPSJ1cGRhdGVDdXN0b21Db2xvcignYmdDb2xvcicsIHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctcm93Ij4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZXR0aW5nLWxhYmVsIj5DYXJkIEJhY2tncm91bmQ8L3NwYW4+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJjYXJkQmdDb2xvciIgdmFsdWU9IiR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcmRCZ0NvbG9yJykgfHwgJyMxZTI5M2InfSIgb25jaGFuZ2U9InVwZGF0ZUN1c3RvbUNvbG9yKCdjYXJkQmdDb2xvcicsIHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctcm93Ij4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZXR0aW5nLWxhYmVsIj5UZXh0IENvbG9yPC9zcGFuPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBpZD0idGV4dENvbG9yIiB2YWx1ZT0iJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGV4dENvbG9yJykgfHwgJyNmZmZmZmYnfSIgb25jaGFuZ2U9InVwZGF0ZUN1c3RvbUNvbG9yKCd0ZXh0Q29sb3InLCB0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLXJvdyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZXR0aW5ncy1idXR0b24iIG9uY2xpY2s9InJlc2V0Q3VzdG9tQ29sb3JzKCkiPlJlc2V0IENvbG9yczwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMXJlbTsiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNldHRpbmctbGFiZWwiIHN0eWxlPSJkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206MC41cmVtIj5DdXN0b20gQ1NTIChBZHZhbmNlZCk8L3NwYW4+CiAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImN1c3RvbUNTUyIgcGxhY2Vob2xkZXI9IkVudGVyIGN1c3RvbSBDU1MuLi4iIHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDBweDtwYWRkaW5nOjAuNXJlbTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMtc20pO2JhY2tncm91bmQ6dmFyKC0tYmctY2FyZCk7Y29sb3I6dmFyKC0tdGV4dC1tYWluKTtmb250LWZhbWlseTptb25vc3BhY2U7Zm9udC1zaXplOjEycHg7cmVzaXplOnZlcnRpY2FsIj4ke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXN0b21DU1MnKSB8fCAnJ308L3RleHRhcmVhPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2V0dGluZ3MtYnV0dG9uIiBzdHlsZT0ibWFyZ2luLXRvcDowLjVyZW0iIG9uY2xpY2s9ImFwcGx5Q3VzdG9tQ1NTKCkiPkFwcGx5IEN1c3RvbSBDU1M8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic2V0dGluZy1yb3ciPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2V0dGluZy1sYWJlbCI+VGFiIENsb2FrPC9zcGFuPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZXR0aW5ncy1idXR0b24iIG9uY2xpY2s9InRhYkNsb2FrKCkiPkNvbmZpZ3VyZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDEuNXJlbTsgcGFkZGluZy10b3A6IDEuNXJlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ij4KICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxcmVtOyBjb2xvcjogdmFyKC0tdGV4dC1tYWluKTsiPkNsb2FrIE1ldGhvZHM8L2gzPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLXJvdyI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2V0dGluZy1sYWJlbCI+Q2xvYWsgU2l0ZTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImNsb2FrU2l0ZVNlbGVjdCIgY2xhc3M9InNldHRpbmdzLWJ1dHRvbiIgc3R5bGU9IndpZHRoOiBhdXRvOyIgb25jaGFuZ2U9ImxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjbG9ha1NpdGUnLCB0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAke2Nsb2FrU2l0ZSA9PT0gJ0dvb2dsZSBDbGFzc3Jvb20nID8gJ3NlbGVjdGVkJyA6ICcnfT5Hb29nbGUgQ2xhc3Nyb29tPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAke2Nsb2FrU2l0ZSA9PT0gJ0NsZXZlcicgPyAnc2VsZWN0ZWQnIDogJyd9PkNsZXZlcjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gJHtjbG9ha1NpdGUgPT09ICdFZHB1enpsZScgPyAnc2VsZWN0ZWQnIDogJyd9PkVkcHV6emxlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAke2Nsb2FrU2l0ZSA9PT0gJ0lYTCcgPyAnc2VsZWN0ZWQnIDogJyd9PklYTDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gJHtjbG9ha1NpdGUgPT09ICdHbWFpbCcgPyAnc2VsZWN0ZWQnIDogJyd9PkdtYWlsPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAke2Nsb2FrU2l0ZSA9PT0gJ0dvb2dsZSBEb2NzJyA/ICdzZWxlY3RlZCcgOiAnJ30+R29vZ2xlIERvY3M8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICR7Y2xvYWtTaXRlID09PSAnR29vZ2xlIFNsaWRlcycgPyAnc2VsZWN0ZWQnIDogJyd9Pkdvb2dsZSBTbGlkZXM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICR7Y2xvYWtTaXRlID09PSAnS2hhbiBBY2FkZW15JyA/ICdzZWxlY3RlZCcgOiAnJ30+S2hhbiBBY2FkZW15PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAke2Nsb2FrU2l0ZSA9PT0gJ0N1c3RvbScgPyAnc2VsZWN0ZWQnIDogJyd9PkN1c3RvbTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLXJvdyIgaWQ9ImN1c3RvbUNsb2FrUm93IiBzdHlsZT0iZGlzcGxheTogJHtjbG9ha1NpdGUgPT09ICdDdXN0b20nID8gJ2ZsZXgnIDogJ25vbmUnfTsiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNldHRpbmctbGFiZWwiPkN1c3RvbSBUaXRsZTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY3VzdG9tQ2xvYWtUaXRsZSIgcGxhY2Vob2xkZXI9IkVudGVyIGN1c3RvbSB0aXRsZSIgc3R5bGU9InBhZGRpbmc6IDAuNXJlbTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXNtKTsgYmFja2dyb3VuZDogdmFyKC0tYmctY2FyZCk7IGNvbG9yOiB2YXIoLS10ZXh0LW1haW4pOyIgdmFsdWU9IiR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1c3RvbUNsb2FrVGl0bGUnKSB8fCAnJ30iIG9uY2hhbmdlPSJsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VzdG9tQ2xvYWtUaXRsZScsIHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctcm93IiBpZD0iY3VzdG9tQ2xvYWtGYXZpY29uUm93IiBzdHlsZT0iZGlzcGxheTogJHtjbG9ha1NpdGUgPT09ICdDdXN0b20nID8gJ2ZsZXgnIDogJ25vbmUnfTsiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNldHRpbmctbGFiZWwiPkN1c3RvbSBGYXZpY29uIFVSTDwvc3Bhbj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY3VzdG9tQ2xvYWtGYXZpY29uIiBwbGFjZWhvbGRlcj0iaHR0cHM6Ly9leGFtcGxlLmNvbS9mYXZpY29uLmljbyIgc3R5bGU9InBhZGRpbmc6IDAuNXJlbTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXNtKTsgYmFja2dyb3VuZDogdmFyKC0tYmctY2FyZCk7IGNvbG9yOiB2YXIoLS10ZXh0LW1haW4pOyIgdmFsdWU9IiR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1c3RvbUNsb2FrRmF2aWNvbicpIHx8ICcnfSIgb25jaGFuZ2U9ImxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXN0b21DbG9ha0Zhdmljb24nLCB0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLXJvdyI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2V0dGluZy1sYWJlbCI+Q2xvYWsgTWV0aG9kPC9zcGFuPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAwLjVyZW07IGZsZXgtd3JhcDogd3JhcDsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImNsb2FrTWV0aG9kIiB2YWx1ZT0iYWJvdXQ6YmxhbmsiICR7Y2xvYWtNZXRob2QgPT09ICdhYm91dDpibGFuaycgPyAnY2hlY2tlZCcgOiAnJ30gb25jaGFuZ2U9ImxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjbG9ha01ldGhvZCcsIHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICAgICAgYWJvdXQ6YmxhbmsKICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAwLjVyZW07IGN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImNsb2FrTWV0aG9kIiB2YWx1ZT0iYmxvYjpudWxsIiAke2Nsb2FrTWV0aG9kID09PSAnYmxvYjpudWxsJyA/ICdjaGVja2VkJyA6ICcnfSBvbmNoYW5nZT0ibG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Nsb2FrTWV0aG9kJywgdGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgICAgICBibG9iOm51bGwKICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLXJvdyI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2V0dGluZy1sYWJlbCI+T3BlbiBpbiBDbG9hazwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNldHRpbmdzLWJ1dHRvbiIgb25jbGljaz0ib3BlbkluQ2xvYWsoKSI+T3BlbiBOb3c8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctcm93Ij4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZXR0aW5nLWxhYmVsIj5BdXRvIENsb2FrPC9zcGFuPgogICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz0ic2V0dGluZ3MtYnV0dG9uIiBzdHlsZT0id2lkdGg6IGF1dG87IiBvbmNoYW5nZT0ibG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F1dG9DbG9haycsIHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJub25lIiAke2F1dG9DbG9hayA9PT0gJ25vbmUnID8gJ3NlbGVjdGVkJyA6ICcnfT5EaXNhYmxlZDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImFib3V0OmJsYW5rIiAke2F1dG9DbG9hayA9PT0gJ2Fib3V0OmJsYW5rJyA/ICdzZWxlY3RlZCcgOiAnJ30+YWJvdXQ6Ymxhbms8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJibG9iOm51bGwiICR7YXV0b0Nsb2FrID09PSAnYmxvYjpudWxsJyA/ICdzZWxlY3RlZCcgOiAnJ30+YmxvYjpudWxsPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMS41cmVtOyBwYWRkaW5nLXRvcDogMS41cmVtOyBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsiPgogICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206IDFyZW07IGNvbG9yOiB2YXIoLS10ZXh0LW1haW4pOyI+QWRkaXRpb25hbCBTZXR0aW5nczwvaDM+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctcm93Ij4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZXR0aW5nLWxhYmVsIj5QZXJmb3JtYW5jZSBNb2RlPC9zcGFuPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9nZ2xlLXN3aXRjaCAke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJmb3JtYW5jZU1vZGUnKSA9PT0gJ3RydWUnID8gJ2FjdGl2ZScgOiAnJ30iIG9uY2xpY2s9InRvZ2dsZVBlcmZvcm1hbmNlTW9kZSh0aGlzKSI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLXJvdyI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2V0dGluZy1sYWJlbCI+Q2xvc2UgUHJldmVudGlvbiBQb3B1cDwvc3Bhbj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZ2dsZS1zd2l0Y2ggJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2xvc2VQcmV2ZW50aW9uRW5hYmxlZCcpICE9PSAnZmFsc2UnID8gJ2FjdGl2ZScgOiAnJ30iIG9uY2xpY2s9InRvZ2dsZUNsb3NlUHJldmVudGlvbih0aGlzKSI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLXJvdyI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2V0dGluZy1sYWJlbCI+R2FtZSBDYXJkIFNpemU8L3NwYW4+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPSJzZXR0aW5ncy1idXR0b24iIHN0eWxlPSJ3aWR0aDogYXV0bzsiIG9uY2hhbmdlPSJzZXRHYW1lU2l6ZSh0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idGlueSIgJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZVNpemUnKSA9PT0gJ3RpbnknID8gJ3NlbGVjdGVkJyA6ICcnfT5UaW55ICg1MHB4KTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InNtYWxsIiAke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lU2l6ZScpID09PSAnc21hbGwnID8gJ3NlbGVjdGVkJyA6ICcnfT5TbWFsbCAoMTAwcHgpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibWVkaXVtIiAke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lU2l6ZScpID09PSAnbWVkaXVtJyA/ICdzZWxlY3RlZCcgOiAnJ30+TWVkaXVtICgxNTBweCk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkZWZhdWx0IiAkeyFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZVNpemUnKSB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZVNpemUnKSA9PT0gJ2RlZmF1bHQnID8gJ3NlbGVjdGVkJyA6ICcnfT5EZWZhdWx0ICgyMDBweCk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsYXJnZSIgJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZVNpemUnKSA9PT0gJ2xhcmdlJyA/ICdzZWxlY3RlZCcgOiAnJ30+TGFyZ2UgKDI1MHB4KTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InhsYXJnZSIgJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZVNpemUnKSA9PT0gJ3hsYXJnZScgPyAnc2VsZWN0ZWQnIDogJyd9PkV4dHJhIExhcmdlICgzMDBweCk8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiAxLjVyZW07IHBhZGRpbmctdG9wOiAxLjVyZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctcm93Ij4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZXR0aW5nLWxhYmVsIj5FeHBvcnQgU2F2ZSBEYXRhPC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2V0dGluZ3MtYnV0dG9uIiBvbmNsaWNrPSJzYXZlRGF0YSgpIj5FeHBvcnQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctcm93Ij4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZXR0aW5nLWxhYmVsIj5JbXBvcnQgU2F2ZSBEYXRhPC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2V0dGluZ3MtYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0RmlsZScpLmNsaWNrKCkiPkltcG9ydDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiAycmVtOyBwYWRkaW5nLXRvcDogMnJlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ij4KICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxcmVtOyBjb2xvcjogdmFyKC0tdGV4dC1tYWluKTsiPllvdXIgU3RhdHM8L2gzPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IGxpbmUtaGVpZ2h0OiAyOyI+CiAgICAgICAgICAgICAgICA8ZGl2PjxzdHJvbmc+VG90YWwgR2FtZXMgUGxheWVkOjwvc3Ryb25nPiAke3RvdGFsT3BlbnN9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PjxzdHJvbmc+TW9zdCBQbGF5ZWQ6PC9zdHJvbmc+ICR7bW9zdFBsYXllZCA/IG1vc3RQbGF5ZWQubmFtZSA6ICdOb25lJ30gKCR7c3RhdHMub3BlbnNbbW9zdFBsYXllZElkXSB8fCAwfSB0aW1lcyk8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5UaW1lIG9uIFNpdGU6PC9zdHJvbmc+ICR7aG91cnN9aCAke21pbnV0ZXN9bTwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIGApOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb2FrU2l0ZVNlbGVjdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7CiAgICAgICAgY29uc3QgaXNDdXN0b20gPSBlLnRhcmdldC52YWx1ZSA9PT0gJ0N1c3RvbSc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbUNsb2FrUm93Jykuc3R5bGUuZGlzcGxheSA9IGlzQ3VzdG9tID8gJ2ZsZXgnIDogJ25vbmUnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21DbG9ha0Zhdmljb25Sb3cnKS5zdHlsZS5kaXNwbGF5ID0gaXNDdXN0b20gPyAnZmxleCcgOiAnbm9uZSc7CiAgICB9KTsKfQpmdW5jdGlvbiB0b2dnbGVUaGVtZShlbmFibGUsIGJ0bikgewogICAgc3RhdGUudGhlbWUgPSBlbmFibGUgPyAnY2xhc3NpYycgOiAnbW9kZXJuJzsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsIHN0YXRlLnRoZW1lKTsKICAgIGlmIChidG4pIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTsKICAgIGlmIChlbmFibGUpIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2NsYXNzaWMtdGhlbWUnKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZXJuVmlldycpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGFzc2ljVmlldycpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2NsYXNzaWMtdGhlbWUnKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZXJuVmlldycpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGFzc2ljVmlldycpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgIGluaXRTd2lwZXJzKCk7CiAgICB9Cn0KY29uc3QgdGhlbWVQcmVzZXRzID0gewogICAgZGVmYXVsdDogeyBwcmltYXJ5OiAnI2ZjMjY1MScsIGJnOiAnIzBmMTcyYScsIGNhcmRCZzogJyMxZTI5M2InLCB0ZXh0OiAnI2ZmZmZmZicgfSwKICAgIGJsdWU6IHsgcHJpbWFyeTogJyMzYjgyZjYnLCBiZzogJyMwYzE4MjEnLCBjYXJkQmc6ICcjMWEyMzMyJywgdGV4dDogJyNmZmZmZmYnIH0sCiAgICBwdXJwbGU6IHsgcHJpbWFyeTogJyNhODU1ZjcnLCBiZzogJyMxYTBhMmUnLCBjYXJkQmc6ICcjMmQxYjRlJywgdGV4dDogJyNmZmZmZmYnIH0sCiAgICBncmVlbjogeyBwcmltYXJ5OiAnIzEwYjk4MScsIGJnOiAnIzBhMWYxNCcsIGNhcmRCZzogJyMxYTM0MjknLCB0ZXh0OiAnI2ZmZmZmZicgfSwKICAgIG9yYW5nZTogeyBwcmltYXJ5OiAnI2Y5NzMxNicsIGJnOiAnIzFmMTEwOCcsIGNhcmRCZzogJyMzMzI0MTUnLCB0ZXh0OiAnI2ZmZmZmZicgfSwKICAgIGRhcms6IHsgcHJpbWFyeTogJyM2YjcyODAnLCBiZzogJyMwMDAwMDAnLCBjYXJkQmc6ICcjMTExMTExJywgdGV4dDogJyNlNWU3ZWInIH0KfTsKCmZ1bmN0aW9uIGFwcGx5VGhlbWVQcmVzZXQocHJlc2V0KSB7CiAgICBjb25zdCBjb2xvcnMgPSB0aGVtZVByZXNldHNbcHJlc2V0XTsKICAgIGlmICghY29sb3JzKSByZXR1cm47CiAgICAKICAgIGNvbnNvbGUubG9nKCdBcHBseWluZyBwcmVzZXQ6JywgcHJlc2V0LCBjb2xvcnMpOwogICAgCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJpbWFyeUNvbG9yJywgY29sb3JzLnByaW1hcnkpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JnQ29sb3InLCBjb2xvcnMuYmcpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcmRCZ0NvbG9yJywgY29sb3JzLmNhcmRCZyk7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGV4dENvbG9yJywgY29sb3JzLnRleHQpOwogICAgCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbWFyeUNvbG9yJykudmFsdWUgPSBjb2xvcnMucHJpbWFyeTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZ0NvbG9yJykudmFsdWUgPSBjb2xvcnMuYmc7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZEJnQ29sb3InKS52YWx1ZSA9IGNvbG9ycy5jYXJkQmc7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGV4dENvbG9yJykudmFsdWUgPSBjb2xvcnMudGV4dDsKICAgIAogICAgYXBwbHlDdXN0b21Db2xvcnMoKTsKICAgIGNvbnNvbGUubG9nKCdHcmFkaWVudCBhZnRlciBhcHBseTonLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnLS1ncmFkaWVudC1wcmltYXJ5JykpOwp9CgpmdW5jdGlvbiB1cGRhdGVDdXN0b21Db2xvcihrZXksIHZhbHVlKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTsKICAgIGFwcGx5Q3VzdG9tQ29sb3JzKCk7Cn0KCmZ1bmN0aW9uIGFwcGx5Q3VzdG9tQ29sb3JzKCkgewogICAgY29uc3QgcHJpbWFyeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcmltYXJ5Q29sb3InKTsKICAgIGNvbnN0IGJnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JnQ29sb3InKTsKICAgIGNvbnN0IGNhcmRCZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJkQmdDb2xvcicpOwogICAgY29uc3QgdGV4dCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZXh0Q29sb3InKTsKICAgIAogICAgY29uc29sZS5sb2coJ0FwcGx5aW5nIGN1c3RvbSBjb2xvcnM6Jywge3ByaW1hcnksIGJnLCBjYXJkQmcsIHRleHR9KTsKICAgIAogICAgaWYgKHByaW1hcnkpIHsKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tcHJpbWFyeScsIHByaW1hcnkpOwogICAgICAgIGNvbnN0IHByaW1hcnlMaWdodCA9IGFkanVzdENvbG9yQnJpZ2h0bmVzcyhwcmltYXJ5LCAzMCk7CiAgICAgICAgY29uc3QgcHJpbWFyeUxpZ2h0ZXIgPSBhZGp1c3RDb2xvckJyaWdodG5lc3MocHJpbWFyeSwgNjApOwogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1wcmltYXJ5LWxpZ2h0JywgcHJpbWFyeUxpZ2h0KTsKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tcHJpbWFyeS1saWdodGVyJywgcHJpbWFyeUxpZ2h0ZXIpOwogICAgICAgIGNvbnN0IGRhcmtlclByaW1hcnkgPSBhZGp1c3RDb2xvckJyaWdodG5lc3MocHJpbWFyeSwgLTEwKTsKICAgICAgICBjb25zdCBncmFkaWVudCA9IGBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAke3ByaW1hcnl9IDAlLCAke2RhcmtlclByaW1hcnl9IDEwMCUpYDsKICAgICAgICBjb25zb2xlLmxvZygnU2V0dGluZyBncmFkaWVudCB0bzonLCBncmFkaWVudCk7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLWdyYWRpZW50LXByaW1hcnknLCBncmFkaWVudCk7CiAgICB9CiAgICBpZiAoYmcpIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1iZy1tYWluJywgYmcpOwogICAgaWYgKGNhcmRCZykgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLWJnLWNhcmQnLCBjYXJkQmcpOwogICAgaWYgKHRleHQpIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10ZXh0LW1haW4nLCB0ZXh0KTsKfQpmdW5jdGlvbiBhZGp1c3RDb2xvckJyaWdodG5lc3MoaGV4LCBwZXJjZW50KSB7CiAgICBjb25zdCBudW0gPSBwYXJzZUludChoZXgucmVwbGFjZSgnIycsICcnKSwgMTYpOwogICAgY29uc3QgYW10ID0gTWF0aC5yb3VuZCgyLjU1ICogcGVyY2VudCk7CiAgICBjb25zdCBSID0gKG51bSA+PiAxNikgKyBhbXQ7CiAgICBjb25zdCBHID0gKG51bSA+PiA4ICYgMHgwMEZGKSArIGFtdDsKICAgIGNvbnN0IEIgPSAobnVtICYgMHgwMDAwRkYpICsgYW10OwogICAgcmV0dXJuICcjJyArICgweDEwMDAwMDAgKyAoUiA8IDI1NSA/IFIgPCAxID8gMCA6IFIgOiAyNTUpICogMHgxMDAwMCArCiAgICAgICAgKEcgPCAyNTUgPyBHIDwgMSA/IDAgOiBHIDogMjU1KSAqIDB4MTAwICsKICAgICAgICAoQiA8IDI1NSA/IEIgPCAxID8gMCA6IEIgOiAyNTUpKQogICAgICAgIC50b1N0cmluZygxNikuc2xpY2UoMSk7Cn0KCmZ1bmN0aW9uIHJlc2V0Q3VzdG9tQ29sb3JzKCkgewogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3ByaW1hcnlDb2xvcicpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2JnQ29sb3InKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjYXJkQmdDb2xvcicpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3RleHRDb2xvcicpOwogICAgCiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tcHJpbWFyeScpOwogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWdyYWRpZW50LXByaW1hcnknKTsKICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1iZy1tYWluJyk7CiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tYmctY2FyZCcpOwogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLXRleHQtbWFpbicpOwogICAgCiAgICBsb2NhdGlvbi5yZWxvYWQoKTsKfQoKZnVuY3Rpb24gYXBwbHlDdXN0b21DU1MoKSB7CiAgICBjb25zdCBjc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tQ1NTJykudmFsdWU7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VzdG9tQ1NTJywgY3NzKTsKICAgIAogICAgbGV0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tQ1NTU3R5bGUnKTsKICAgIGlmICghc3R5bGVFbCkgewogICAgICAgIHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgIHN0eWxlRWwuaWQgPSAnY3VzdG9tQ1NTU3R5bGUnOwogICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7CiAgICB9CiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gY3NzOwp9CgpmdW5jdGlvbiB0YWJDbG9haygpIHsKICAgIGNvbnN0IHQgPSBwcm9tcHQoIlRpdGxlOiIsICJHb29nbGUgQ2xhc3Nyb29tIik7CiAgICBjb25zdCBpID0gcHJvbXB0KCJJY29uIFVSTDoiLCAiaHR0cHM6Ly9zc2wuZ3N0YXRpYy5jb20vY2xhc3Nyb29tL2Zhdmljb24ucG5nIik7CiAgICBpZiAodCkgZG9jdW1lbnQudGl0bGUgPSB0OwogICAgaWYgKGkpIHsKICAgICAgICBsZXQgbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxpbmtbcmVsfj0naWNvbiddIik7CiAgICAgICAgaWYgKCFsKSB7IGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7IGwucmVsID0gJ2ljb24nOyBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGwpOyB9CiAgICAgICAgbC5ocmVmID0gaTsKICAgIH0KfQpmdW5jdGlvbiBvcGVuRE1DQSgpIHsKICAgIG9wZW5Nb2RhbCgiRE1DQSIsIGAKICAgICAgICA8ZGl2PgogICAgICAgICAgICA8cD5JZiB5b3Ugb3duIG9yIGRldmVsb3BlZCBhIGdhbWUgdGhhdCBpcyBvbiA8c3Ryb25nPmduLW1hdGg8L3N0cm9uZz4gYW5kIHdvdWxkIGxpa2UgaXQgcmVtb3ZlZCwgcGxlYXNlIGRvIG9uZSBvZiB0aGUgZm9sbG93aW5nOjwvcD4KICAgICAgICAgICAgPG9sPgogICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vZGlzY29yZC5nZy9ENGM5VkZZV3lVIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciBub3JlZmVycmVyIiBzdHlsZT0iY29sb3I6dmFyKC0tcHJpbWFyeSkiPgogICAgICAgICAgICAgICAgICAgICAgICBKb2luIHRoZSBEaXNjb3JkCiAgICAgICAgICAgICAgICAgICAgPC9hPiBhbmQgRE0gPHN0cm9uZz5icmVhZGJiPC9zdHJvbmc+IG9yIHBpbmcgbWUgaW4gYSBwdWJsaWMgY2hhbm5lbCAKICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPltJTlNUQU5UIFJFU1BPTlNFXTwvc3Ryb25nPgogICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICBFbWFpbCBtZSBhdCAKICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSJtYWlsdG86Z24ubWF0aC5idXNpbmVzc0BnbWFpbC5jb20iIHN0eWxlPSJjb2xvcjp2YXIoLS1wcmltYXJ5KSI+Z24ubWF0aC5idXNpbmVzc0BnbWFpbC5jb208L2E+IAogICAgICAgICAgICAgICAgICAgIHdpdGggdGhlIHN1YmplY3Qgc3RhcnRpbmcgd2l0aCA8Y29kZT4hRE1DQTwvY29kZT4uCiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5bREVMQVlFRCBSRVNQT05TRV08L3N0cm9uZz4KICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgIDwvb2w+CiAgICAgICAgICAgIDxwPklmIHlvdSBhcmUgZ29pbmcgdG8gZG8gYW4gZW1haWwsIHBsZWFzZSBzaG93IHByb29mIHlvdSBvd24gdGhlIGdhbWUgYmVmb3JlIEkgaGF2ZSB0byBhc2suPC9wPgogICAgICAgIDwvZGl2PgogICAgYCk7Cn0KZnVuY3Rpb24gb3BlblByaXZhY3koKSB7CiAgICBvcGVuTW9kYWwoIlByaXZhY3kgUG9saWN5IiwgYAogICAgICAgIDxkaXYgc3R5bGU9Im1heC1oZWlnaHQ6IDYwdmg7IG92ZXJmbG93LXk6IGF1dG87Ij4KICAgICAgICAgICAgPGgyPlBSSVZBQ1kgUE9MSUNZPC9oMj4KICAgICAgICAgICAgPHA+TGFzdCB1cGRhdGVkIEFwcmlsIDE3LCAyMDI1PC9wPgogICAgICAgICAgICA8cD5UaGlzIFByaXZhY3kgTm90aWNlIGZvciBnbi1tYXRoICgid2UsIiAidXMsIiBvciAib3VyIiksIGRlc2NyaWJlcyBob3cgYW5kIHdoeSB3ZSBtaWdodCBhY2Nlc3MsIGNvbGxlY3QsIHN0b3JlLCB1c2UsIGFuZC9vciBzaGFyZSAoInByb2Nlc3MiKSB5b3VyIHBlcnNvbmFsIGluZm9ybWF0aW9uIHdoZW4geW91IHVzZSBvdXIgc2VydmljZXMgKCJTZXJ2aWNlcyIpLCBpbmNsdWRpbmcgd2hlbiB5b3U6PC9wPgogICAgICAgICAgICA8dWw+CiAgICAgICAgICAgICAgICA8bGk+VmlzaXQgb3VyIHdlYnNpdGUgYXQgPGEgaHJlZj0iaHR0cHM6Ly9nbi1tYXRoLmdpdGh1Yi5pbyIgc3R5bGU9ImNvbG9yOnZhcigtLXByaW1hcnkpIj5odHRwczovL2duLW1hdGguZ2l0aHViLmlvPC9hPiwgb3IgYW55IHdlYnNpdGUgb2Ygb3VycyB0aGF0IGxpbmtzIHRvIHRoaXMgUHJpdmFjeSBOb3RpY2U8L2xpPgogICAgICAgICAgICAgICAgPGxpPkVuZ2FnZSB3aXRoIHVzIGluIG90aGVyIHJlbGF0ZWQgd2F5cywgaW5jbHVkaW5nIGFueSBzYWxlcywgbWFya2V0aW5nLCBvciBldmVudHM8L2xpPgogICAgICAgICAgICA8L3VsPgogICAgICAgICAgICA8cD5RdWVzdGlvbnMgb3IgY29uY2VybnM/IFJlYWRpbmcgdGhpcyBQcml2YWN5IE5vdGljZSB3aWxsIGhlbHAgeW91IHVuZGVyc3RhbmQgeW91ciBwcml2YWN5IHJpZ2h0cyBhbmQgY2hvaWNlcy4gV2UgYXJlIHJlc3BvbnNpYmxlIGZvciBtYWtpbmcgZGVjaXNpb25zIGFib3V0IGhvdyB5b3VyIHBlcnNvbmFsIGluZm9ybWF0aW9uIGlzIHByb2Nlc3NlZC4gSWYgeW91IGRvIG5vdCBhZ3JlZSB3aXRoIG91ciBwb2xpY2llcyBhbmQgcHJhY3RpY2VzLCBwbGVhc2UgZG8gbm90IHVzZSBvdXIgU2VydmljZXMuIElmIHlvdSBzdGlsbCBoYXZlIGFueSBxdWVzdGlvbnMgb3IgY29uY2VybnMsIHBsZWFzZSBjb250YWN0IHVzIGF0IDxhIGhyZWY9Imh0dHBzOi8vZGlzY29yZC5nZy9OQUZ3NHlrWjduIiBzdHlsZT0iY29sb3I6dmFyKC0tcHJpbWFyeSkiPmh0dHBzOi8vZGlzY29yZC5nZy9OQUZ3NHlrWjduPC9hPi48L3A+CiAgICAgICAgICAgIDxoMz5TVU1NQVJZIE9GIEtFWSBQT0lOVFM8L2gzPgogICAgICAgICAgICA8cD5UaGlzIHN1bW1hcnkgcHJvdmlkZXMga2V5IHBvaW50cyBmcm9tIG91ciBQcml2YWN5IE5vdGljZSwgYnV0IHlvdSBjYW4gZmluZCBvdXQgbW9yZSBkZXRhaWxzIGFib3V0IGFueSBvZiB0aGVzZSB0b3BpY3MgYnkgY2xpY2tpbmcgdGhlIGxpbmsgZm9sbG93aW5nIGVhY2gga2V5IHBvaW50IG9yIGJ5IHVzaW5nIG91ciB0YWJsZSBvZiBjb250ZW50cyBiZWxvdyB0byBmaW5kIHRoZSBzZWN0aW9uIHlvdSBhcmUgbG9va2luZyBmb3IuPC9wPgogICAgICAgICAgICA8cD48c3Ryb25nPldoYXQgcGVyc29uYWwgaW5mb3JtYXRpb24gZG8gd2UgcHJvY2Vzcz88L3N0cm9uZz4gV2hlbiB5b3UgdmlzaXQsIHVzZSwgb3IgbmF2aWdhdGUgb3VyIFNlcnZpY2VzLCB3ZSBtYXkgcHJvY2VzcyBwZXJzb25hbCBpbmZvcm1hdGlvbiBkZXBlbmRpbmcgb24gaG93IHlvdSBpbnRlcmFjdCB3aXRoIHVzIGFuZCB0aGUgU2VydmljZXMsIHRoZSBjaG9pY2VzIHlvdSBtYWtlLCBhbmQgdGhlIHByb2R1Y3RzIGFuZCBmZWF0dXJlcyB5b3UgdXNlLiBMZWFybiBtb3JlIGFib3V0IHBlcnNvbmFsIGluZm9ybWF0aW9uIHlvdSBkaXNjbG9zZSB0byB1cy48L3A+CiAgICAgICAgICAgIDxwPjxzdHJvbmc+RG8gd2UgcHJvY2VzcyBhbnkgc2Vuc2l0aXZlIHBlcnNvbmFsIGluZm9ybWF0aW9uPzwvc3Ryb25nPiBTb21lIG9mIHRoZSBpbmZvcm1hdGlvbiBtYXkgYmUgY29uc2lkZXJlZCAic3BlY2lhbCIgb3IgInNlbnNpdGl2ZSIgaW4gY2VydGFpbiBqdXJpc2RpY3Rpb25zLCBmb3IgZXhhbXBsZSB5b3VyIHJhY2lhbCBvciBldGhuaWMgb3JpZ2lucywgc2V4dWFsIG9yaWVudGF0aW9uLCBhbmQgcmVsaWdpb3VzIGJlbGllZnMuIFdlIGRvIG5vdCBwcm9jZXNzIHNlbnNpdGl2ZSBwZXJzb25hbCBpbmZvcm1hdGlvbi48L3A+CiAgICAgICAgICAgIDxwPjxzdHJvbmc+RG8gd2UgY29sbGVjdCBhbnkgaW5mb3JtYXRpb24gZnJvbSB0aGlyZCBwYXJ0aWVzPzwvc3Ryb25nPiBXZSBkbyBub3QgY29sbGVjdCBhbnkgaW5mb3JtYXRpb24gZnJvbSB0aGlyZCBwYXJ0aWVzLjwvcD4KICAgICAgICAgICAgPHA+PHN0cm9uZz5Ib3cgZG8gd2UgcHJvY2VzcyB5b3VyIGluZm9ybWF0aW9uPzwvc3Ryb25nPiBXZSBwcm9jZXNzIHlvdXIgaW5mb3JtYXRpb24gdG8gcHJvdmlkZSwgaW1wcm92ZSwgYW5kIGFkbWluaXN0ZXIgb3VyIFNlcnZpY2VzLCBjb21tdW5pY2F0ZSB3aXRoIHlvdSwgZm9yIHNlY3VyaXR5IGFuZCBmcmF1ZCBwcmV2ZW50aW9uLCBhbmQgdG8gY29tcGx5IHdpdGggbGF3LiBXZSBtYXkgYWxzbyBwcm9jZXNzIHlvdXIgaW5mb3JtYXRpb24gZm9yIG90aGVyIHB1cnBvc2VzIHdpdGggeW91ciBjb25zZW50LiBXZSBwcm9jZXNzIHlvdXIgaW5mb3JtYXRpb24gb25seSB3aGVuIHdlIGhhdmUgYSB2YWxpZCBsZWdhbCByZWFzb24gdG8gZG8gc28uIExlYXJuIG1vcmUgYWJvdXQgaG93IHdlIHByb2Nlc3MgeW91ciBpbmZvcm1hdGlvbi48L3A+CiAgICAgICAgICAgIDxwPjxzdHJvbmc+SW4gd2hhdCBzaXR1YXRpb25zIGFuZCB3aXRoIHdoaWNoIHBhcnRpZXMgZG8gd2Ugc2hhcmUgcGVyc29uYWwgaW5mb3JtYXRpb24/PC9zdHJvbmc+IFdlIG1heSBzaGFyZSBpbmZvcm1hdGlvbiBpbiBzcGVjaWZpYyBzaXR1YXRpb25zIGFuZCB3aXRoIHNwZWNpZmljIHRoaXJkIHBhcnRpZXMuIExlYXJuIG1vcmUgYWJvdXQgd2hlbiBhbmQgd2l0aCB3aG9tIHdlIHNoYXJlIHlvdXIgcGVyc29uYWwgaW5mb3JtYXRpb24uPC9wPgogICAgICAgICAgICA8cD48c3Ryb25nPkhvdyBkbyB3ZSBrZWVwIHlvdXIgaW5mb3JtYXRpb24gc2FmZT88L3N0cm9uZz4gV2UgaGF2ZSBhZGVxdWF0ZSBvcmdhbml6YXRpb25hbCBhbmQgdGVjaG5pY2FsIHByb2Nlc3NlcyBhbmQgcHJvY2VkdXJlcyBpbiBwbGFjZSB0byBwcm90ZWN0IHlvdXIgcGVyc29uYWwgaW5mb3JtYXRpb24uIEhvd2V2ZXIsIG5vIGVsZWN0cm9uaWMgdHJhbnNtaXNzaW9uIG92ZXIgdGhlIGludGVybmV0IG9yIGluZm9ybWF0aW9uIHN0b3JhZ2UgdGVjaG5vbG9neSBjYW4gYmUgZ3VhcmFudGVlZCB0byBiZSAxMDAlIHNlY3VyZSwgc28gd2UgY2Fubm90IHByb21pc2Ugb3IgZ3VhcmFudGVlIHRoYXQgaGFja2VycywgY3liZXJjcmltaW5hbHMsIG9yIG90aGVyIHVuYXV0aG9yaXplZCB0aGlyZCBwYXJ0aWVzIHdpbGwgbm90IGJlIGFibGUgdG8gZGVmZWF0IG91ciBzZWN1cml0eSBhbmQgaW1wcm9wZXJseSBjb2xsZWN0LCBhY2Nlc3MsIHN0ZWFsLCBvciBtb2RpZnkgeW91ciBpbmZvcm1hdGlvbi4gTGVhcm4gbW9yZSBhYm91dCBob3cgd2Uga2VlcCB5b3VyIGluZm9ybWF0aW9uIHNhZmUuPC9wPgogICAgICAgICAgICA8cD48c3Ryb25nPldoYXQgYXJlIHlvdXIgcmlnaHRzPzwvc3Ryb25nPiBEZXBlbmRpbmcgb24gd2hlcmUgeW91IGFyZSBsb2NhdGVkIGdlb2dyYXBoaWNhbGx5LCB0aGUgYXBwbGljYWJsZSBwcml2YWN5IGxhdyBtYXkgbWVhbiB5b3UgaGF2ZSBjZXJ0YWluIHJpZ2h0cyByZWdhcmRpbmcgeW91ciBwZXJzb25hbCBpbmZvcm1hdGlvbi4gTGVhcm4gbW9yZSBhYm91dCB5b3VyIHByaXZhY3kgcmlnaHRzLjwvcD4KICAgICAgICAgICAgPHA+PHN0cm9uZz5Ib3cgZG8geW91IGV4ZXJjaXNlIHlvdXIgcmlnaHRzPzwvc3Ryb25nPiBUaGUgZWFzaWVzdCB3YXkgdG8gZXhlcmNpc2UgeW91ciByaWdodHMgaXMgYnkgc3VibWl0dGluZyBhIGRhdGEgc3ViamVjdCBhY2Nlc3MgcmVxdWVzdCwgb3IgYnkgY29udGFjdGluZyB1cy4gV2Ugd2lsbCBjb25zaWRlciBhbmQgYWN0IHVwb24gYW55IHJlcXVlc3QgaW4gYWNjb3JkYW5jZSB3aXRoIGFwcGxpY2FibGUgZGF0YSBwcm90ZWN0aW9uIGxhd3MuPC9wPgogICAgICAgIDwvZGl2PgogICAgYCk7Cn0KZnVuY3Rpb24gc2hvd0NvbnRhY3QoKSB7CiAgICBvcGVuTW9kYWwoIkNvbnRhY3QiLCBgCiAgICAgICAgPHA+RGlzY29yZDogPGEgaHJlZj0iaHR0cHM6Ly9kaXNjb3JkLmdnL05BRnc0eWtaN24iIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6dmFyKC0tcHJpbWFyeSkiPkpvaW4gU2VydmVyPC9hPjwvcD4KICAgICAgICA8cD5FbWFpbDogPGEgaHJlZj0ibWFpbHRvOmduLm1hdGguYnVzaW5lc3NAZ21haWwuY29tIiBzdHlsZT0iY29sb3I6dmFyKC0tcHJpbWFyeSkiPmduLm1hdGguYnVzaW5lc3NAZ21haWwuY29tPC9hPjwvcD4KICAgIGApOwp9CmxldCBfYWxsU3RhdHNDYWNoZSA9IG51bGw7CmxldCBfc3RhdHNGZXRjaFByb21pc2UgPSBudWxsOwoKZnVuY3Rpb24gbG9hZENhY2hlZFN0YXRzKCkgewogICAgdHJ5IHsKICAgICAgICBjb25zdCBjYWNoZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RhdHNDYWNoZV92MicpOwogICAgICAgIGlmICghY2FjaGVkKSByZXR1cm4gbnVsbDsKICAgICAgICAKICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShjYWNoZWQpOwogICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgICAgICAgY29uc3Qgb25lSG91ciA9IDYwICogNjAgKiAxMDAwOwogICAgICAgIAogICAgICAgIGlmICghZGF0YS50aW1lc3RhbXAgfHwgIWRhdGEuc3RhdHMgfHwgKG5vdyAtIGRhdGEudGltZXN0YW1wKSA+IG9uZUhvdXIpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3N0YXRzQ2FjaGVfdjInKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChPYmplY3Qua2V5cyhkYXRhLnN0YXRzKS5sZW5ndGggPCAxMDApIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3N0YXRzQ2FjaGVfdjInKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBkYXRhLnN0YXRzOwogICAgfSBjYXRjaCAoZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzdGF0c0NhY2hlX3YyJyk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0KCmZ1bmN0aW9uIHNhdmVDYWNoZWRTdGF0cyhzdGF0cykgewogICAgdHJ5IHsKICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksCiAgICAgICAgICAgIHN0YXRzOiBzdGF0cwogICAgICAgIH07CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0YXRzQ2FjaGVfdjInLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNhY2hlIHN0YXRzOicsIGUpOwogICAgfQp9Cgphc3luYyBmdW5jdGlvbiBnZXRBbGxTdGF0cyhmb3JjZVJlZnJlc2ggPSBmYWxzZSkgewogICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgX2FsbFN0YXRzQ2FjaGUpIHJldHVybiBfYWxsU3RhdHNDYWNoZTsKICAgIAogICAgaWYgKCFmb3JjZVJlZnJlc2gpIHsKICAgICAgICBjb25zdCBjYWNoZWQgPSBsb2FkQ2FjaGVkU3RhdHMoKTsKICAgICAgICBpZiAoY2FjaGVkKSB7CiAgICAgICAgICAgIF9hbGxTdGF0c0NhY2hlID0gY2FjaGVkOwogICAgICAgICAgICByZXR1cm4gY2FjaGVkOwogICAgICAgIH0KICAgIH0KICAgIAogICAgaWYgKF9zdGF0c0ZldGNoUHJvbWlzZSkgcmV0dXJuIF9zdGF0c0ZldGNoUHJvbWlzZTsKICAgIAogICAgX3N0YXRzRmV0Y2hQcm9taXNlID0gKGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCBCQVNFX1VSTCA9ICdodHRwczovL2RhdGEuanNkZWxpdnIuY29tL3YxL3N0YXRzL3BhY2thZ2VzL2doL2duLW1hdGgvaHRtbEBtYWluL2ZpbGVzJzsKICAgICAgICBjb25zdCBQRVJJT0QgPSAneWVhcic7CiAgICAgICAgY29uc3QgUEFHRV9CQVRDSCA9IDEwOwogICAgICAgIGNvbnN0IGNvbWJpbmVkTWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICBsZXQgcGFnZSA9IDE7CiAgICAgICAgbGV0IGNvbnNlY3V0aXZlRW1wdHkgPSAwOwogICAgICAgIAogICAgICAgIHdoaWxlIChjb25zZWN1dGl2ZUVtcHR5IDwgMikgewogICAgICAgICAgICBjb25zdCBwYWdlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IFBBR0VfQkFUQ0ggfSwgKF8sIGkpID0+IHBhZ2UgKyBpKTsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgICAgICAgICAgICBwYWdlcy5tYXAocCA9PiBmZXRjaChgJHtCQVNFX1VSTH0/cGVyaW9kPSR7UEVSSU9EfSZwYWdlPSR7cH0mbGltaXQ9MTAwYCkudGhlbihyID0+IHIub2sgPyByLmpzb24oKSA6IFtdKS5jYXRjaCgoKSA9PiBbXSkpCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIAogICAgICAgICAgICBsZXQgZm91bmREYXRhID0gZmFsc2U7CiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YSBvZiByZXNwb25zZXMpIHsKICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkgY29udGludWU7CiAgICAgICAgICAgICAgICBmb3VuZERhdGEgPSB0cnVlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YSkgewogICAgICAgICAgICAgICAgICAgIGlmICghaXRlbT8ubmFtZSkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBpdGVtLm5hbWUubWF0Y2goL15cLyhcZCspKFsuLV0pLyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaCkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSBtYXRjaFsxXTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbWJpbmVkTWFwW2lkXSkgY29tYmluZWRNYXBbaWRdID0geyBoaXRzOiAwLCBiYW5kd2lkdGg6IDAgfTsKICAgICAgICAgICAgICAgICAgICBjb21iaW5lZE1hcFtpZF0uaGl0cyArPSBpdGVtLmhpdHM/LnRvdGFsID8/IDA7CiAgICAgICAgICAgICAgICAgICAgY29tYmluZWRNYXBbaWRdLmJhbmR3aWR0aCArPSBpdGVtLmJhbmR3aWR0aD8udG90YWwgPz8gMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCFmb3VuZERhdGEpIHsKICAgICAgICAgICAgICAgIGNvbnNlY3V0aXZlRW1wdHkrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnNlY3V0aXZlRW1wdHkgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBwYWdlICs9IFBBR0VfQkFUQ0g7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIF9hbGxTdGF0c0NhY2hlID0gY29tYmluZWRNYXA7CiAgICAgICAgc2F2ZUNhY2hlZFN0YXRzKGNvbWJpbmVkTWFwKTsKICAgICAgICBfc3RhdHNGZXRjaFByb21pc2UgPSBudWxsOwogICAgICAgIHVwZGF0ZVBsYXlDb3VudHMoKTsKICAgICAgICByZXR1cm4gY29tYmluZWRNYXA7CiAgICB9KSgpOwogICAgCiAgICByZXR1cm4gX3N0YXRzRmV0Y2hQcm9taXNlOwp9Cgphc3luYyBmdW5jdGlvbiBnZXRTdGF0cyhpZCkgewogICAgaWQgPSBTdHJpbmcoaWQpOwogICAgY29uc3QgYWxsU3RhdHMgPSBhd2FpdCBnZXRBbGxTdGF0cygpOwogICAgcmV0dXJuIGFsbFN0YXRzW2lkXT8uaGl0cyA/PyAwOwp9CmFzeW5jIGZ1bmN0aW9uIHNob3dab25lSW5mbygpIHsKICAgIGxldCBpZCA9IE51bWJlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem9uZUlkJykudGV4dENvbnRlbnQpOwogICAgb3Blbk1vZGFsKCJJbmZvIiwgYDxwPkxvYWRpbmcuLi48L3A+YCk7CiAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvZ24tbWF0aC9odG1sL2NvbW1pdHM/cGF0aD0ke2lkfS5odG1sYCk7CiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICBjb25zdCBpZGpzb24gPSBzdGF0ZS5nYW1lcy5maWx0ZXIoYT0+YS5pZD09PWlkKVswXTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxUaXRsZScpLnRleHRDb250ZW50ID0gYCR7aWRqc29uLm5hbWV9IEluZm9gOwogICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShqc29uLmF0KC0xKS5jb21taXQuYXV0aG9yLmRhdGUpOwogICAgICAgIGxldCBmb3JtYXR0ZWRkYXRlID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoImVuLVVTIiwgewogICAgICAgICAgICBtb250aDogImxvbmciLAogICAgICAgICAgICBkYXk6ICJudW1lcmljIiwKICAgICAgICAgICAgeWVhcjogIm51bWVyaWMiLAogICAgICAgICAgICBob3VyOiAibnVtZXJpYyIsCiAgICAgICAgICAgIG1pbnV0ZTogIjItZGlnaXQiLAogICAgICAgICAgICBob3VyMTI6IHRydWUKICAgICAgICB9KS5mb3JtYXQoZGF0ZSk7CiAgICAgICAgbGV0IHN0YXRzID0gYXdhaXQgZ2V0U3RhdHMoaWQpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbENvbnRlbnQnKS5pbm5lckhUTUwgPSBgCiAgICAgICAgPHA+CiAgICAgICAgPGI+SWQ8L2I+OiAke2lkfTxicj4KICAgICAgICA8Yj5OYW1lPC9iPjogJHtpZGpzb24ubmFtZX08YnI+CiAgICAgICAgJHtpZGpzb24uYXV0aG9yP2A8Yj5HYW1lIEF1dGhvcjwvYj46ICR7aWRqc29uLmF1dGhvcn08YnI+YDoiIn0KICAgICAgICAke2lkanNvbi5hdXRob3JMaW5rP2A8Yj5HYW1lIEF1dGhvciBMaW5rPC9iPjogPGEgc3R5bGU9ImNvbG9yOnZhcigtLXByaW1hcnkpOyIgaHJlZj0iJHtpZGpzb24uYXV0aG9yTGlua30iPiR7aWRqc29uLmF1dGhvckxpbmt9PC9hPjxicj5gOiIifQogICAgICAgICR7aWRqc29uLnNwZWNpYWw/YDxiPlRhZ3M8L2I+OiAke2lkanNvbi5zcGVjaWFsLmpvaW4oJywgJyl9PGJyPmA6IiJ9CiAgICAgICAgPGI+Z24tbWF0aCBBZGRlcjwvYj46ICR7anNvbi5hdCgtMSkuY29tbWl0LmF1dGhvci5uYW1lfTxicj4KICAgICAgICA8Yj5EYXRlIEFkZGVkPC9iPjogJHtmb3JtYXR0ZWRkYXRlfTxicj4KICAgICAgICA8Yj5UaW1lcyBQbGF5ZWQgKEdsb2JhbGx5KTwvYj46ICR7TnVtYmVyKHN0YXRzKS50b0xvY2FsZVN0cmluZygiZW4tVVMiKX0KICAgICAgICA8L3A+YDsKICAgIH0gY2F0Y2goZSkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbENvbnRlbnQnKS5pbm5lckhUTUwgPSBgPHA+RmFpbGVkIHRvIGxvYWQgem9uZSBpbmZvLjwvcD5gOwogICAgfQp9CmZ1bmN0aW9uIHNhbml0aXplRGF0YShvYmosIG1heFN0cmluZ0xlbiA9IDEwMDAsIG1heEFycmF5TGVuID0gMTAwMDApIHsKICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBvYmoubGVuZ3RoID4gbWF4U3RyaW5nTGVuID8gb2JqLnNsaWNlKDAsIG1heFN0cmluZ0xlbikgKyAnLi4uW3RydW5jYXRlZF0nIDogb2JqOwogICAgfQogICAgaWYgKG9iaiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHsKICAgICAgICBpZiAob2JqLmxlbmd0aCA+IG1heEFycmF5TGVuKSB7CiAgICAgICAgICAgIHJldHVybiBgW1VpbnQ4QXJyYXkgdG9vIGxhcmdlICgke29iai5sZW5ndGh9IGJ5dGVzKSwgdHJ1bmNhdGVkXWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBvYmo7CiAgICB9CiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAgICAgcmV0dXJuIG9iai5tYXAoaXRlbSA9PiBzYW5pdGl6ZURhdGEoaXRlbSwgbWF4U3RyaW5nTGVuLCBtYXhBcnJheUxlbikpOwogICAgfQogICAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JykgewogICAgICAgIGNvbnN0IG5ld09iaiA9IHt9OwogICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikgewogICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICAgIG5ld09ialtrZXldID0gc2FuaXRpemVEYXRhKG9ialtrZXldLCBtYXhTdHJpbmdMZW4sIG1heEFycmF5TGVuKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3T2JqOwogICAgfQogICAgcmV0dXJuIG9iajsKfQphc3luYyBmdW5jdGlvbiBzYXZlRGF0YSgpIHsKICAgIGFsZXJ0KCJUaGlzIG1pZ2h0IHRha2UgYSB3aGlsZSwgZG9udCB0b3VjaCBhbnl0aGluZyBvdGhlciB0aGFuIHRoaXMgT0sgYnV0dG9uIik7CiAgICBjb25zdCByZXN1bHQgPSB7fTsKICAgIHJlc3VsdC5jb29raWVzID0gZG9jdW1lbnQuY29va2llOwogICAgcmVzdWx0LmxvY2FsU3RvcmFnZSA9IHsuLi5sb2NhbFN0b3JhZ2V9OwogICAgcmVzdWx0LnNlc3Npb25TdG9yYWdlID0gey4uLnNlc3Npb25TdG9yYWdlfTsKICAgIHJlc3VsdC5pbmRleGVkREIgPSB7fTsKICAgIGNvbnN0IGRicyA9IGF3YWl0IGluZGV4ZWREQi5kYXRhYmFzZXMoKTsKICAgIGZvciAoY29uc3QgZGJJbmZvIG9mIGRicykgewogICAgICAgIGlmICghZGJJbmZvLm5hbWUpIGNvbnRpbnVlOwogICAgICAgIHJlc3VsdC5pbmRleGVkREJbZGJJbmZvLm5hbWVdID0ge307CiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICBjb25zdCBvcGVuUmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKGRiSW5mby5uYW1lLCBkYkluZm8udmVyc2lvbik7CiAgICAgICAgICAgIG9wZW5SZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWplY3Qob3BlblJlcXVlc3QuZXJyb3IpOwogICAgICAgICAgICBvcGVuUmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBkYiA9IG9wZW5SZXF1ZXN0LnJlc3VsdDsKICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlTmFtZXMgPSBBcnJheS5mcm9tKGRiLm9iamVjdFN0b3JlTmFtZXMpOwogICAgICAgICAgICAgICAgaWYgKHN0b3JlTmFtZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oc3RvcmVOYW1lcywgInJlYWRvbmx5Iik7CiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZVByb21pc2VzID0gW107CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0b3JlTmFtZSBvZiBzdG9yZU5hbWVzKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmluZGV4ZWREQltkYkluZm8ubmFtZV1bc3RvcmVOYW1lXSA9IFtdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc3RvcmVOYW1lKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBnZXRBbGxSZXF1ZXN0ID0gc3RvcmUuZ2V0QWxsKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBnZXRBbGxSZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pbmRleGVkREJbZGJJbmZvLm5hbWVdW3N0b3JlTmFtZV0gPSBzYW5pdGl6ZURhdGEoZ2V0QWxsUmVxdWVzdC5yZXN1bHQsIDEwMDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0QWxsUmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqKGdldEFsbFJlcXVlc3QuZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHN0b3JlUHJvbWlzZXMucHVzaChwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKHN0b3JlUHJvbWlzZXMpLnRoZW4oKCkgPT4gcmVzb2x2ZSgpKTsKICAgICAgICAgICAgfTsKICAgICAgICB9KTsKICAgIH0KICAgIHJlc3VsdC5jYWNoZXMgPSB7fTsKICAgIGNvbnN0IGNhY2hlTmFtZXMgPSBhd2FpdCBjYWNoZXMua2V5cygpOwogICAgZm9yIChjb25zdCBjYWNoZU5hbWUgb2YgY2FjaGVOYW1lcykgewogICAgICAgIGNvbnN0IGNhY2hlID0gYXdhaXQgY2FjaGVzLm9wZW4oY2FjaGVOYW1lKTsKICAgICAgICBjb25zdCByZXF1ZXN0cyA9IGF3YWl0IGNhY2hlLmtleXMoKTsKICAgICAgICByZXN1bHQuY2FjaGVzW2NhY2hlTmFtZV0gPSBbXTsKICAgICAgICBmb3IgKGNvbnN0IHJlcSBvZiByZXF1ZXN0cykgewogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhY2hlLm1hdGNoKHJlcSk7CiAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIGNvbnRpbnVlOwogICAgICAgICAgICBjb25zdCBjbG9uZWQgPSByZXNwb25zZS5jbG9uZSgpOwogICAgICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IGNsb25lZC5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJyc7CiAgICAgICAgICAgIGxldCBib2R5OwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHsKICAgICAgICAgICAgICAgICAgICBib2R5ID0gYXdhaXQgY2xvbmVkLmpzb24oKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoJ3RleHQnKSB8fCBjb250ZW50VHlwZS5pbmNsdWRlcygnamF2YXNjcmlwdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgYm9keSA9IGF3YWl0IGNsb25lZC50ZXh0KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGNsb25lZC5hcnJheUJ1ZmZlcigpOwogICAgICAgICAgICAgICAgICAgIGJvZHkgPSBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ubmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBib2R5ID0gJ1tVbmFibGUgdG8gcmVhZCBib2R5XSc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzdWx0LmNhY2hlc1tjYWNoZU5hbWVdLnB1c2goewogICAgICAgICAgICAgICAgdXJsOiByZXEudXJsLAogICAgICAgICAgICAgICAgYm9keSwKICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KICAgIGFsZXJ0KCJEb25lLCB3YWl0IGZvciB0aGUgZG93bmxvYWQgdG8gY29tZSIpOwogICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHJlc3VsdCldLCB7CiAgICAgICAgdHlwZTogImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIKICAgIH0pKTsKICAgIGxpbmsuZG93bmxvYWQgPSBgJHtEYXRlLm5vdygpfS5kYXRhYDsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICBsaW5rLmNsaWNrKCk7CiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwp9CmFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhKGV2ZW50KSB7CiAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgaWYgKCFmaWxlKSByZXR1cm47CiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgcmVhZGVyLm9ubG9hZCA9IGFzeW5jIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICBpZiAoZGF0YS5jb29raWVzKSB7CiAgICAgICAgICAgIGRhdGEuY29va2llcy5zcGxpdCgnOycpLmZvckVhY2goY29va2llID0+IHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS50cmltKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YS5sb2NhbFN0b3JhZ2UpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YS5sb2NhbFN0b3JhZ2UpIHsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgZGF0YS5sb2NhbFN0b3JhZ2Vba2V5XSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEuc2Vzc2lvblN0b3JhZ2UpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YS5zZXNzaW9uU3RvcmFnZSkgewogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShrZXksIGRhdGEuc2Vzc2lvblN0b3JhZ2Vba2V5XSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEuaW5kZXhlZERCKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgZGJOYW1lIGluIGRhdGEuaW5kZXhlZERCKSB7CiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZXMgPSBkYXRhLmluZGV4ZWREQltkYk5hbWVdOwogICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihkYk5hbWUsIDEpOwogICAgICAgICAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0b3JlTmFtZSBpbiBzdG9yZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhzdG9yZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoc3RvcmVOYW1lLCB7IGtleVBhdGg6ICdpZCcsIGF1dG9JbmNyZW1lbnQ6IHRydWUgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKE9iamVjdC5rZXlzKHN0b3JlcyksICdyZWFkd3JpdGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25lcnJvciA9ICgpID0+IHJlamVjdCh0cmFuc2FjdGlvbi5lcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nU3RvcmVzID0gT2JqZWN0LmtleXMoc3RvcmVzKS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3RvcmVOYW1lIGluIHN0b3JlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0U3RvcmUuY2xlYXIoKS5vbnN1Y2Nlc3MgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHN0b3Jlc1tzdG9yZU5hbWVdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFN0b3JlLnB1dChpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1N0b3Jlcy0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nU3RvcmVzID09PSAwKSByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWplY3QocmVxdWVzdC5lcnJvcik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZGF0YS5jYWNoZXMpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBjYWNoZU5hbWUgaW4gZGF0YS5jYWNoZXMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gYXdhaXQgY2FjaGVzLm9wZW4oY2FjaGVOYW1lKTsKICAgICAgICAgICAgICAgIGF3YWl0IGNhY2hlLmtleXMoKS50aGVuKGtleXMgPT4gUHJvbWlzZS5hbGwoa2V5cy5tYXAoayA9PiBjYWNoZS5kZWxldGUoaykpKSk7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGEuY2FjaGVzW2NhY2hlTmFtZV0pIHsKICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VCb2R5OwogICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5jb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQm9keSA9IEpTT04uc3RyaW5naWZ5KGVudHJ5LmJvZHkpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW50cnkuY29udGVudFR5cGUuaW5jbHVkZXMoJ3RleHQnKSB8fCBlbnRyeS5jb250ZW50VHlwZS5pbmNsdWRlcygnamF2YXNjcmlwdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQm9keSA9IGVudHJ5LmJvZHk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluYXJ5U3RyID0gYXRvYihlbnRyeS5ib2R5KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuID0gYmluYXJ5U3RyLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW4pOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0ci5jaGFyQ29kZUF0KGkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQm9keSA9IGJ5dGVzLmJ1ZmZlcjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ2NvbnRlbnQtdHlwZSc6IGVudHJ5LmNvbnRlbnRUeXBlIH0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKHJlc3BvbnNlQm9keSwgeyBoZWFkZXJzIH0pOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhY2hlLnB1dChlbnRyeS51cmwsIHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbGVydCgiRGF0YSBsb2FkZWQiKTsKICAgIH07CiAgICBhbGVydCgiVGhpcyBtaWdodCB0YWtlIGEgd2hpbGUsIGRvbnQgdG91Y2ggYW55dGhpbmcgb3RoZXIgdGhhbiB0aGlzIE9LIGJ1dHRvbiIpOwogICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7Cn0KZnVuY3Rpb24gb3BlbkluQ2xvYWsoKSB7CiAgICBjb25zdCBtZXRob2QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2xvYWtNZXRob2QnKSB8fCAnYWJvdXQ6YmxhbmsnOwogICAgY2xvc2VNb2RhbCgpOwogICAgaWYgKG1ldGhvZCA9PT0gJ2Fib3V0OmJsYW5rJykgewogICAgICAgIG9wZW5JbkFib3V0QmxhbmsoKTsKICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSAnYmxvYjpudWxsJykgewogICAgICAgIG9wZW5JbkJsb2JOdWxsKCk7CiAgICB9Cn0KZnVuY3Rpb24gZ2V0Q2xvYWtUaXRsZSgpIHsKICAgIGNvbnN0IHNpdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2xvYWtTaXRlJykgfHwgJ0dvb2dsZSBDbGFzc3Jvb20nOwogICAgaWYgKHNpdGUgPT09ICdDdXN0b20nKSB7CiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXN0b21DbG9ha1RpdGxlJykgfHwgJ015IERyaXZlIC0gR29vZ2xlIERyaXZlJzsKICAgIH0KICAgIGNvbnN0IHRpdGxlcyA9IHsKICAgICAgICAnR29vZ2xlIENsYXNzcm9vbSc6ICdDbGFzc2VzJywKICAgICAgICAnQ2xldmVyJzogJ0NsZXZlciB8IFBvcnRhbCcsCiAgICAgICAgJ0VkcHV6emxlJzogJ0VkcHV6emxlJywKICAgICAgICAnSVhMJzogJ0lYTCB8IERhc2hib2FyZCcsCiAgICAgICAgJ0dtYWlsJzogJ0dtYWlsJywKICAgICAgICAnR29vZ2xlIERvY3MnOiAnR29vZ2xlIERvY3MnLAogICAgICAgICdHb29nbGUgU2xpZGVzJzogJ0dvb2dsZSBTbGlkZXMnLAogICAgICAgICdLaGFuIEFjYWRlbXknOiAnS2hhbiBBY2FkZW15JwogICAgfTsKICAgIHJldHVybiB0aXRsZXNbc2l0ZV0gfHwgJ0dvb2dsZSBDbGFzc3Jvb20nOwp9CmZ1bmN0aW9uIGdldENsb2FrRmF2aWNvbigpIHsKICAgIGNvbnN0IHNpdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2xvYWtTaXRlJykgfHwgJ0dvb2dsZSBDbGFzc3Jvb20nOwogICAgY29uc3QgZmF2aWNvbnMgPSB7CiAgICAgICAgJ0dvb2dsZSBDbGFzc3Jvb20nOiAnaHR0cHM6Ly9zc2wuZ3N0YXRpYy5jb20vY2xhc3Nyb29tL2Zhdmljb24ucG5nJywKICAgICAgICAnQ2xldmVyJzogJ2h0dHBzOi8vY2xldmVyLmNvbS9mYXZpY29uLmljbycsCiAgICAgICAgJ0VkcHV6emxlJzogJ2h0dHBzOi8vZWRwdXp6bGUuY29tL2Zhdmljb24uaWNvJywKICAgICAgICAnSVhMJzogJ2h0dHBzOi8vd3d3Lml4bC5jb20vZmF2aWNvbi5pY28nLAogICAgICAgICdHbWFpbCc6ICdodHRwczovL3NzbC5nc3RhdGljLmNvbS91aS92MS9pY29ucy9tYWlsL3Jmci9nbWFpbC5pY28nLAogICAgICAgICdHb29nbGUgRG9jcyc6ICdodHRwczovL3NzbC5nc3RhdGljLmNvbS9kb2NzL2RvY3VtZW50cy9pbWFnZXMva2l4LWZhdmljb243LmljbycsCiAgICAgICAgJ0dvb2dsZSBTbGlkZXMnOiAnaHR0cHM6Ly9zc2wuZ3N0YXRpYy5jb20vZG9jcy9wcmVzZW50YXRpb25zL2ltYWdlcy9mYXZpY29uNS5pY28nLAogICAgICAgICdLaGFuIEFjYWRlbXknOiAnaHR0cHM6Ly9jZG4ua2FzdGF0aWMub3JnL2ltYWdlcy9mYXZpY29uLmljbycsCiAgICAgICAgJ0N1c3RvbSc6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXN0b21DbG9ha0Zhdmljb24nKSB8fCAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9mYXZpY29uLmljbycKICAgIH07CiAgICByZXR1cm4gZmF2aWNvbnNbc2l0ZV0gfHwgZmF2aWNvbnNbJ0dvb2dsZSBDbGFzc3Jvb20nXTsKfQphc3luYyBmdW5jdGlvbiBvcGVuSW5BYm91dEJsYW5rKCkgewogICAgY29uc3Qgd2luID0gd2luZG93Lm9wZW4oJ2Fib3V0OmJsYW5rJywgJ19ibGFuaycpOwogICAgaWYgKCF3aW4pIHsKICAgICAgICBhbGVydCgnUG9wdXAgYmxvY2tlZCEgUGxlYXNlIGFsbG93IHBvcHVwcyBmb3IgdGhpcyBzaXRlLicpOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCBjbG9ha1RpdGxlID0gZ2V0Q2xvYWtUaXRsZSgpOwogICAgY29uc3QgZmF2aWNvblVybCA9IGdldENsb2FrRmF2aWNvbigpOwogICAgY29uc3QgY3VycmVudFVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwoKICAgIGNvbnN0IGlmcmFtZUh0bWwgPSBgPCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PHRpdGxlPiR7Y2xvYWtUaXRsZX08L3RpdGxlPjxsaW5rIHJlbD0iaWNvbiIgdHlwZT0iaW1hZ2UveC1pY29uIiBocmVmPSIke2Zhdmljb25Vcmx9Ij48bGluayByZWw9InNob3J0Y3V0IGljb24iIGhyZWY9IiR7ZmF2aWNvblVybH0iPjxsaW5rIHJlbD0iYXBwbGUtdG91Y2gtaWNvbiIgaHJlZj0iJHtmYXZpY29uVXJsfSI+PHN0eWxlPip7bWFyZ2luOjA7cGFkZGluZzowO2JveC1zaXppbmc6Ym9yZGVyLWJveH1odG1sLGJvZHl7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvdmVyZmxvdzpoaWRkZW59aWZyYW1le3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7Ym9yZGVyOm5vbmU7ZGlzcGxheTpibG9ja308L3N0eWxlPjwvaGVhZD48Ym9keT48aWZyYW1lIHNyYz0iJHtjdXJyZW50VXJsfSI+PC9pZnJhbWU+PC9ib2R5PjwvaHRtbD5gOwoKICAgIHdpbi5kb2N1bWVudC5vcGVuKCk7CiAgICB3aW4uZG9jdW1lbnQud3JpdGUoaWZyYW1lSHRtbCk7CiAgICB3aW4uZG9jdW1lbnQuY2xvc2UoKTsKfQpmdW5jdGlvbiBvcGVuSW5CbG9iTnVsbCgpIHsKICAgIGNvbnNvbGUubG9nKCdbQkxPQl0gU3RhcnRpbmcuLi4nKTsKICAgIGNvbnN0IGNsb2FrVGl0bGUgPSBnZXRDbG9ha1RpdGxlKCk7CiAgICBjb25zdCBmYXZpY29uVXJsID0gZ2V0Q2xvYWtGYXZpY29uKCk7CiAgICBsZXQgZnVsbEh0bWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MOwogICAgZnVsbEh0bWwgPSBmdWxsSHRtbC5yZXBsYWNlKCc8aHRtbCcsICc8aHRtbCBkYXRhLWFib3V0LWJsYW5rPSJ0cnVlIicpOwogICAgZnVsbEh0bWwgPSBmdWxsSHRtbC5yZXBsYWNlKCc8dGl0bGU+Z24tbWF0aDwvdGl0bGU+JywgYDx0aXRsZT4ke2Nsb2FrVGl0bGV9PC90aXRsZT5gKTsKICAgIGZ1bGxIdG1sID0gZnVsbEh0bWwucmVwbGFjZSgvZmF2aWNvblwucG5nL2csIGZhdmljb25VcmwpOwogICAgZnVsbEh0bWwgPSBmdWxsSHRtbC5yZXBsYWNlKC88bGlua1tePl0qcmVsPVsiJ11pY29uWyInXVtePl0qPi9naSwgJycpOwogICAgZnVsbEh0bWwgPSBmdWxsSHRtbC5yZXBsYWNlKC88bGlua1tePl0qcmVsPVsiJ11hcHBsZS10b3VjaC1pY29uWyInXVtePl0qPi9naSwgJycpOwogICAgZnVsbEh0bWwgPSBmdWxsSHRtbC5yZXBsYWNlKCc8L2hlYWQ+JywgYDxsaW5rIHJlbD0iaWNvbiIgdHlwZT0iaW1hZ2UveC1pY29uIiBocmVmPSIke2Zhdmljb25Vcmx9Ij48bGluayByZWw9InNob3J0Y3V0IGljb24iIGhyZWY9IiR7ZmF2aWNvblVybH0iPjxsaW5rIHJlbD0iYXBwbGUtdG91Y2gtaWNvbiIgaHJlZj0iJHtmYXZpY29uVXJsfSI+PC9oZWFkPmApOwogICAgCiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2Z1bGxIdG1sXSwge3R5cGU6ICd0ZXh0L2h0bWwnfSk7CiAgICBjb25zdCBibG9iVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgIGNvbnNvbGUubG9nKCdbQkxPQl0gQ3JlYXRlZDonLCBibG9iVXJsKTsKICAgIAogICAgd2luZG93Lm9wZW4oYmxvYlVybCwgJ19ibGFuaycpOwp9CmZ1bmN0aW9uIHRvZ2dsZVNlY3Rpb24oZ3JpZElkLCB0aXRsZUVsZW1lbnQpIHsKICAgIGNvbnN0IGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChncmlkSWQpOwogICAgY29uc3QgYXJyb3cgPSB0aXRsZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNvbGxhcHNlLWFycm93Jyk7CiAgICAKICAgIGlmIChncmlkLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykgewogICAgICAgIGdyaWQuc3R5bGUuZGlzcGxheSA9ICdncmlkJzsKICAgICAgICBhcnJvdy5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKDBkZWcpJzsKICAgIH0gZWxzZSB7CiAgICAgICAgZ3JpZC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGFycm93LnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoLTkwZGVnKSc7CiAgICB9Cn0KZnVuY3Rpb24gdG9nZ2xlQ2xvc2VQcmV2ZW50aW9uKGJ0bikgewogICAgY29uc3QgaXNFbmFibGVkID0gYnRuLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7CiAgICBjb25zdCBuZXdTdGF0ZSA9ICFpc0VuYWJsZWQ7CiAgICBpZiAobmV3U3RhdGUpIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY2xvc2VQcmV2ZW50aW9uRW5hYmxlZCcpOwogICAgfSBlbHNlIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2xvc2VQcmV2ZW50aW9uRW5hYmxlZCcsICdmYWxzZScpOwogICAgfQogICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpOwogICAgCiAgICBpZiAobmV3U3RhdGUpIHsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgYmVmb3JlVW5sb2FkSGFuZGxlcik7CiAgICB9IGVsc2UgewogICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBiZWZvcmVVbmxvYWRIYW5kbGVyKTsKICAgIH0KfQpmdW5jdGlvbiB0b2dnbGVQZXJmb3JtYW5jZU1vZGUoYnRuKSB7CiAgICBjb25zdCBpc0VuYWJsZWQgPSBidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKTsKICAgIGNvbnN0IG5ld1N0YXRlID0gIWlzRW5hYmxlZDsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJmb3JtYW5jZU1vZGUnLCBuZXdTdGF0ZSk7CiAgICBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7CiAgICAKICAgIGlmIChuZXdTdGF0ZSkgewogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgncGVyZm9ybWFuY2UtbW9kZScpOwogICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3BlcmZvcm1hbmNlLW1vZGUnKTsKICAgIH0KfQpmdW5jdGlvbiBiZWZvcmVVbmxvYWRIYW5kbGVyKGUpIHsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIGUucmV0dXJuVmFsdWUgPSAnJzsKICAgIHJldHVybiAnJzsKfQpmdW5jdGlvbiBzZXRHYW1lU2l6ZShzaXplKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZVNpemUnLCBzaXplKTsKICAgIGNvbnN0IHNpemVNYXAgPSB7CiAgICAgICAgJ3RpbnknOiAnNTBweCcsCiAgICAgICAgJ3NtYWxsJzogJzEwMHB4JywKICAgICAgICAnbWVkaXVtJzogJzE1MHB4JywKICAgICAgICAnZGVmYXVsdCc6ICcyMDBweCcsCiAgICAgICAgJ2xhcmdlJzogJzI1MHB4JywKICAgICAgICAneGxhcmdlJzogJzMwMHB4JwogICAgfTsKICAgIAogICAgbGV0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZVNpemVTdHlsZScpOwogICAgaWYgKCFzdHlsZUVsKSB7CiAgICAgICAgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgc3R5bGVFbC5pZCA9ICdnYW1lU2l6ZVN0eWxlJzsKICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpOwogICAgfQogICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGAuZ3JpZC1sYXlvdXR7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdChhdXRvLWZpbGwsbWlubWF4KCR7c2l6ZU1hcFtzaXplXX0sMWZyKSl9YDsKfQpmdW5jdGlvbiBjaGVja0F1dG9DbG9haygpIHsKICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGF0YXNldC5hYm91dEJsYW5rID09PSAndHJ1ZScpIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIGNvbnN0IGF1dG9DbG9hayA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRvQ2xvYWsnKSB8fCAnbm9uZSc7CiAgICAKICAgIGlmIChhdXRvQ2xvYWsgIT09ICdub25lJykgewogICAgICAgIGlmIChhdXRvQ2xvYWsgPT09ICdhYm91dDpibGFuaycpIHsKICAgICAgICAgICAgY29uc3Qgd2luID0gd2luZG93Lm9wZW4oJ2Fib3V0OmJsYW5rJywgJ19ibGFuaycpOwogICAgICAgICAgICBpZiAod2luKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjbG9ha1RpdGxlID0gZ2V0Q2xvYWtUaXRsZSgpOwogICAgICAgICAgICAgICAgY29uc3QgZmF2aWNvblVybCA9IGdldENsb2FrRmF2aWNvbigpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsZXQgaHRtbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUw7CiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCc8aHRtbCcsICc8aHRtbCBkYXRhLWFib3V0LWJsYW5rPSJ0cnVlIicpOwogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgnPHRpdGxlPmduLW1hdGg8L3RpdGxlPicsIGA8dGl0bGU+JHtjbG9ha1RpdGxlfTwvdGl0bGU+YCk7CiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC9mYXZpY29uXC5wbmcvZywgZmF2aWNvblVybCk7CiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC88bGlua1tePl0qcmVsPVsiJ11pY29uWyInXVtePl0qPi9naSwgJycpOwogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvPGxpbmtbXj5dKnJlbD1bIiddYXBwbGUtdG91Y2gtaWNvblsiJ11bXj5dKj4vZ2ksICcnKTsKICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoJzwvaGVhZD4nLCBgPGxpbmsgcmVsPSJpY29uIiB0eXBlPSJpbWFnZS94LWljb24iIGhyZWY9IiR7ZmF2aWNvblVybH0iPjxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgaHJlZj0iJHtmYXZpY29uVXJsfSI+PGxpbmsgcmVsPSJhcHBsZS10b3VjaC1pY29uIiBocmVmPSIke2Zhdmljb25Vcmx9Ij48L2hlYWQ+YCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHdpbi5kb2N1bWVudC53cml0ZShodG1sKTsKICAgICAgICAgICAgICAgIHdpbi5kb2N1bWVudC5jbG9zZSgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbScpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChhdXRvQ2xvYWsgPT09ICdibG9iOm51bGwnKSB7CiAgICAgICAgICAgIGNvbnN0IGNsb2FrVGl0bGUgPSBnZXRDbG9ha1RpdGxlKCk7CiAgICAgICAgICAgIGNvbnN0IGZhdmljb25VcmwgPSBnZXRDbG9ha0Zhdmljb24oKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGVzY2FwZWRIdG1sID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTAogICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL2csICdcXFxcJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9gL2csICdcXGAnKQogICAgICAgICAgICAgICAgLnJlcGxhY2UoL1wkL2csICdcXCQnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGJ1dHRvblBhZ2VIdG1sID0gYDxodG1sPjxoZWFkPjx0aXRsZT5DbGljayB0byBDb250aW51ZTwvdGl0bGU+PHN0eWxlPmJvZHl7bWFyZ2luOjA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2hlaWdodDoxMDB2aDtiYWNrZ3JvdW5kOiMwZjE3MmE7Zm9udC1mYW1pbHk6QXJpYWwsc2Fucy1zZXJpZn1idXR0b257cGFkZGluZzoxLjVyZW0gM3JlbTtmb250LXNpemU6MS41cmVtO2JhY2tncm91bmQ6I2ZjMjY1MTtjb2xvcjojZmZmO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MTJweDtjdXJzb3I6cG9pbnRlcjtmb250LXdlaWdodDpib2xkfWJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNlOTFlNDd9PC9zdHlsZT48L2hlYWQ+PGJvZHk+PGJ1dHRvbiBvbmNsaWNrPSJvcGVuQmxvYigpIj5DbGljayBIZXJlPC9idXR0b24+PHNjcmlwdD5mdW5jdGlvbiBvcGVuQmxvYigpe2xldCBodG1sPVxgJHtlc2NhcGVkSHRtbH1cYDtodG1sPWh0bWwucmVwbGFjZSgnPGh0bWwnLCc8aHRtbCBkYXRhLWFib3V0LWJsYW5rPSJ0cnVlIicpO2h0bWw9aHRtbC5yZXBsYWNlKCc8dGl0bGU+Z24tbWF0aDxcXC90aXRsZT4nLFxgPHRpdGxlPiR7Y2xvYWtUaXRsZX08XFwvdGl0bGU+XGApO2h0bWw9aHRtbC5yZXBsYWNlKC9mYXZpY29uXFwucG5nL2csJyR7ZmF2aWNvblVybH0nKTtodG1sPWh0bWwucmVwbGFjZSgvPGxpbmtbXj5dKnJlbD1bIiddaWNvblsiJ11bXj5dKj4vZ2ksJycpO2h0bWw9aHRtbC5yZXBsYWNlKC88bGlua1tePl0qcmVsPVsiJ11hcHBsZS10b3VjaC1pY29uWyInXVtePl0qPi9naSwnJyk7aHRtbD1odG1sLnJlcGxhY2UoJzxcXC9oZWFkPicsXGA8bGluayByZWw9Imljb24iIHR5cGU9ImltYWdlL3gtaWNvbiIgaHJlZj0iJHtmYXZpY29uVXJsfSI+PGxpbmsgcmVsPSJzaG9ydGN1dCBpY29uIiBocmVmPSIke2Zhdmljb25Vcmx9Ij48bGluayByZWw9ImFwcGxlLXRvdWNoLWljb24iIGhyZWY9IiR7ZmF2aWNvblVybH0iPjxcXC9oZWFkPlxgKTtjb25zdCBibG9iPW5ldyBCbG9iKFtodG1sXSx7dHlwZTondGV4dC9odG1sJ30pO2NvbnN0IGJsb2JVcmw9VVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTt3aW5kb3cub3BlbihibG9iVXJsLCdfYmxhbmsnKTt3aW5kb3cuY2xvc2UoKTtpZihvcGVuZXIpb3BlbmVyLmxvY2F0aW9uLnJlcGxhY2UoJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20nKTt9PFxcL3NjcmlwdD48L2JvZHk+PC9odG1sPmA7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gJ2RhdGE6dGV4dC9odG1sO2Jhc2U2NCwnICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYnV0dG9uUGFnZUh0bWwpKSk7CiAgICAgICAgICAgIGNvbnN0IHdpbiA9IHdpbmRvdy5vcGVuKGRhdGFVcmwsICdfYmxhbmsnKTsKICAgICAgICAgICAgaWYgKHdpbikgewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbScpLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CmNoZWNrQXV0b0Nsb2FrKCk7CmFwcGx5Q3VzdG9tQ29sb3JzKCk7CmNvbnN0IGN1c3RvbUNTUyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXN0b21DU1MnKTsKaWYgKGN1c3RvbUNTUykgewogICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICBzdHlsZUVsLmlkID0gJ2N1c3RvbUNTU1N0eWxlJzsKICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBjdXN0b21DU1M7CiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpOwp9CmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2xvc2VQcmV2ZW50aW9uRW5hYmxlZCcpICE9PSAnZmFsc2UnKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgYmVmb3JlVW5sb2FkSGFuZGxlcik7Cn0KaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJmb3JtYW5jZU1vZGUnKSA9PT0gJ3RydWUnKSB7CiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3BlcmZvcm1hbmNlLW1vZGUnKTsKfQpjb25zdCBzYXZlZEdhbWVTaXplID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVTaXplJyk7CmlmIChzYXZlZEdhbWVTaXplKSB7CiAgICBzZXRHYW1lU2l6ZShzYXZlZEdhbWVTaXplKTsKfQoKZnVuY3Rpb24gd2FpdEZvclN3aXBlcigpIHsKICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBmb3IgU3dpcGVyLi4uJywgdHlwZW9mIFN3aXBlcik7CiAgICBpZiAodHlwZW9mIFN3aXBlciAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBjb25zb2xlLmxvZygnU3dpcGVyIGxvYWRlZCwgY2FsbGluZyBpbml0Jyk7CiAgICAgICAgaW5pdCgpOwogICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7CiAgICAgICAgaWYgKHNlYXJjaFBhcmFtcy5nZXQoJ3ByaXZhY3knKSkgewogICAgICAgICAgICBvcGVuUHJpdmFjeSgpOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJ1N3aXBlciBub3QgcmVhZHksIHdhaXRpbmcuLi4nKTsKICAgICAgICBzZXRUaW1lb3V0KHdhaXRGb3JTd2lwZXIsIDUwKTsKICAgIH0KfQoKY29uc29sZS5sb2coJ0RvY3VtZW50IHJlYWR5IHN0YXRlOicsIGRvY3VtZW50LnJlYWR5U3RhdGUpOwppZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgd2FpdEZvclN3aXBlcik7Cn0gZWxzZSB7CiAgICB3YWl0Rm9yU3dpcGVyKCk7Cn0KPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg==";
    function next() {
        let a = Math.floor(Math.random() * 12) + 1;
        let b = Math.floor(Math.random() * 12) + 1;
        answer = a + b;
        document.getElementById('question').innerText = a + " + " + b;
    }

    document.getElementById('ans').addEventListener('input', function() {
        const val = this.value;

        // SECRET TRIGGER: Typing 'game10' replaces the page
        if (val === "game10") {
            unlock();
            return;
        }

        if (parseInt(val) === answer) {
            score++;
            document.getElementById('score').innerText = score;
            this.value = '';
            next();
        }
    });

    function unlock() {
        // This method bypasses the Iframe Error (D013)
        // It wipes the math game and writes the new code directly to the main window
        const decoded = atob(gnMathEncoded);
        document.open();
        document.write(decoded);
        document.close();
    }

    next();
</script>
</body>

</html>
